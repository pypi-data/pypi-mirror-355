[workspace]
resolver = "2"

[workspace.package]
version = "0.1.0-alpha.3"
edition = "2021"
license = "AGPL-3.0-only"
authors = ["Andrej Kolƒçin <self@kaathewise.net>"]
repository = "https://github.com/kaathewisegit/aspartik"

[workspace.dependencies]
anyhow = "1.0"
approx = "0.5.1"
bincode = { version = "2.0", default-features = false }
bytemuck = "1.23"
crossbeam-channel = "0.5.15"
cudarc = { version = "0.16.4", default-features = false }
divan = "0.1.21"
hashbrown = "0.15.3"
lapack-sys = "0.15.0"
log = "0.4.27"
nom = "8.0"
num-traits = "0.2.19"
parking_lot = "0.12.4"
petgraph = { version = "0.8.2", default-features = false }
proptest = "1.6"
pyo3 = "0.25"
rand = { version = "0.9.1", default-features = false }
rand_distr = "0.5.1"
rand_pcg = "0.9.0"
serde = "1.0"
serde_json = "1.0"
thiserror = "2.0"

b3 = { version = "0.1.0-alpha.3", path = "crates/b3" }
bitmap = { version = "0.1.0-alpha.3", path = "crates/bitmap" }
data = { version = "0.1.0-alpha.3", path = "crates/data" }
io = { version = "0.1.0-alpha.3", path = "crates/io" }
linalg = { version = "0.1.0-alpha.3", path = "crates/linalg" }
profiler = { version = "0.1.0-alpha.3", path = "crates/profiler" }
rng = { version = "0.1.0-alpha.3", path = "crates/rng" }
skvec = { version = "0.1.0-alpha.3", path = "crates/skvec" }
stats = { version = "0.1.0-alpha.3", path = "crates/stats" }
util = { version = "0.1.0-alpha.3", path = "crates/util" }

[workspace.lints.clippy]
branches_sharing_code = "warn"
cast_lossless = "warn"
default_trait_access = "warn"
derive_partial_eq_without_eq = "warn"

[profile.bench]
debug = true

[package]
name = "aspartik"
description = "Computational biology toolkit"

version.workspace = true
edition.workspace = true
license.workspace = true
authors.workspace = true
repository.workspace = true

[dependencies]
pyo3 = { workspace = true, features = ["anyhow"] }

b3 = { workspace = true }
data = { workspace = true }
io = { workspace = true }
rng = { workspace = true }
stats = { workspace = true }
profiler = { workspace = true }

[features]
cuda = ["b3/cuda"]
