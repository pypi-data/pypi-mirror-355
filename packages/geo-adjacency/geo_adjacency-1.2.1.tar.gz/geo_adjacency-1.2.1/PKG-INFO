Metadata-Version: 2.3
Name: geo-adjacency
Version: 1.2.1
Summary: A package to determine which geometries are adjacent to each other, accounting for obstacles and gaps between features.
License: MIT
Keywords: voronoi,adjacency,geospatial,geometry
Author: Andrew Smyth
Author-email: andrew.j.smyth.89@gmail.com
Requires-Python: >=3.9,<3.13
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Science/Research
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Scientific/Engineering
Classifier: Topic :: Scientific/Engineering :: GIS
Requires-Dist: matplotlib (>=3.8.1,<4.0.0)
Requires-Dist: numpy (>=1.26.2,<2.0.0)
Requires-Dist: scipy (>=1.11.3,<2.0.0)
Requires-Dist: setuptools (>=69.0.0,<70.0.0)
Requires-Dist: shapely (>=2.0.2,<3.0.0)
Project-URL: Documentation, https://asmyth01.github.io/geo-adjacency/
Project-URL: Homepage, https://asmyth01.github.io/geo-adjacency/
Project-URL: Repository, https://github.com/andrewsmyth/geo-adjacency
Description-Content-Type: text/markdown

# Geo-Adjacency
Pip [repository](https://pypi.org/project/geo-adjacency/)

Full [documentation](https://asmyth01.github.io/geo-adjacency/index.html)

# Installation
It's recommended to use a virtual environment to install this tool, since its dependencies may 
require different versions than what is installed on your system.

## pip
Recommended installation is with [pip](https://pypi.org/project/pip/):

```python -m pip install geo-adjacency```

## Build from source
You must have Python <3.13,>=3.9 installed.
```
$ git clone git@github.com:asmyth01/geo-adjacency.git
$ cd geo-adjacency
$ poetry install
```
Or with [build](https://pypa-build.readthedocs.io/en/latest/).
```
$ git clone git@github.com:asmyth01/geo-adjacency.git
$ cd geo-adjacency
$ python -m build
```

# Example Usage
_See the [docs](https://asmyth01.github.io/geo-adjacency/index.html) for details._

1.  Load the data. geo-adjacency expects you to provide your data as Shapely geometries. You will provide three lists: source_geoemtries, target_geometries, and obstacle_geometries. What we are analyzing is which of the source geometries are adjacent to which of the target geometries. Obstacles can prevent a source and target from being adjacent, but they do not participate in the adjacency dictionary.
2. Create an AdjacencyEngine. In this case, we'll load the sample data which is available on `Github <https://github.com/asmyth01/geo-adjacency/>`_.

   ```python
   s, t, o = load_test_geoms("../tests/sample_data")
      engine = AdjacencyEngine(s , t, o, True)
   ```
3. Run the analysis
      ```python
      output = engine.get_adjacency_dict()
      # defaultdict(<class 'list'>, {0: [1, 2], 1: [1], 2: [1], 3: [2], 6: [1], 7: [1]})
      ```

    The output is a dictionary. Keys are the indices of source geometries in the input list, and values are a list of indices of adjacent target geometries in the input list.

4. You can visualize the output with a handy built-in method which uses pyplot.
   `engine.plot_adjacency_dict()`. (Source geoms are grey, targets are blue, obstacles are red. Linkages are green.

   ![adjancency diagram](docs/images/adjacency_with_segmentation.png) 

5.  You probably will want to match the adjacency dictionary back to the original data so that you can do something cool with it.
```python
      for source_i, target_i_list in output.items():
          source_geom = source_geometries[source_i]
          target_geoms = [target_geometries[i] for i in target_i_list]
```

# Development
## Installing dependencies
```
poetry env use [python version]
poetry install
```

## Running tests
`poetry run pytest tests`

## Running a module
`poetry run python [python file]`

