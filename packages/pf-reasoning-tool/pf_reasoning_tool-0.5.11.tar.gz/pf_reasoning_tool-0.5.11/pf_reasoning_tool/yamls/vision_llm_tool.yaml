$schema: https://azuremlschemas.azureedge.net/promptflow/latest/Tool.schema.json
name: Vision LLM (GPT-4o)
description: 'Calls a vision-capable OpenAI-style model, including GPT-4o and GPT-4-vision-preview.'
type: custom_llm
category: HW_PF_tools
module: pf_reasoning_tool.tools.vision_llm_tool
function: vision_llm

default_prompt: |
  # system:
  You are an AI assistant.  Analyse the provided image and answer the userâ€™s question based on its content.

  # user:
  {{prompt_text}}
  ![image]({{image_input}})

inputs:
  connection:
    type: [AzureOpenAIConnection, OpenAIConnection]
    description: 'OpenAI or Azure OpenAI connection.'

  deployment_name:
    type: [string]
    description: 'AOAI deployment pointing to a vision model (e.g., gpt-4o-vision-preview).'
    enabled_by: connection
    enabled_by_type: [AzureOpenAIConnection]
    allow_manual_entry: true
    optional: true
    ui_hints: {text_box_size: lg}

  model:
    type: [string]
    description: 'OpenAI model ID.'
    enabled_by: connection
    enabled_by_type: [OpenAIConnection]
    enum: ['gpt-4o-mini', 'gpt-4-vision-preview']
    allow_manual_entry: true
    optional: true
    ui_hints: {text_box_size: lg}

  temperature:
    type: [double]
    default: 0.7
    ui_hints: {text_box_size: xs}

  top_p:
    type: [double]
    default: 1.0
    ui_hints: {text_box_size: xs}

  max_tokens:
    type: [int]
    description: 'Maximum tokens (blank = use API default).'
    optional: true
    ui_hints: {text_box_size: xs}

  presence_penalty:
    type: [double]
    default: 0.0
    ui_hints: {text_box_size: xs}

  frequency_penalty:
    type: [double]
    default: 0.0
    ui_hints: {text_box_size: xs}

  detail:
    type: [string]
    enum: ['auto', 'low', 'high']
    default: 'auto'

  stream:
    type: [bool]
    default: false
    visible: false

outputs:
  output:
    type: [string]
    description: 'Assistant response.'
