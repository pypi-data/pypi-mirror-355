Metadata-Version: 2.3
Name: smart-flights
Version: 0.4.0
Summary: Smart Python library for Google Flights API with bilingual support and intelligent search features
Keywords: smart-flights,flights,google-flights,travel,api,flight-search,bilingual,intelligent-search
Author: Punit Arani
Author-email: punit@joinslash.com
Requires-Python: >=3.12,<4.0
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Requires-Dist: curl-cffi (>=0.7.4,<0.8.0)
Requires-Dist: httpx (>=0.28.1,<0.29.0)
Requires-Dist: pandas (>=2.2.3,<3.0.0)
Requires-Dist: pydantic (>=2.10.4,<3.0.0)
Requires-Dist: python-dotenv (>=1.0.1,<2.0.0)
Requires-Dist: ratelimit (>=2.2.1,<3.0.0)
Requires-Dist: tenacity (>=9.0.0,<10.0.0)
Requires-Dist: typer (>=0.15.1,<0.16.0)
Project-URL: Documentation, https://punitarani.github.io/fli
Project-URL: Homepage, https://github.com/punitarani/fli
Project-URL: Repository, https://github.com/punitarani/fli
Description-Content-Type: text/markdown

# Fli ğŸ›«

ä¸€ä¸ªå¼ºå¤§çš„ Python åº“ï¼Œæä¾›å¯¹ Google Flights æ•°æ®çš„ç¼–ç¨‹è®¿é—®ï¼Œé…å¤‡ä¼˜é›…çš„å‘½ä»¤è¡Œç•Œé¢ã€‚è½»æ¾æœç´¢èˆªç­ã€å¯»æ‰¾æœ€ä¼˜æƒ ä»·æ ¼å¹¶ç­›é€‰ç»“æœã€‚

> ğŸš€ **Fli çš„ç‰¹åˆ«ä¹‹å¤„ï¼Ÿ**
> ä¸å…¶ä»–ä¾èµ–ç½‘é¡µæŠ“å–çš„èˆªç­æœç´¢åº“ä¸åŒï¼ŒFli é€šè¿‡é€†å‘å·¥ç¨‹ç›´æ¥ä¸ Google Flights API äº¤äº’ã€‚
> è¿™æ„å‘³ç€ï¼š
> - **å¿«é€Ÿ**ï¼šç›´æ¥ API è®¿é—®æ„å‘³ç€æ›´å¿«ã€æ›´å¯é çš„ç»“æœ
> - **é›¶æŠ“å–**ï¼šæ— éœ€ HTML è§£æï¼Œæ— éœ€æµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼Œçº¯ API äº¤äº’
> - **å¯é **ï¼šä¸æ˜“å›  UI å˜åŒ–è€Œä¸­æ–­
> - **æ¨¡å—åŒ–**ï¼šå¯æ‰©å±•æ¶æ„ï¼Œä¾¿äºè‡ªå®šä¹‰å’Œé›†æˆ

![CLI æ¼”ç¤º](https://github.com/punitarani/fli/blob/main/data/cli-demo.png)

## å¿«é€Ÿå¼€å§‹

```bash
pip install smart-flights
```

```bash
# ä½¿ç”¨ pipx å®‰è£…ï¼ˆæ¨èç”¨äº CLIï¼‰
pipx install smart-flights

# å¼€å§‹ä½¿ç”¨ CLI
fli --help
```

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” **å¼ºå¤§æœç´¢**
    - å•ç¨‹èˆªç­æœç´¢
    - çµæ´»çš„å‡ºå‘æ—¶é—´
    - å¤šèˆªç©ºå…¬å¸æ”¯æŒ
    - èˆ±ä½ç­‰çº§é€‰æ‹©
    - ä¸­è½¬åå¥½è®¾ç½®
    - è‡ªå®šä¹‰ç»“æœæ’åº

- ğŸ’º **èˆ±ä½ç­‰çº§**
    - ç»æµèˆ±
    - è¶…çº§ç»æµèˆ±
    - å•†åŠ¡èˆ±
    - å¤´ç­‰èˆ±

- ğŸ¯ **æ™ºèƒ½æ’åº**
    - ä»·æ ¼
    - é£è¡Œæ—¶é•¿
    - å‡ºå‘æ—¶é—´
    - åˆ°è¾¾æ—¶é—´

- ğŸ›¡ï¸ **å†…ç½®ä¿æŠ¤**
    - é€Ÿç‡é™åˆ¶
    - è‡ªåŠ¨é‡è¯•
    - å…¨é¢é”™è¯¯å¤„ç†
    - è¾“å…¥éªŒè¯

- ğŸŒ **å¤šè¯­è¨€æ”¯æŒ**
    - ä¸­è‹±æ–‡åŒè¯­ç•Œé¢
    - æœºåœºåç§°æœ¬åœ°åŒ–
    - èˆªç©ºå…¬å¸åç§°ç¿»è¯‘
    - æ”¯æŒä¸­æ–‡å’Œè‹±æ–‡æœç´¢

## CLI ä½¿ç”¨æ–¹æ³•

### æœç´¢ç‰¹å®šèˆªç­

```bash
# åŸºç¡€æœç´¢
fli search JFK LHR 2025-10-25

# é«˜çº§æœç´¢ï¼ˆå¸¦ç­›é€‰æ¡ä»¶ï¼‰
fli search JFK LHR 2025-10-25 \
    -t 6-20 \              # æ—¶é—´èŒƒå›´ï¼ˆä¸Šåˆ6ç‚¹ - æ™šä¸Š8ç‚¹ï¼‰
    -a BA KL \             # èˆªç©ºå…¬å¸ï¼ˆè‹±å›½èˆªç©ºã€è·å…°çš‡å®¶èˆªç©ºï¼‰
    -s BUSINESS \          # èˆ±ä½ç±»å‹
    -x NON_STOP \          # ä»…ç›´é£èˆªç­
    -o DURATION            # æŒ‰é£è¡Œæ—¶é•¿æ’åº

# ä¸­æ–‡æœç´¢ç¤ºä¾‹
fli search PEK LAX 2025-10-25 \
    --language zh-cn \     # ä¸­æ–‡ç•Œé¢
    --currency CNY         # äººæ°‘å¸ä»·æ ¼
```

### æŸ¥æ‰¾æœ€ä¾¿å®œæ—¥æœŸ

```bash
# åŸºç¡€æœ€ä¾¿å®œæ—¥æœŸæœç´¢
fli cheap JFK LHR

# é«˜çº§æœç´¢ï¼ˆæŒ‡å®šæ—¥æœŸèŒƒå›´ï¼‰
fli cheap JFK LHR \
    --from 2025-01-01 \
    --to 2025-02-01 \
    --monday --friday      # ä»…å‘¨ä¸€å’Œå‘¨äº”
```

### æœºåœºæœç´¢

```bash
# æœç´¢æœºåœº
fli airport-search "åŒ—äº¬"
fli airport-search "london" --language zh-cn
fli airport-search "PEK"

# æŒ‰å›½å®¶æœç´¢
fli airport-search "ä¸­å›½" --country --language zh-cn
```

### CLI é€‰é¡¹

#### æœç´¢å‘½ä»¤ (`fli search`)

| é€‰é¡¹             | æè¿°                    | ç¤ºä¾‹                   |
|------------------|-------------------------|------------------------|
| `-t, --time`     | æ—¶é—´èŒƒå›´ï¼ˆ24å°æ—¶åˆ¶ï¼‰    | `6-20`                 |
| `-a, --airlines` | èˆªç©ºå…¬å¸ä»£ç             | `BA KL`                |
| `-s, --seat`     | èˆ±ä½ç­‰çº§                | `ECONOMY`, `BUSINESS`  |
| `-x, --stops`    | æœ€å¤§ä¸­è½¬æ¬¡æ•°            | `NON_STOP`, `ONE_STOP` |
| `-o, --sort`     | ç»“æœæ’åºæ–¹å¼            | `CHEAPEST`, `DURATION` |
| `-l, --language` | ç•Œé¢è¯­è¨€                | `en`, `zh-cn`          |
| `--currency`     | ä»·æ ¼è´§å¸                | `USD`, `CNY`           |

#### ä¾¿å®œèˆªç­å‘½ä»¤ (`fli cheap`)

| é€‰é¡¹          | æè¿°         | ç¤ºä¾‹                   |
|---------------|--------------|------------------------|
| `--from`      | å¼€å§‹æ—¥æœŸ     | `2025-01-01`           |
| `--to`        | ç»“æŸæ—¥æœŸ     | `2025-02-01`           |
| `-s, --seat`  | èˆ±ä½ç­‰çº§     | `ECONOMY`, `BUSINESS`  |
| `-x, --stops` | æœ€å¤§ä¸­è½¬æ¬¡æ•° | `NON_STOP`, `ONE_STOP` |
| `--[day]`     | æ—¥æœŸç­›é€‰     | `--monday`, `--friday` |

#### æœºåœºæœç´¢å‘½ä»¤ (`fli airport-search`)

| é€‰é¡¹             | æè¿°                    | ç¤ºä¾‹                   |
|------------------|-------------------------|------------------------|
| `-l, --language` | æœç´¢ç»“æœè¯­è¨€            | `en`, `zh-cn`          |
| `-n, --limit`    | æœ€å¤§ç»“æœæ•°é‡            | `10`                   |
| `--city`         | æŒ‰åŸå¸‚æœç´¢              | `--city`               |
| `--country`      | æŒ‰å›½å®¶æœç´¢              | `--country`            |

## Python API è¯¦ç»†ä½¿ç”¨æ–¹æ³•

### 1. èˆªç­æœç´¢ API

#### 1.1 åŸºç¡€å•ç¨‹èˆªç­æœç´¢

```python
from datetime import datetime, timedelta
from fli.search import SearchFlights
from fli.models import (
    FlightSearchFilters, FlightSegment, Airport,
    PassengerInfo, SeatType, MaxStops, SortBy, TripType
)
from fli.models.google_flights.base import LocalizationConfig, Language, Currency

# åˆ›å»ºæœ¬åœ°åŒ–é…ç½®ï¼ˆæ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢ï¼‰
localization_config = LocalizationConfig(
    language=Language.CHINESE,  # æˆ– Language.ENGLISH
    currency=Currency.CNY,      # æˆ– Currency.USD
    region="CN"                 # æˆ– "US"
)

# åˆ›å»ºèˆªç­æ®µ
flight_segments = [
    FlightSegment(
        departure_airport=[[Airport.PEK, 0]],  # åŒ—äº¬é¦–éƒ½å›½é™…æœºåœº
        arrival_airport=[[Airport.LAX, 0]],    # æ´›æ‰çŸ¶å›½é™…æœºåœº
        travel_date="2025-06-01"               # å‡ºå‘æ—¥æœŸ (YYYY-MM-DD)
    )
]

# åˆ›å»ºæœç´¢ç­›é€‰æ¡ä»¶
filters = FlightSearchFilters(
    trip_type=TripType.ONE_WAY,                # å•ç¨‹
    passenger_info=PassengerInfo(
        adults=1,                              # æˆäººæ•°é‡
        children=0,                            # å„¿ç«¥æ•°é‡
        infants_in_seat=0,                     # å åº§å©´å„¿
        infants_on_lap=0                       # è†ä¸Šå©´å„¿
    ),
    flight_segments=flight_segments,
    seat_type=SeatType.ECONOMY,                # èˆ±ä½ç­‰çº§
    stops=MaxStops.NON_STOP,                   # ä¸­è½¬é™åˆ¶
    sort_by=SortBy.CHEAPEST                    # æ’åºæ–¹å¼
)

# æ‰§è¡Œæœç´¢
search = SearchFlights(localization_config=localization_config)
flights = search.search(filters, top_n=10)

# å¤„ç†ç»“æœ
if flights:
    for i, flight in enumerate(flights, 1):
        print(f"\n=== èˆªç­é€‰é¡¹ {i} ===")
        print(f"ğŸ’° ä»·æ ¼: {localization_config.currency_symbol}{flight.price}")
        print(f"â±ï¸ æ€»æ—¶é•¿: {flight.duration} åˆ†é’Ÿ")
        print(f"âœˆï¸ ä¸­è½¬æ¬¡æ•°: {flight.stops}")

        for j, leg in enumerate(flight.legs, 1):
            # è·å–æœ¬åœ°åŒ–çš„èˆªç©ºå…¬å¸åç§°
            airline_name = localization_config.get_airline_name(
                leg.airline.name, leg.airline.value
            )
            print(f"\n  èˆªæ®µ {j}: {airline_name} {leg.flight_number}")
            print(f"  ğŸ“ {leg.departure_airport.value} â†’ {leg.arrival_airport.value}")
            print(f"  ï¿½ {leg.departure_datetime} â†’ {leg.arrival_datetime}")
else:
    print("æœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„èˆªç­")
```

#### 1.2 å¾€è¿”èˆªç­æœç´¢

```python
# åˆ›å»ºå¾€è¿”èˆªç­æ®µ
flight_segments = [
    # å»ç¨‹
    FlightSegment(
        departure_airport=[[Airport.PEK, 0]],
        arrival_airport=[[Airport.LAX, 0]],
        travel_date="2025-06-01"
    ),
    # è¿”ç¨‹
    FlightSegment(
        departure_airport=[[Airport.LAX, 0]],
        arrival_airport=[[Airport.PEK, 0]],
        travel_date="2025-06-15"
    )
]

filters = FlightSearchFilters(
    trip_type=TripType.ROUND_TRIP,             # å¾€è¿”
    passenger_info=PassengerInfo(adults=2),   # 2ä½æˆäºº
    flight_segments=flight_segments,
    seat_type=SeatType.BUSINESS,               # å•†åŠ¡èˆ±
    stops=MaxStops.ONE_STOP,                   # æœ€å¤šä¸€æ¬¡ä¸­è½¬
    sort_by=SortBy.DURATION                    # æŒ‰æ—¶é•¿æ’åº
)

search = SearchFlights(localization_config=localization_config)
flights = search.search(filters)

# å¾€è¿”èˆªç­ç»“æœå¤„ç†
if flights:
    for i, flight_pair in enumerate(flights, 1):
        if isinstance(flight_pair, tuple):
            outbound, return_flight = flight_pair
            print(f"\n=== å¾€è¿”é€‰é¡¹ {i} ===")
            print(f"ğŸ’° æ€»ä»·æ ¼: {localization_config.currency_symbol}{outbound.price + return_flight.price}")
            print(f"ğŸ›« å»ç¨‹: {outbound.duration}åˆ†é’Ÿ, {outbound.stops}æ¬¡ä¸­è½¬")
            print(f"ğŸ›¬ è¿”ç¨‹: {return_flight.duration}åˆ†é’Ÿ, {return_flight.stops}æ¬¡ä¸­è½¬")
```

#### 1.3 é«˜çº§æœç´¢é€‰é¡¹

```python
from fli.models import TimeRestrictions, PriceLimit, LayoverRestrictions, Airline

# æ—¶é—´é™åˆ¶
time_restrictions = TimeRestrictions(
    earliest_departure=6,    # æœ€æ—©å‡ºå‘æ—¶é—´ (6:00)
    latest_departure=20,     # æœ€æ™šå‡ºå‘æ—¶é—´ (20:00)
    earliest_arrival=8,      # æœ€æ—©åˆ°è¾¾æ—¶é—´ (8:00)
    latest_arrival=22        # æœ€æ™šåˆ°è¾¾æ—¶é—´ (22:00)
)

# ä»·æ ¼é™åˆ¶
price_limit = PriceLimit(
    max_price=5000,          # æœ€é«˜ä»·æ ¼
    currency=Currency.CNY    # è´§å¸
)

# ä¸­è½¬é™åˆ¶
layover_restrictions = LayoverRestrictions(
    airports=[Airport.NRT, Airport.ICN],  # å…è®¸çš„ä¸­è½¬æœºåœº
    max_duration=480                      # æœ€é•¿ä¸­è½¬æ—¶é—´(åˆ†é’Ÿ)
)

# æŒ‡å®šèˆªç©ºå…¬å¸
preferred_airlines = [
    Airline.CA,  # ä¸­å›½å›½é™…èˆªç©º
    Airline.MU,  # ä¸­å›½ä¸œæ–¹èˆªç©º
    Airline.CZ   # ä¸­å›½å—æ–¹èˆªç©º
]

# åˆ›å»ºå¸¦æ—¶é—´é™åˆ¶çš„èˆªç­æ®µ
flight_segments = [
    FlightSegment(
        departure_airport=[[Airport.PEK, 0]],
        arrival_airport=[[Airport.LAX, 0]],
        travel_date="2025-06-01",
        time_restrictions=time_restrictions
    )
]

filters = FlightSearchFilters(
    trip_type=TripType.ONE_WAY,
    passenger_info=PassengerInfo(adults=1),
    flight_segments=flight_segments,
    seat_type=SeatType.PREMIUM_ECONOMY,       # è¶…çº§ç»æµèˆ±
    stops=MaxStops.ANY,                       # ä»»æ„ä¸­è½¬
    price_limit=price_limit,                  # ä»·æ ¼é™åˆ¶
    airlines=preferred_airlines,              # æŒ‡å®šèˆªç©ºå…¬å¸
    max_duration=1200,                        # æœ€é•¿é£è¡Œæ—¶é—´(åˆ†é’Ÿ)
    layover_restrictions=layover_restrictions, # ä¸­è½¬é™åˆ¶
    sort_by=SortBy.DEPARTURE_TIME             # æŒ‰å‡ºå‘æ—¶é—´æ’åº
)
```

## æ”¯æŒçš„æœºåœºå’Œèˆªç©ºå…¬å¸

### æœºåœºè¦†ç›–
- **å…¨çƒ 255+ ä¸ªä¸»è¦æœºåœº**
- **ä¸­è‹±æ–‡åŒè¯­åç§°**
- **è¦†ç›–æ‰€æœ‰å¤§æ´²**
- **æ”¯æŒä¸­è‹±æ–‡æœç´¢**

### èˆªç©ºå…¬å¸æ”¯æŒ
- **382+ ä¸ªèˆªç©ºå…¬å¸**
- **å®Œæ•´ä¸­æ–‡ç¿»è¯‘**
- **åŒ…å«ä¸»è¦å›½é™…å’Œåœ°åŒºèˆªç©ºå…¬å¸**
- **æ ¹æ® API è¯­è¨€å‚æ•°è‡ªåŠ¨åˆ‡æ¢æ˜¾ç¤ºè¯­è¨€**

## å¼€å‘

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/punitarani/fli.git
cd fli

# ä½¿ç”¨ Poetry å®‰è£…ä¾èµ–
poetry install

# è¿è¡Œæµ‹è¯•
poetry run pytest

# è¿è¡Œä»£ç æ£€æŸ¥
poetry run ruff check .
poetry run ruff format .

# æ„å»ºæ–‡æ¡£
poetry run mkdocs serve
```

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·éšæ—¶æäº¤ Pull Requestã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ â€” è¯¦æƒ…è¯·å‚é˜… LICENSE æ–‡ä»¶ã€‚

