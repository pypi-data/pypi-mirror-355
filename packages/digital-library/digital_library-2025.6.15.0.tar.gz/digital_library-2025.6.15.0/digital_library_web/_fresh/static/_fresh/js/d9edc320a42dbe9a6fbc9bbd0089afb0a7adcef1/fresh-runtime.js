import{b as W}from"./chunk-TY33ZR3E.js";import{a as q,c as h,d as T,e as K,f as $}from"./chunk-UNITEU6O.js";typeof globalThis>"u"&&(window.globalThis=window);var w="data-current",I="data-ancestor",z="data-frsh-key",y="f-client-nav",X="__frsh_c";function j(t,e){let r=new URL(e,"http://localhost").pathname;return r!=="/"&&r.endsWith("/")&&(r=r.slice(0,-1)),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t===r?2:t.startsWith(r+"/")||r==="/"?1:0}function L(t,e){if(!t.startsWith("/")||t.startsWith("//"))return t;try{let r=new URL(t,"https://freshassetcache.local");return r.protocol!=="https:"||r.host!=="freshassetcache.local"||r.searchParams.has(X)?t:(r.searchParams.set(X,e),r.pathname+r.search+r.hash)}catch(r){return console.warn(`Failed to create asset() URL, falling back to regular path ('${t}'):`,r),t}}function G(t,e){if(t.includes("("))return t;let r=t.split(","),i=[];for(let n of r){let o=n.trimStart(),s=n.length-o.length;if(o==="")return t;let a=o.indexOf(" ");a===-1&&(a=o.length);let p=n.substring(0,s),c=o.substring(0,a),l=o.substring(a);i.push(p+L(c,e)+l)}return i.join(",")}function J(t,e){if(t.type==="img"||t.type==="source"){let{props:r}=t;if(r["data-fresh-disable-lock"])return;typeof r.src=="string"&&(r.src=L(r.src,e)),typeof r.srcset=="string"&&(r.srcset=G(r.srcset,e))}}var _="d9edc320a42dbe9a6fbc9bbd0089afb0a7adcef1";var ie=q.vnode;q.vnode=t=>{if(J(t,_),typeof t.type=="string"&&y in t.props){let e=t.props[y];typeof e=="boolean"&&(t.props[y]=String(e))}ie?.(t)};function k(t,e){let r=JSON.parse(t);if(!Array.isArray(r))return N([],[],r,e);let i=new Array(r.length);return N(r,i,0,e),i[0]}function N(t,e,r,i){switch(r){case-1:return;case-2:return null;case-3:return NaN;case-4:return 1/0;case-5:return-1/0;case-6:return-0}if(r in e)return e[r];let n=t[r];if(typeof n=="number")return e[r]=n;if(typeof n=="string"||typeof n=="boolean"||n===null)return e[r]=n;if(Array.isArray(n))if(n.length>0&&typeof n[0]=="string"){let o=n[0];if(i!==void 0&&o in i){let s=i[o],a=n[1],p=N(t,e,a,i);return e[r]=s(p)}switch(o){case"BigInt":return e[r]=BigInt(n[1]);case"Date":return e[r]=new Date(n[1]);case"RegExp":return e[r]=new RegExp(n[1],n[2]);case"Set":{let s=new Set;for(let a=0;a<n[1].length;a++){let p=n[1][a];s.add(N(t,e,p,i))}return e[r]=s}case"Map":{let s=new Map;for(let a=0;a<n[1].length;a++){let p=n[1][a++],c=N(t,e,p,i),l=n[1][a],u=N(t,e,l,i);s.set(c,u)}return e[r]=s}case"Uint8Array":return e[r]=me(n[1])}}else{let o=new Array(n.length);e[r]=o;for(let s=0;s<n.length;s++){let a=n[s];a!==-7&&(o[s]=N(t,e,a,i))}return o}else if(typeof n=="object"){let o={};e[r]=o;let s=Object.keys(n);for(let a=0;a<s.length;a++){let p=s[a],c=n[p];o[p]=N(t,e,c,i)}return o}}function me(t){let e=atob(t),r=e.length,i=new Uint8Array(r);for(let n=0;n<r;n++)i[n]=e.charCodeAt(n);return i}var Q=Symbol.for("_FRESH_SLOT");function ge(t){return t!==null&&typeof t=="object"&&"kind"in t&&t.kind===Q}var R=new Map,C=class extends K{componentDidMount(){R.set(this.props.name,this)}render(){return this.props.children}};C.displayName="Partial";function Y(t,e,r,i,n){let o=()=>{for(let s in t){let a=t[s];if(ge(a)){let p=i.get(a.id);if(p!==void 0){let c=h(T,null),l=D(r,p.start,p.end);b(n,[c],[2],l,p.end),t[s]=c}else{let c=document.querySelector(`#frsh-${a.id}-${a.name}`);if(c!==null){let l=h(T,null);b(n,[l],[2],c.content,null),t[s]=l}}}}$(h(e,t),r)};"scheduler"in window?scheduler.postTask(o):setTimeout(o,0)}var x=new Map,B={Signal:t=>W(t),Slot:t=>({kind:Q,name:t.name,id:t.id})};function ye(){return{roots:[],stack:[],slots:new Map,slotIdStack:[]}}function Ne(t,e){let r=ye();te(r,document.body);let i=Object.keys(t);for(let o=0;o<i.length;o++){let s=i[o];x.set(s,t[s])}let n=k(e,B);for(let o=0;o<r.roots.length;o++){let s=r.roots[o],a=D(s.start.parentNode,s.start,s.end);if(s.kind===0){let p=n[s.propsIdx].props,c=x.get(s.name);Y(p,c,a,r.slots,n)}else if(s.kind===1){let p={name:s.name,children:null},c=h(T,null);b(n,[c],[1],a,s.end),p.children=c.props.children,Y(p,C,a,r.slots,n)}}}var ee=!1;function Z(t){return t.nodeType===Node.TEXT_NODE&&typeof t._frshMarker=="string"}function g(t){if(ee)return t;let e=new Text("");return e._frshMarker=t.data,t.parentNode.insertBefore(e,t),t.remove(),e}function te(t,e){if(v(e)){if(e.nodeName==="SCRIPT"||e.nodeName==="STYLE"||t.slotIdStack.length>0)return;for(let r=0;r<e.childNodes.length;r++){let i=e.childNodes[r];te(t,i)}}else if(M(e)){let r=e.data;if(r.startsWith("frsh:")){e=g(e);let i=r.split(":"),n=i[1];if(n==="island"){let o=i[2],s=i[3],a=i[4],p={kind:0,name:o,propsIdx:Number(s),key:a===""?null:a,start:e,end:null};t.stack.length===0&&t.roots.push(p),t.stack.push(p)}else if(n==="slot"){let o=+i[2],s=i[3];t.slotIdStack.push(o),t.slots.set(o,{name:s,start:e,end:null})}else if(n==="partial"){let o=i[2],s=i[3],a={kind:1,name:o,key:s===""?null:s,start:e,end:null};t.stack.length===0&&t.roots.push(a),t.stack.push(a)}}else if(r==="/frsh:island"||r==="/frsh:partial"){e=g(e);let i=t.stack.pop();i!==void 0&&(i.end=e)}else if(r==="/frsh:slot"){e=g(e);let i=t.slotIdStack.pop();i!==void 0&&(t.slots.get(i).end=e)}}}function Te(t){return t.children}function b(t,e,r,i,n){let o=i;for(;o!==null;){if(o===n)return;if(o._frshRootFrag||o instanceof DocumentFragment){let s=o.firstChild;s!==null&&b(t,e,r,s,n)}else if(v(o)){let s={};for(let u=0;u<o.attributes.length;u++){let f=o.attributes[u];if(f.nodeName===z){s.key=f.nodeValue;continue}s[f.nodeName]=typeof o[f.nodeName]=="boolean"?!0:f.nodeValue}let a=h(o.localName,s),p=r.at(-1),c=p===2||p===1;c&&(A(e.at(-1),a),e.push(a));let l=o.firstChild;l!==null&&b(t,e,r,l,n),c&&e.pop()}else if(M(o)||Z(o)){let s=Z(o)?o._frshMarker:o.data;if(s.startsWith("frsh:")){let a=s.split(":"),p=a[1];if(p==="island"){o=g(o),r.push(0);let c=a[2],l=a[3],u=a[4],f=x.get(c);if(f===void 0)throw new Error(`Encountered unknown island: ${c}`);let d=t[+l].props;d.key=u===""?void 0:u;let m=h(f,d);A(e.at(-1),m),e.push(m)}else if(p==="slot"){o=g(o),r.push(2);let c=+a[2],l=a[3],u=a[4],f=h(Te,{key:u===""?void 0:u,id:c,name:l,children:[]}),d=e.at(-1);d.props[l]=f,e.push(f)}else if(p==="partial"){o=g(o),r.push(1);let c=a[2],l=+a[3],u=a[4],f=h(C,{name:c,key:u===""?void 0:u,mode:l}),d=e.at(-1);if(d!==void 0&&A(d,f),l===1){let m=R.get(c);if(m!==void 0){S(f.props,m.props.children);let E=h(T,null);A(f,E),f=E}}else if(l===2){let m=R.get(c);if(m!==void 0){S(f.props,m.props.children);let E=h(T,null);f.props.children||(f.props.children=[]),f.props.children.unshift(E),f=E}}e.push(f)}else if(p==="key"){if(!ee){let l=o;o=o.nextSibling,l.remove()}let c=h(T,{key:a[2]});A(e.at(-1),c),e.push(c);continue}}else s==="/frsh:island"||s==="/frsh:slot"||s==="/frsh:partial"?(e.pop(),r.pop(),o=g(o)):s==="/frsh:key"&&(e.pop(),o=g(o))}else if(Re(o)){let s=r.at(-1);(s===2||s===1)&&A(e.at(-1),o.data)}o=o.nextSibling}}function A(t,e){t.props.children||(t.props.children=[]),t.props.children.push(e)}function S(t,e){t.children=e!=null?Array.isArray(e)?e:[e]:[]}function M(t){return t.nodeType===Node.COMMENT_NODE}function Re(t){return t.nodeType===Node.TEXT_NODE}function v(t){return t.nodeType===Node.ELEMENT_NODE&&!("_frshRootFrag"in t)}function D(t,e,r){let i={_frshRootFrag:!0,nodeType:1,parentNode:t,nextSibling:null,get firstChild(){let n=e.nextSibling;return n===r?null:n},get childNodes(){let n=[],o=e.nextSibling;for(;o!==null&&o!==r;)n.push(o),o=o.nextSibling;return n},insertBefore(n,o){t.insertBefore(n,o??r)},appendChild(n){t.insertBefore(n,r)},removeChild(n){t.removeChild(n)},contains(n){if(n===null)return!1;let o=i.childNodes;for(let s=0;s<o.length;s++)if(o[s].contains(n))return!0;return!1}};return i}var U="/_frsh",Fe=`${U}/error_overlay`,Oe=`${U}/alive`;var H="f-partial",Ce="fresh-partial",F=class extends Error{};function O(t){let e=t.closest(`[${y}]`);return e===null?!1:e.getAttribute(y)!=="false"}var P=history.state?.index||0;if(!history.state){let t={index:P,scrollX,scrollY};history.replaceState(t,document.title)}function ne(t){if(t.href!==globalThis.location.href){let e={index:P,scrollX:globalThis.scrollX,scrollY:globalThis.scrollY};history.replaceState({...e},"",location.href),P++,e.scrollX=0,e.scrollY=0,history.pushState(e,"",t.href)}}document.addEventListener("click",async t=>{let e=t.target;if(e&&(e instanceof HTMLElement||e instanceof SVGElement)){let r=e;if(e.nodeName!=="A"&&(e=e.closest("a")),e===null&&(e=r.closest("button")),e&&e instanceof HTMLAnchorElement&&e.href&&(!e.target||e.target==="_self")&&e.origin===location.origin&&t.button===0&&!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button)&&!t.defaultPrevented){let i=e.getAttribute(H);if(e.getAttribute("href")?.startsWith("#")||!O(e))return;let n=e._freshIndicator;n!==void 0&&(n.value=!0),t.preventDefault();let o=new URL(e.href);try{ne(o);let s=new URL(i||o.href,location.href);await V(o,s),re(o),scrollTo({left:0,top:0,behavior:"instant"})}finally{n!==void 0&&(n.value=!1)}}else if(e&&e instanceof HTMLButtonElement&&(e.type!=="submit"||e.form===null)){let i=e.getAttribute(H);if(i===null||!O(e))return;let n=new URL(i,location.href);await V(n,n)}}});addEventListener("popstate",async t=>{if(t.state===null){history.scrollRestoration&&(history.scrollRestoration="auto");return}let e=history.state;P=e.index??P+1;let i=document.querySelector(`[${y}]`);if(i===null||i.getAttribute(y)==="false"){location.reload();return}history.scrollRestoration&&(history.scrollRestoration="manual");let n=new URL(location.href,location.origin);try{await V(n,n),re(n),scrollTo({left:e.scrollX??0,top:e.scrollY??0,behavior:"instant"})}catch(o){if(o instanceof F){location.reload();return}throw o}});document.addEventListener("submit",async t=>{let e=t.target;if(e!==null&&e instanceof HTMLFormElement&&!t.defaultPrevented){if(!O(e)||t.submitter!==null&&!O(t.submitter))return;let r=t.submitter?.getAttribute("formmethod")?.toLowerCase()??e.method.toLowerCase();if(r!=="get"&&r!=="post")return;let i=t.submitter?.getAttribute(H)??t.submitter?.getAttribute("formaction")??e.getAttribute(H)??e.action,n=t.submitter?.getAttribute("formaction")??e.action;if(i!==""){t.preventDefault();let o=new URL(i,location.href),s=new URL(n,location.href),a;r==="get"?new URLSearchParams(new FormData(e,t.submitter)).forEach((c,l)=>o.searchParams.append(l,c)):a={body:new FormData(e,t.submitter),method:r},await V(s,o,a)}}});function re(t){document.querySelectorAll("a").forEach(e=>{let r=j(t.pathname,e.href);r===2?(e.setAttribute(w,"true"),e.setAttribute("aria-current","page"),e.removeAttribute(I)):r===1?(e.setAttribute(I,"true"),e.setAttribute("aria-current","true"),e.removeAttribute(w)):(e.removeAttribute(w),e.removeAttribute(I),e.removeAttribute("aria-current"))})}async function V(t,e,r={}){r.redirect="follow",e=new URL(e),e.searchParams.set(Ce,"true");let i=await fetch(e,r);if(i.redirected){let n=new URL(i.url);n.origin===t.origin&&(t=n)}ne(t),await be(i)}async function be(t){if(t.headers.get("Content-Type")!=="text/html; charset=utf-8")throw new Error("Unable to process partial response.");let r=t.headers.get("X-Fresh-Id"),i=await t.text(),n=new DOMParser().parseFromString(i,"text/html"),o=n.querySelector(`#__FRSH_STATE_${r}`),s=[];if(o!==null){let p=JSON.parse(o.textContent),c=[];s=k(p.props,B);for(let l=0;l<p.islands.length;l++){let u=p.islands[l];c.push(import(u.chunk).then(f=>{x.set(u.name,f[u.exportName])}))}await Promise.all(c)}let a={foundPartials:0};if(n.title&&(document.title=n.title),Array.from(n.head.childNodes).forEach(p=>{let c=p;if(c.nodeName!=="TITLE"){if(c.nodeName==="META"){let l=c;if(l.hasAttribute("charset"))return;let u=l.name;if(u!==""){let f=document.head.querySelector(`meta[name="${u}"]`);f!==null?f.content!==l.content&&(f.content=l.content):document.head.appendChild(l)}else{let f=c.getAttribute("property"),d=document.head.querySelector(`meta[property="${f}"]`);d!==null?d.content!==l.content&&(d.content=l.content):document.head.appendChild(l)}}else if(c.nodeName==="LINK"){let l=c;if(l.rel==="modulepreload")return;l.rel==="stylesheet"&&Array.from(document.head.querySelectorAll("link")).find(f=>f.href===l.href)===void 0&&document.head.appendChild(l)}else if(c.nodeName==="SCRIPT"){if(c.src===`${U}/fresh-runtime.js`)return}else if(c.nodeName==="STYLE"){let l=c;l.id===""&&document.head.appendChild(l)}}}),oe(a,s,n.body),a.foundPartials===0)throw new F(`Found no partials in HTML response. Please make sure to render at least one partial. Requested url: ${t.url}`)}function oe(t,e,r){let i=null,n=r.firstChild,o=0,s="",a="",p=0;for(;n!==null;){if(M(n)){let c=n.data,l=c.split(":");if(l[0]==="frsh"&&(n=g(n)),l[0]==="frsh"&&l[1]==="partial")++o===1&&(i=n,s=l[2],p=+l[3],a=l[4]);else if(c==="/frsh:partial"){if(t.foundPartials++,--o>0){n=n.nextSibling;continue}let u=D(r,i,n),f=h(C,{key:a!==""?a:void 0,name:s,mode:p,children:null});b(e,[f],[1],u,n);let d=R.get(s);if(d===void 0)console.warn(`Partial "${s}" not found. Skipping...`);else{if(p===0)d.props.children=f.props.children;else if(p===1){let m=R.get(s);m!==void 0?(S(d.props,m.props.children),d.props.children.push(f.props.children)):d.props.children=f.props.children}else if(p===2){let m=R.get(s);m!==void 0?(S(d.props,m.props.children),d.props.children.unshift(f.props.children)):d.props.children=f.props.children}d.setState({})}}}else o===0&&v(n)&&oe(t,e,n);n=n.nextSibling}}var Ae=typeof document<"u";function Ee(t){return L(t,_)}function se(t){return t.children}se.displayName="Partial";export{Ae as IS_BROWSER,se as Partial,Ee as asset,Ne as boot,Y as revive};
