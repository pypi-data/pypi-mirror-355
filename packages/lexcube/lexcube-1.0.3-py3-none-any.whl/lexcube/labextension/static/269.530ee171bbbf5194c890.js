(()=>{"use strict";var e={8269:()=>{class e{constructor(e,t,n,r){this.binCount=t,this.minValue=n.reduce(((t,n,r)=>r%3==e?Math.min(t,n):t),1/0),this.maxValue=n.reduce(((t,n,r)=>r%3==e?Math.max(t,n):t),-1/0)+1e-4,this.binSize=(this.maxValue-this.minValue)/this.binCount,this.tree=new Array(this.binCount).fill(0).map((()=>[])),this.construct(e,r,n)}static fromObject(t){const n=Object.create(e.prototype);return Object.assign(n,t)}construct(e,t,n){for(let r=0;r<t.length;r+=2){const o=3*t[r],i=3*t[r+1],s=Math.floor((n[o+e]-this.minValue)/this.binSize),a=Math.floor((n[i+e]-this.minValue)/this.binSize),c=Math.min(s,a),u=Math.max(s,a);for(let e=c;e<=u;e++)this.tree[e].push(o/3,i/3)}}getAllIndicesAtValue(e){const t=Math.floor((e-this.minValue)/this.binSize);return this.tree[t]||[]}}const t=e,n=Symbol("Comlink.proxy"),r=Symbol("Comlink.endpoint"),o=Symbol("Comlink.releaseProxy"),i=Symbol("Comlink.finalizer"),s=Symbol("Comlink.thrown"),a=e=>"object"==typeof e&&null!==e||"function"==typeof e,c={canHandle:e=>a(e)&&e[n],serialize(e){const{port1:t,port2:n}=new MessageChannel;return l(e,t),[n,[n]]},deserialize:e=>(e.start(),function(e,t){const n=new Map;return e.addEventListener("message",(function(e){const{data:t}=e;if(!t||!t.id)return;const r=n.get(t.id);if(r)try{r(t)}finally{n.delete(t.id)}})),y(e,n,[],void 0)}(e))},u=new Map([["proxy",c],["throw",{canHandle:e=>a(e)&&s in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function l(e,t=globalThis,r=["*"]){t.addEventListener("message",(function o(a){if(!a||!a.data)return;if(!function(e,t){for(const n of e){if(t===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(t))return!0}return!1}(r,a.origin))return void console.warn(`Invalid origin '${a.origin}' for comlink proxy`);const{id:c,type:u,path:f}=Object.assign({path:[]},a.data),p=(a.data.argumentList||[]).map(S);let g;try{const t=f.slice(0,-1).reduce(((e,t)=>e[t]),e),r=f.reduce(((e,t)=>e[t]),e);switch(u){case"GET":g=r;break;case"SET":t[f.slice(-1)[0]]=S(a.data.value),g=!0;break;case"APPLY":g=r.apply(t,p);break;case"CONSTRUCT":g=function(e){return Object.assign(e,{[n]:!0})}(new r(...p));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;l(e,n),g=function(e,t){return v.set(e,t),e}(t,[t])}break;case"RELEASE":g=void 0;break;default:return}}catch(e){g={value:e,[s]:0}}Promise.resolve(g).catch((e=>({value:e,[s]:0}))).then((n=>{const[r,s]=b(n);t.postMessage(Object.assign(Object.assign({},r),{id:c}),s),"RELEASE"===u&&(t.removeEventListener("message",o),h(t),i in e&&"function"==typeof e[i]&&e[i]())})).catch((e=>{const[n,r]=b({value:new TypeError("Unserializable return value"),[s]:0});t.postMessage(Object.assign(Object.assign({},n),{id:c}),r)}))})),t.start&&t.start()}function h(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function f(e){if(e)throw new Error("Proxy has been released and is not useable")}function p(e){return w(e,new Map,{type:"RELEASE"}).then((()=>{h(e)}))}const g=new WeakMap,m="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(g.get(e)||0)-1;g.set(e,t),0===t&&p(e)}));function y(e,t,n=[],i=function(){}){let s=!1;const a=new Proxy(i,{get(r,i){if(f(s),i===o)return()=>{!function(e){m&&m.unregister(e)}(a),p(e),t.clear(),s=!0};if("then"===i){if(0===n.length)return{then:()=>a};const r=w(e,t,{type:"GET",path:n.map((e=>e.toString()))}).then(S);return r.then.bind(r)}return y(e,t,[...n,i])},set(r,o,i){f(s);const[a,c]=b(i);return w(e,t,{type:"SET",path:[...n,o].map((e=>e.toString())),value:a},c).then(S)},apply(o,i,a){f(s);const c=n[n.length-1];if(c===r)return w(e,t,{type:"ENDPOINT"}).then(S);if("bind"===c)return y(e,t,n.slice(0,-1));const[u,l]=d(a);return w(e,t,{type:"APPLY",path:n.map((e=>e.toString())),argumentList:u},l).then(S)},construct(r,o){f(s);const[i,a]=d(o);return w(e,t,{type:"CONSTRUCT",path:n.map((e=>e.toString())),argumentList:i},a).then(S)}});return function(e,t){const n=(g.get(t)||0)+1;g.set(t,n),m&&m.register(e,t,e)}(a,e),a}function d(e){const t=e.map(b);return[t.map((e=>e[0])),(n=t.map((e=>e[1])),Array.prototype.concat.apply([],n))];var n}const v=new WeakMap;function b(e){for(const[t,n]of u)if(n.canHandle(e)){const[r,o]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},o]}return[{type:"RAW",value:e},v.get(e)||[]]}function S(e){switch(e.type){case"HANDLER":return u.get(e.name).deserialize(e.value);case"RAW":return e.value}}function w(e,t,n,r){return new Promise((o=>{const i=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.set(i,o),e.start&&e.start(),e.postMessage(Object.assign({id:i},n),r)}))}l({parseGeoJSON:(e,n)=>{return r=void 0,o=void 0,s=function*(){if(null==e)throw new Error("GeoJSON or URL is required");if(e instanceof String||"string"==typeof e)if(e.startsWith("http")||e.startsWith("/")){const t=yield fetch(e);e=yield t.json()}else e=JSON.parse(e);const r=[],o=[];let i=0,s=0;const a={},c={},u=(e,t)=>{const n=`${e}-${t}`,r=a[n];return void 0!==r?r:(a[n]=o.length/3,o.push(0,t,-e),o.length/3-1)},l=(e,t)=>{const n=`${Math.min(e,t)}-${Math.max(e,t)}`,o=c[n];if(void 0!==o)return o;c[n]=r.length/2,r.push(e,t)},h=e=>{let t=0;for(let n=0;n<=e.length;n++){const r=e[n%e.length],o=r[0],i=r[1],s=u(o,i);n>0&&l(s,t),t=s}i+=1},f=e=>{const t=e[0],n=e[1],i=.001;o.push(0,n,-t+i),o.push(0,n+i,-t),o.push(0,n,-t-i),o.push(0,n-i,-t);const s=r.length/2;r.push(s,s+1),r.push(s+1,s+2),r.push(s+2,s+3),r.push(s+3,s)},p=e=>{for(let t=0;t<e.length-1;t++){const n=e[t],i=e[t+1],s=n[0],a=n[1],c=i[0],u=i[1];o.push(0,a,-s),o.push(0,u,-c);const l=r.length/2;r.push(l,l+1)}};for(let t of e.features)if("MultiPolygon"==t.geometry.type)for(let e of t.geometry.coordinates)for(let t of e)h(t);else if("Polygon"==t.geometry.type)h(t.geometry.coordinates[0]);else if("Point"==t.geometry.type)f(t.geometry.coordinates);else if("MultiPoint"==t.geometry.type)for(let e of t.geometry.coordinates)f(e);else if("MultiLineString"==t.geometry.type)for(let e of t.geometry.coordinates)p(e);else"LineString"==t.geometry.type?p(t.geometry.coordinates):s+=1;const g=new t(2,n,o,r),m=new t(1,n,o,r);return{indices:r,positions:o,lineSegmentMapY:m,lineSegmentMapZ:g}},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,a)}c((s=s.apply(r,o||[])).next())}));var r,o,i,s}})}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.c=t,n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{n.S={};var e={},t={};n.I=(r,o)=>{o||(o=[]);var i=t[r];if(i||(i=t[r]={}),!(o.indexOf(i)>=0)){if(o.push(i),e[r])return e[r];n.o(n.S,r)||(n.S[r]={}),n.S[r];var s=[];return e[r]=s.length?Promise.all(s).then((()=>e[r]=1)):1}}})(),n(8269)})();