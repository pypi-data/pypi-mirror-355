<!doctype html><html><head><title>{{title}}</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0,viewport-fit=cove"><meta http-equiv="X-UA-Compatible" content="IE=edge">{{contentrefresh|safe}}
<link rel="icon"  href="/static/smartui/img/favicon.ico"><link rel="stylesheet" href="/static/smartchart/js/fun.css?_=1"><script src="/static/smartchart/js/jquery-2.2.3.min.js"></script>
{% if devhead %}<link rel="stylesheet" href="/static/smartchart/js/dev.css?_=3.1"><link rel="stylesheet" href="/static/smartchart/icon/iconfont.css?_=2"><link rel="stylesheet" href="/static/smartchart/editor/modal.css">{% endif %}
<script src="/static/smartui/js/vue.min.js"></script><link rel="stylesheet" href="/static/smartui/elementui/theme-chalk/index.css"><script src="/static/smartui/elementui/index.js"></script><link rel="stylesheet" href="/static/smartchart/js/crud.css?_=2.3">
{% block head %}{% endblock %}</head>
{% autoescape off %}{{linkhead}}{{devhead}}{% block body %}
<body><vue id="vue_app" v-loading.fullscreen.lock="!startRender">{% for div in div_list %}{{div}}{% endfor %}<vue id="crud_body" :class="smtdrag?'smtdrag':''"> {% block body_search %}<div class="search_base_div" v-if="searchHead" ><div class="search_div"><div style="display:flex;" v-if="startRender" id="partSearch1"></div></div></div>{% endblock %}{% block body_addHead %}<div class="search_base_div" v-if="addHead&&modifyFlag===0&&Object.keys(form).length>0"><div class="search_div"><div style="display:flex;" v-if="startRender"><el-form ref="form" :model="form" :rules="rules" :label-width="formLabelWidth" :inline="true" size="mini" id="modifyForm1"></el-form></div></div></div>{% endblock %}{% block body_extHead %}<div class="search_base_div" v-if="statistic_id"><div class="search_div"><div style="display:flex;" v-if="startRender"><el-statistic v-for="(value, key) in statistic" :title='key'><template slot="formatter">{[value]}</template></el-statistic></div></div></div>{% endblock %} <div class="body_base_div"><div class="body_div" v-if="startRender"><div class="filter_base_div"><div class="filter_div"><span class="ttitle">{[title]}</span><div> {% block body_filter %}<template v-if="!searchHead" id="partSearch2"></template>{% endblock %} <template id="partFilter"></template></div></div></div><div class="table_base_div" v-if="showTable"> {% block body_tree %} <div class="tree_div" v-if="tree_ds" :style="'width:'+treeWidth"><el-tree :data="tree_data" @node-click="handleNodeClick"></el-tree></div> {% endblock %} <div class="table_div" :style="'width:'+tableWidth"> {% block body_table %} <el-table id="printTable" :data="tableData" size="mini" :header-cell-style="{background: tableHeaderColor}" :header-cell-class-name="tableHearderClassName" :row-class-name="tableRowClassName" :stripe="stripe" :show-summary="showSummary" :summary-method="getSummaries" border ref="multipleTable" :span-method="spanMethod" :max-height="maxheight" highlight-current-row @current-change="handleRowClickChange" @selection-change="handleSelectionChange" lazy :row-key="tree_id?'treeid':''" :load="loadTree" style="width: 100%;"><el-table-column type="expand" v-if="shortTableFields" id="partShort"></el-table-column><el-table-column type="index" v-if="showIndex" width="50"></el-table-column><el-table-column type="selection" width="55" v-if="actionDict" key="1"></el-table-column> {% block body_table_columns %} <el-table-column v-for="item in (shortTableFields||tableFields||tableHead)" :label="nameDict[item]||item" :width="widthDict[item]" :align="alignDict[item]||'center'" :prop="item" :key="item" :sortable="!mergeFields" show-overflow-tooltip :fixed="fixedFields.includes(item)"><template slot="header" v-if="tooltipDict[item]"><el-tooltip effect="light" :content="tooltipDict[item]" placement="top"><span>{[nameDict[item]||item]}<i class="el-icon-info"></i></span></el-tooltip></template><template slot-scope="scope" v-if="scope.row[item]"><span v-if="tagFields.includes(item)"><el-tag v-for="v in scope.row[item].split(',')" :color="statusColor[v]" style="color:black" disable-transitions>{[v]}</el-tag></span><el-image v-else-if="typeDict[item]==='img'" :src="construct_img(scope.row[item])" :preview-src-list="[construct_img(scope.row[item])]" lazy></el-image><el-link v-else-if="typeDict[item]==='file'" type="success" :href="construct_img(scope.row[item])" target="_blank">{[scope.row[item]]}</el-link><el-switch v-else-if="typeDict[item]==='switch'" v-model="scope.row[item]" disabled :active-value=1 :inactive-value=0></el-switch><el-progress v-else-if="typeDict[item]==='progress'" :percentage="scope.row[item]"></el-progress><span v-else-if="typeDict[item]==='color'" class="el-icon-info" :style="'color:'+scope.row[item]"></span><el-rate v-else-if="typeDict[item]==='rate'" :value="scope.row[item]" disabled></el-rate> {% block body_table_column %}{% endblock %} <span v-else>{[ scope.row[item]]}</span></template></el-table-column> {% endblock %} <el-table-column :fixed="actionFixed?'right':null" :label="nameDict.操作||'操作'" :width="widthDict.操作||80" v-if="btnEdit||btnRequest||btnView||delete_id" key="2"><template slot="header" v-if="tooltipDict.操作"><el-tooltip effect="light" :content="tooltipDict.操作" placement="top"><span>{[ nameDict.操作||'操作']} <i class="el-icon-info"></i></span></el-tooltip></template><template slot-scope="scope"><el-button type="text" size="mini" icon="el-icon-edit-outline" @click.stop="handleRequestClick(scope.row)" v-if="btnRequest"></el-button><el-button type="text" size="mini" icon="el-icon-edit" @click.stop="handleEditClick(scope.row)" v-if="btnEdit"></el-button><el-button type="text" size="mini" icon="el-icon-view" @click.stop="handleViewClick(scope.row)" v-if="btnView"></el-button><el-button type="text" size="mini" :icon="k" @click.stop="handleViewClick(scope.row,v)" v-for="(v, k) in viewDsDict"></el-button><el-popconfirm title="确认删除?" @confirm='handleDeleteClick(scope.row)' v-if="delete_id"><el-button type="text" size="mini" icon="el-icon-delete" slot="reference"></el-button></el-popconfirm> {% block body_table_column_button %}{% endblock %} </template></el-table-column></el-table><el-pagination :page-sizes="pageSizes" align='center' v-if="pageSize<9999" @size-change="handlerSizeChange" @current-change="handlerCurrentChange" :current-page="currentPage" :page-size="pageSize" layout="total,sizes,prev,pager,next,jumper" :total="total"></el-pagination> {% endblock %} </div></div></div></div></vue> {% block dialog_modify %}<el-dialog :title="title" :visible.sync="dialogFormVisible" :width="dialogWidth" :fullscreen="dialogFull" center id="modifyForm2"></el-dialog>{% endblock %} {% block dialog_card %}<el-dialog :visible.sync="dialogTableVisible" :width="dialogWidth" id="partCard"></el-dialog>{% endblock %}<el-dialog title="扫码" :visible.sync="qrVisible" width="50%" :destroy-on-close="true" :modal="false"><qrcode-stream v-if="qrVisible" @decode="qrDecode" :track="qrTrack"></qrcode-stream></el-dialog> {% block dialog_request %}<el-dialog :title="title+':变更需求'" :visible.sync="dialogFormVisible_r" :width="dialogWidth" id="partRequest"></el-dialog>{% endblock %} {% if devhead %}<el-drawer title="CRUD设定" :visible.sync="dialogSetupVisible" direction="btt" :with-header="false" v-if="startRender" :modal="false" id="partSetup"></el-drawer>{% endif %}</vue></body>
{% endblock %}{% endautoescape %}
</html><script>const dashid={{ dashid }};const dsDict={{ dsdict|safe }};</script><script src="/static/smartchart/js/flexible.min.js"></script><script src="/static/smartchart/js/fun.js?_=6.5"></script>
{{footer|safe}}<script src="/static/smartchart/opt/smt_crud.js?_=2.7"></script>{% block javascript %}{% endblock %}{% if devhead %}<script src="/static/smartchart/js/cruddev.js?_=2.3"></script><script src="/static/smartchart/js/dev.js?_=8.5"></script>{% endif %}
<script>vapp.loadchart();var charts=[];{{echart_main|safe}}window.onresize = function(){for(let i = 0; i < charts.length; i++){charts[i].resize();}};</script>
{% block footer %}{% endblock %}<script>vapp.refreshTable();vapp.transfer_config();vapp.startRender=true;</script>
<!--powered by smartchart.cn,Designed by JohnYan mailto:84345999@qq.com, https://gitee.com/smartchart/smartchart you need keep this-->