(()=>{var e={};e.id=329,e.ids=[329],e.modules={334:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var a=r(20863),s=r(38832),n=r(39682),o=r.n(n),i=r(11461),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d={children:["",{children:["datasets",{children:["[dataset_id]",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,87557)),"/Users/hanch/fal/lavender-data/ui/src/app/datasets/[dataset_id]/settings/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,37374)),"/Users/hanch/fal/lavender-data/ui/src/app/datasets/[dataset_id]/layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,14127)),"/Users/hanch/fal/lavender-data/ui/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,58206,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,63447,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,94716,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/hanch/fal/lavender-data/ui/src/app/datasets/[dataset_id]/settings/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/datasets/[dataset_id]/settings/page",pathname:"/datasets/[dataset_id]/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3949:(e,t,r)=>{"use strict";r.d(t,{PreprocessDatasetDialog:()=>er});var a=r(40871),s=r(65138),n=r(22384),o=r(15376),i=r(24983),l=r(21895),d=r(13804),c=r(33094),u=r(26123),p=r(10839),m=r(68491),h=r(17141),x=r(8041),f=r(68036),g=r(21228);let v=(0,g.A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var b=r(20574);let j=(0,g.A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var y=r(75908);function w({...e}){return(0,a.jsx)(f.Root,{"data-slot":"select",...e})}function N({...e}){return(0,a.jsx)(f.Value,{"data-slot":"select-value",...e})}function _({className:e,children:t,...r}){return(0,a.jsxs)(f.Trigger,{"data-slot":"select-trigger",className:(0,y.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[t,(0,a.jsx)(f.Icon,{asChild:!0,children:(0,a.jsx)(v,{className:"size-4 opacity-50"})})]})}function C({className:e,children:t,position:r="popper",...s}){return(0,a.jsx)(f.Portal,{children:(0,a.jsxs)(f.Content,{"data-slot":"select-content",className:(0,y.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[(0,a.jsx)(D,{}),(0,a.jsx)(f.Viewport,{className:(0,y.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(S,{})]})})}function k({className:e,children:t,...r}){return(0,a.jsxs)(f.Item,{"data-slot":"select-item",className:(0,y.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...r,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(f.ItemIndicator,{children:(0,a.jsx)(b.A,{className:"size-4"})})}),(0,a.jsx)(f.ItemText,{children:t})]})}function D({className:e,...t}){return(0,a.jsx)(f.ScrollUpButton,{"data-slot":"select-scroll-up-button",className:(0,y.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(j,{className:"size-4"})})}function S({className:e,...t}){return(0,a.jsx)(f.ScrollDownButton,{"data-slot":"select-scroll-down-button",className:(0,y.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(v,{className:"size-4"})})}var A=r(36931);let z=(0,A.createServerReference)("7f4052b267bb5efd1dc039fdf5d8f939a60810030b",A.callServer,void 0,A.findSourceMapURL,"preprocessDataset");var R=r(14343),P=r(47231),E=r(27642),I=r(19654),O=r(63354),U=r(84055),L=r(2104),$="Checkbox",[F,T]=(0,P.A)($),[q,G]=F($);function M(e){let{__scopeCheckbox:t,checked:r,children:n,defaultChecked:o,disabled:i,form:l,name:d,onCheckedChange:c,required:u,value:p="on",internal_do_not_use_render:m}=e,[h,x]=(0,I.i)({prop:r,defaultProp:o??!1,onChange:c,caller:$}),[f,g]=s.useState(null),[v,b]=s.useState(null),j=s.useRef(!1),y=!f||!!l||!!f.closest("form"),w={checked:h,disabled:i,setChecked:x,control:f,setControl:g,name:d,form:l,value:p,hasConsumerStoppedPropagationRef:j,required:u,defaultChecked:!X(o)&&o,isFormControl:y,bubbleInput:v,setBubbleInput:b};return(0,a.jsx)(q,{scope:t,...w,children:"function"==typeof m?m(w):n})}var J="CheckboxTrigger",B=s.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},o)=>{let{control:i,value:l,disabled:d,checked:c,required:u,setControl:p,setChecked:m,hasConsumerStoppedPropagationRef:h,isFormControl:x,bubbleInput:f}=G(J,e),g=(0,R.s)(o,p),v=s.useRef(c);return s.useEffect(()=>{let e=i?.form;if(e){let t=()=>m(v.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[i,m]),(0,a.jsx)(L.sG.button,{type:"button",role:"checkbox","aria-checked":X(c)?"mixed":c,"aria-required":u,"data-state":Y(c),"data-disabled":d?"":void 0,disabled:d,value:l,...n,ref:g,onKeyDown:(0,E.m)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,E.m)(r,e=>{m(e=>!!X(e)||!e),f&&x&&(h.current=e.isPropagationStopped(),h.current||e.stopPropagation())})})});B.displayName=J;var V=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:s,checked:n,defaultChecked:o,required:i,disabled:l,value:d,onCheckedChange:c,form:u,...p}=e;return(0,a.jsx)(M,{__scopeCheckbox:r,checked:n,defaultChecked:o,disabled:l,required:i,onCheckedChange:c,name:s,form:u,value:d,internal_do_not_use_render:({isFormControl:e})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B,{...p,ref:t,__scopeCheckbox:r}),e&&(0,a.jsx)(W,{__scopeCheckbox:r})]})})});V.displayName=$;var K="CheckboxIndicator",Z=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:s,...n}=e,o=G(K,r);return(0,a.jsx)(U.C,{present:s||X(o.checked)||!0===o.checked,children:(0,a.jsx)(L.sG.span,{"data-state":Y(o.checked),"data-disabled":o.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});Z.displayName=K;var H="CheckboxBubbleInput",W=s.forwardRef(({__scopeCheckbox:e,...t},r)=>{let{control:n,hasConsumerStoppedPropagationRef:o,checked:i,defaultChecked:l,required:d,disabled:c,name:u,value:p,form:m,bubbleInput:h,setBubbleInput:x}=G(H,e),f=(0,R.s)(r,x),g=function(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(i),v=(0,O.X)(n);s.useEffect(()=>{if(!h)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!o.current;if(g!==i&&e){let r=new Event("click",{bubbles:t});h.indeterminate=X(i),e.call(h,!X(i)&&i),h.dispatchEvent(r)}},[h,g,i,o]);let b=s.useRef(!X(i)&&i);return(0,a.jsx)(L.sG.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??b.current,required:d,disabled:c,name:u,value:p,form:m,...t,tabIndex:-1,ref:f,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function X(e){return"indeterminate"===e}function Y(e){return X(e)?"indeterminate":e?"checked":"unchecked"}function Q({className:e,...t}){return(0,a.jsx)(V,{"data-slot":"checkbox",className:(0,y.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,a.jsx)(Z,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,a.jsx)(b.A,{className:"size-3.5"})})})}function ee(){let{pending:e}=(0,l.useFormStatus)();return(0,a.jsx)(u.$,{type:"submit",disabled:e,children:e?"Saving...":"Save"})}function et({index:e,preprocessors:t,preprocessorInputs:r,setPreprocessorInputs:s}){return(0,a.jsx)("div",{className:"my-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(h.J,{htmlFor:"preprocessor-name-"+e,children:"Name"}),(0,a.jsxs)(w,{required:!0,value:r[e].name,onValueChange:t=>s(r.map((r,a)=>a===e?{...r,name:t}:r)),children:[(0,a.jsx)(_,{className:"col-span-3",children:(0,a.jsx)(N,{placeholder:"Select a preprocessor"})}),(0,a.jsx)(C,{className:"col-span-3",children:t.map(e=>(0,a.jsx)(k,{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(h.J,{htmlFor:"preprocessor-params-"+e,children:"Params"}),(0,a.jsx)(m.p,{id:"preprocessor-params-"+e,className:"col-span-3",placeholder:'{"max_length": 512}',required:!0,value:r[e].params,onChange:t=>s(r.map((r,a)=>a===e?{...r,params:t.target.value}:r))})]})]})})}function er({datasetId:e,shardsets:t,preprocessors:r,children:l}){let[f,g]=(0,s.useState)(""),[v,b]=(0,s.useState)([]),[j,y]=(0,s.useState)([]),[D,S]=(0,s.useState)([]),[A,R]=(0,s.useState)(1),[P,E]=(0,s.useState)(!1),[I,O]=(0,s.useState)(!1),[U,L]=(0,s.useState)(!1),$=(0,s.useRef)(null),F=()=>{g(""),b([]),y([]),S([]),R(1),$.current?.reset()},T=async t=>{let r="";try{let e=v.map(e=>({name:e.name,params:JSON.parse(e.params)}));r=JSON.stringify(e)}catch(e){i.oR.error("Invalid preprocessor params");return}let a=await z(e,f,j,r,D,A,P,I);a.success?(i.oR.success("Started preprocessing"),L(!1),F()):i.oR.error(`Failed to start preprocessing: ${a.error}`)};return 0===r.length?(0,a.jsxs)(p.lG,{open:U,onOpenChange:L,children:[(0,a.jsx)(p.zM,{asChild:!0,children:l}),(0,a.jsx)(p.Cf,{className:"sm:max-w-[600px]",children:(0,a.jsxs)(p.c7,{children:[(0,a.jsx)(p.L3,{children:"No preprocessors found!"}),(0,a.jsx)(p.rr,{children:"Please create a preprocessor first."})]})})]}):(0,a.jsxs)(p.lG,{open:U,onOpenChange:L,children:[(0,a.jsx)(p.zM,{asChild:!0,children:l}),(0,a.jsxs)(p.Cf,{className:"sm:max-w-[600px]",children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsx)(p.L3,{children:"Preprocess"}),(0,a.jsx)(p.rr,{children:"Generate a new shardset by preprocessing the dataset."})]}),(0,a.jsxs)("form",{ref:$,action:T,children:[(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsx)("div",{className:"text-lg mt-2",children:"Source"}),j.map((e,r)=>(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(h.J,{htmlFor:"source",className:"text-right",children:"Shardset"}),(0,a.jsxs)(w,{name:"source",required:!0,value:e,onValueChange:e=>y(t=>{let a=[...t];return a[r]=e,a}),children:[(0,a.jsx)(_,{className:"col-span-3",children:(0,a.jsx)(N,{placeholder:"Select a source"})}),(0,a.jsx)(C,{className:"col-span-3",children:t.map(e=>(0,a.jsx)(k,{value:e.id,disabled:j.includes(e.id),children:e.location},e.id))})]})]},`sourceShardset-${r}`)),j.length<t.length&&(0,a.jsxs)(u.$,{type:"button",variant:"outline",onClick:()=>y([...j,""]),children:[(0,a.jsx)(n.A,{}),"Add Source Shardset"]}),(0,a.jsxs)("div",{className:"text-lg mt-2 flex gap-2 items-center",children:[(0,a.jsx)("div",{children:"Preprocessors"}),(0,a.jsx)(x.F,{icon:(0,a.jsx)(o.A,{className:"w-4 h-4"}),content:(0,a.jsx)("p",{})})]}),(0,a.jsx)(d.F,{className:"max-h-[200px]",children:v.map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsx)(et,{index:t,preprocessors:r,preprocessorInputs:v,setPreprocessorInputs:b}),(0,a.jsx)(c.w,{className:"my-2"})]},t))}),(0,a.jsxs)(u.$,{type:"button",variant:"outline",onClick:()=>b([...v,{name:"",params:"{}"}]),children:[(0,a.jsx)(n.A,{}),"Add Preprocessor"]})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsx)("div",{className:"text-lg mt-2",children:"Configuration"}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(h.J,{htmlFor:"location",className:"text-right",children:"Batch Size"}),(0,a.jsx)(m.p,{id:"batch_size",name:"batch_size",type:"number",className:"col-span-3",placeholder:"100",required:!0,value:A,onChange:e=>R(Number(e.target.value))})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsx)("div",{className:"text-lg mt-2",children:"Output"}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(h.J,{htmlFor:"location",className:"text-right",children:"Location"}),(0,a.jsx)(m.p,{id:"location",name:"location",className:"col-span-3",placeholder:"s3://bucket/path/to/shardset/",required:!0,value:f,onChange:e=>g(e.target.value)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(h.J,{htmlFor:"location",className:"text-right",children:"Overwrite"}),(0,a.jsx)(Q,{id:"overwrite",name:"overwrite",checked:P,onCheckedChange:e=>E("indeterminate"!==e&&e)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(h.J,{htmlFor:"location",className:"text-right",children:"Drop Last"}),(0,a.jsx)(Q,{id:"drop_last",name:"drop_last",checked:I,onCheckedChange:e=>O("indeterminate"!==e&&e)})]}),D.map((e,t)=>(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsxs)(h.J,{htmlFor:"location",className:"text-right",children:["Export Column ",t+1]}),(0,a.jsx)(m.p,{id:"location",name:"location",className:"col-span-3",placeholder:"new_column_name",required:!0,value:e,onChange:e=>S(r=>{let a=[...r];return a[t]=e.target.value,a})},`export-column-${t}`)]})),(0,a.jsxs)(u.$,{type:"button",variant:"outline",className:"",onClick:()=>S([...D,""]),children:[(0,a.jsx)(n.A,{}),"Add Export Column"]})]}),(0,a.jsx)(p.Es,{children:(0,a.jsx)(ee,{})})]})]})]})}W.displayName=H},4663:(e,t,r)=>{"use strict";r.d(t,{DeleteDatasetDialog:()=>d});var a=r(40871),s=r(24983),n=r(82070),o=r(36931);let i=(0,o.createServerReference)("401a68a669dcdc0d19c511edf320c79e4562b4a99a",o.callServer,void 0,o.findSourceMapURL,"deleteDataset");var l=r(90181);function d({datasetId:e,children:t}){let r=(0,l.useRouter)(),o=async()=>{let t=await i(e);t.success?(s.oR.success("Dataset deleted successfully"),r.push("/datasets")):s.oR.error(`Failed to delete dataset: ${t.error}`)};return(0,a.jsxs)(n.Lt,{children:[(0,a.jsx)(n.tv,{asChild:!0,children:t}),(0,a.jsxs)(n.EO,{children:[(0,a.jsxs)(n.wd,{children:[(0,a.jsx)(n.r7,{children:"Are you absolutely sure?"}),(0,a.jsx)(n.$v,{children:"This action cannot be undone. This will permanently delete your dataset, related shardsets and iterations. Of course, actual data will not be affected."})]}),(0,a.jsxs)(n.ck,{children:[(0,a.jsx)(n.Zr,{children:"Cancel"}),(0,a.jsx)(n.Rx,{onClick:o,children:"Continue"})]})]})]})}},8041:(e,t,r)=>{"use strict";r.d(t,{F:()=>n});var a=r(40871),s=r(30618);let n=({icon:e,content:t})=>(0,a.jsxs)(s.Tooltip,{children:[(0,a.jsx)(s.TooltipTrigger,{asChild:!0,children:e}),(0,a.jsx)(s.TooltipContent,{children:t})]})},10839:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>u,Es:()=>m,L3:()=>h,c7:()=>p,lG:()=>i,rr:()=>x,zM:()=>l});var a=r(40871);r(65138);var s=r(32506),n=r(98154),o=r(75908);function i({...e}){return(0,a.jsx)(s.bL,{"data-slot":"dialog",...e})}function l({...e}){return(0,a.jsx)(s.l9,{"data-slot":"dialog-trigger",...e})}function d({...e}){return(0,a.jsx)(s.ZL,{"data-slot":"dialog-portal",...e})}function c({className:e,...t}){return(0,a.jsx)(s.hJ,{"data-slot":"dialog-overlay",className:(0,o.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",e),...t})}function u({className:e,children:t,...r}){return(0,a.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,a.jsx)(c,{}),(0,a.jsxs)(s.UC,{"data-slot":"dialog-content",className:(0,o.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r,children:[t,(0,a.jsxs)(s.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(n.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function p({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,o.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function m({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:(0,o.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function h({className:e,...t}){return(0,a.jsx)(s.hE,{"data-slot":"dialog-title",className:(0,o.cn)("text-lg leading-none font-semibold",e),...t})}function x({className:e,...t}){return(0,a.jsx)(s.VY,{"data-slot":"dialog-description",className:(0,o.cn)("text-muted-foreground text-sm",e),...t})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13804:(e,t,r)=>{"use strict";r.d(t,{F:()=>o});var a=r(40871);r(65138);var s=r(8019),n=r(75908);function o({className:e,children:t,...r}){return(0,a.jsxs)(s.bL,{"data-slot":"scroll-area",className:(0,n.cn)("relative",e),...r,children:[(0,a.jsx)(s.LM,{"data-slot":"scroll-area-viewport",className:"ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1",children:t}),(0,a.jsx)(i,{}),(0,a.jsx)(s.OK,{})]})}function i({className:e,orientation:t="vertical",...r}){return(0,a.jsx)(s.VM,{"data-slot":"scroll-area-scrollbar",orientation:t,className:(0,n.cn)("flex touch-none p-px transition-colors select-none","vertical"===t&&"h-full w-2.5 border-l border-l-transparent","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent",e),...r,children:(0,a.jsx)(s.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}},17141:(e,t,r)=>{"use strict";r.d(t,{J:()=>o});var a=r(40871);r(65138);var s=r(44989),n=r(75908);function o({className:e,...t}){return(0,a.jsx)(s.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}},17773:(e,t,r)=>{"use strict";r.d(t,{KU:()=>l,my:()=>d});var a=r(10146),s=r(87080),n=r(77893);let o=()=>process.env.API_URL||"http://localhost:8000",i=async()=>{let e=await (0,s.UL)();return e.get("lavender-data-api-key")?.value},l=async()=>{let e=o(),t=await i();return(0,a.Ay)({baseUrl:e,headers:t?{Authorization:`Basic ${t}`}:{},fetch:async e=>{let t=await fetch(e,{cache:"no-store"});return(401===t.status||403===t.status)&&(0,n.redirect)("/set-api-key"),t}})},d=async e=>{let t=o();return(0,a.Ay)({baseUrl:t,headers:{Authorization:`Basic ${e}`},fetch:async e=>fetch(e,{cache:"no-store"})})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20574:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(21228).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},21900:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"401a68a669dcdc0d19c511edf320c79e4562b4a99a":()=>o,"7f4052b267bb5efd1dc039fdf5d8f939a60810030b":()=>i});var a=r(6391);r(80127);var s=r(17773),n=r(63995);async function o(e){try{let t=await (await (0,s.KU)()).DELETE("/datasets/{dataset_id}",{params:{path:{dataset_id:e}}});if(t.error)return{success:!1,error:t.error.detail};return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"An unexpected error occurred"}}}async function i(e,t,r,a,n,o,i,l){let d=[];try{d=JSON.parse(a)}catch(e){return{success:!1,error:"Invalid preprocessors data"}}try{let a=await (await (0,s.KU)()).POST("/datasets/{dataset_id}/preprocess",{params:{path:{dataset_id:e}},body:{shardset_location:t,source_shardset_ids:r,preprocessors:d,export_columns:n,batch_size:o,overwrite:i,drop_last:l}});if(a.error){let e="Unknown error";return"string"==typeof a.error.detail&&(e=a.error.detail),{success:!1,error:e}}return{success:!0,data:a.data}}catch(e){return{success:!1,error:e instanceof Error?e.message:"An unexpected error occurred"}}}(0,n.D)([o]),(0,a.A)(o,"401a68a669dcdc0d19c511edf320c79e4562b4a99a",null),(0,n.D)([i]),(0,a.A)(i,"7f4052b267bb5efd1dc039fdf5d8f939a60810030b",null)},22393:(e,t,r)=>{"use strict";r.d(t,{DeleteDatasetDialog:()=>a});let a=(0,r(26259).registerClientReference)(function(){throw Error("Attempted to call DeleteDatasetDialog() from the server but DeleteDatasetDialog is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/hanch/fal/lavender-data/ui/src/app/datasets/[dataset_id]/settings/delete-dataset-dialog.tsx","DeleteDatasetDialog")},26219:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Root:()=>s,Slot:()=>n,Slottable:()=>o,createSlot:()=>i,createSlottable:()=>l});var a=r(26259);let s=(0,a.registerClientReference)(function(){throw Error("Attempted to call Root() from the server but Root is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/hanch/fal/lavender-data/node_modules/.pnpm/@radix-ui+react-slot@1.2.2_@types+react@19.0.10_react@19.0.0/node_modules/@radix-ui/react-slot/dist/index.mjs","Root"),n=(0,a.registerClientReference)(function(){throw Error("Attempted to call Slot() from the server but Slot is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/hanch/fal/lavender-data/node_modules/.pnpm/@radix-ui+react-slot@1.2.2_@types+react@19.0.10_react@19.0.0/node_modules/@radix-ui/react-slot/dist/index.mjs","Slot"),o=(0,a.registerClientReference)(function(){throw Error("Attempted to call Slottable() from the server but Slottable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/hanch/fal/lavender-data/node_modules/.pnpm/@radix-ui+react-slot@1.2.2_@types+react@19.0.10_react@19.0.0/node_modules/@radix-ui/react-slot/dist/index.mjs","Slottable"),i=(0,a.registerClientReference)(function(){throw Error("Attempted to call createSlot() from the server but createSlot is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/hanch/fal/lavender-data/node_modules/.pnpm/@radix-ui+react-slot@1.2.2_@types+react@19.0.10_react@19.0.0/node_modules/@radix-ui/react-slot/dist/index.mjs","createSlot"),l=(0,a.registerClientReference)(function(){throw Error("Attempted to call createSlottable() from the server but createSlottable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/hanch/fal/lavender-data/node_modules/.pnpm/@radix-ui+react-slot@1.2.2_@types+react@19.0.10_react@19.0.0/node_modules/@radix-ui/react-slot/dist/index.mjs","createSlottable")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32253:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var a=r(94829);r(72024);var s=r(26219),n=r(88606),o=r(77678);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l({className:e,variant:t,size:r,asChild:n=!1,...l}){let d=n?s.Slot:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,o.cn)(i({variant:t,size:r,className:e})),...l})}},33873:e=>{"use strict";e.exports=require("path")},36285:(e,t,r)=>{Promise.resolve().then(r.bind(r,26219)),Promise.resolve().then(r.bind(r,22393)),Promise.resolve().then(r.bind(r,72336)),Promise.resolve().then(r.bind(r,44155))},40931:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>o,Zp:()=>n});var a=r(94829);r(72024);var s=r(77678);function n({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function o({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...t})}},44989:(e,t,r)=>{"use strict";r.d(t,{b:()=>i});var a=r(65138),s=r(34240),n=r(40871),o=a.forwardRef((e,t)=>(0,n.jsx)(s.sG.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));o.displayName="Label";var i=o},54845:(e,t,r)=>{Promise.resolve().then(r.bind(r,65854)),Promise.resolve().then(r.bind(r,4663)),Promise.resolve().then(r.bind(r,3949)),Promise.resolve().then(r.bind(r,28077))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63354:(e,t,r)=>{"use strict";r.d(t,{X:()=>n});var a=r(65138),s=r(42850);function n(e){let[t,r]=a.useState(void 0);return(0,s.N)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let a,s;if(!Array.isArray(t)||!t.length)return;let n=t[0];if("borderBoxSize"in n){let e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;a=t.inlineSize,s=t.blockSize}else a=e.offsetWidth,s=e.offsetHeight;r({width:a,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}},72336:(e,t,r)=>{"use strict";r.d(t,{PreprocessDatasetDialog:()=>a});let a=(0,r(26259).registerClientReference)(function(){throw Error("Attempted to call PreprocessDatasetDialog() from the server but PreprocessDatasetDialog is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/hanch/fal/lavender-data/ui/src/app/datasets/[dataset_id]/settings/preprocess-dataset-dialog.tsx","PreprocessDatasetDialog")},82070:(e,t,r)=>{"use strict";r.d(t,{Lt:()=>E,Rx:()=>G,Zr:()=>M,EO:()=>L,$v:()=>q,ck:()=>F,wd:()=>$,r7:()=>T,tv:()=>I});var a=r(40871),s=r(65138),n=r(47231),o=r(14343),i=r(32506),l=r(27642),d=r(65854),c="AlertDialog",[u,p]=(0,n.A)(c,[i.Hs]),m=(0,i.Hs)(),h=e=>{let{__scopeAlertDialog:t,...r}=e,s=m(t);return(0,a.jsx)(i.bL,{...s,...r,modal:!0})};h.displayName=c;var x=s.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,n=m(r);return(0,a.jsx)(i.l9,{...n,...s,ref:t})});x.displayName="AlertDialogTrigger";var f=e=>{let{__scopeAlertDialog:t,...r}=e,s=m(t);return(0,a.jsx)(i.ZL,{...s,...r})};f.displayName="AlertDialogPortal";var g=s.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,n=m(r);return(0,a.jsx)(i.hJ,{...n,...s,ref:t})});g.displayName="AlertDialogOverlay";var v="AlertDialogContent",[b,j]=u(v),y=(0,d.createSlottable)("AlertDialogContent"),w=s.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:n,...d}=e,c=m(r),u=s.useRef(null),p=(0,o.s)(t,u),h=s.useRef(null);return(0,a.jsx)(i.G$,{contentName:v,titleName:N,docsSlug:"alert-dialog",children:(0,a.jsx)(b,{scope:r,cancelRef:h,children:(0,a.jsxs)(i.UC,{role:"alertdialog",...c,...d,ref:p,onOpenAutoFocus:(0,l.m)(d.onOpenAutoFocus,e=>{e.preventDefault(),h.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,a.jsx)(y,{children:n}),(0,a.jsx)(z,{contentRef:u})]})})})});w.displayName=v;var N="AlertDialogTitle",_=s.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,n=m(r);return(0,a.jsx)(i.hE,{...n,...s,ref:t})});_.displayName=N;var C="AlertDialogDescription",k=s.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,n=m(r);return(0,a.jsx)(i.VY,{...n,...s,ref:t})});k.displayName=C;var D=s.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,n=m(r);return(0,a.jsx)(i.bm,{...n,...s,ref:t})});D.displayName="AlertDialogAction";var S="AlertDialogCancel",A=s.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,{cancelRef:n}=j(S,r),l=m(r),d=(0,o.s)(t,n);return(0,a.jsx)(i.bm,{...l,...s,ref:d})});A.displayName=S;var z=({contentRef:e})=>{let t=`\`${v}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${v}\` by passing a \`${C}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${v}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return s.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},R=r(75908),P=r(26123);function E({...e}){return(0,a.jsx)(h,{"data-slot":"alert-dialog",...e})}function I({...e}){return(0,a.jsx)(x,{"data-slot":"alert-dialog-trigger",...e})}function O({...e}){return(0,a.jsx)(f,{"data-slot":"alert-dialog-portal",...e})}function U({className:e,...t}){return(0,a.jsx)(g,{"data-slot":"alert-dialog-overlay",className:(0,R.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function L({className:e,...t}){return(0,a.jsxs)(O,{children:[(0,a.jsx)(U,{}),(0,a.jsx)(w,{"data-slot":"alert-dialog-content",className:(0,R.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function $({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,R.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function F({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,R.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function T({className:e,...t}){return(0,a.jsx)(_,{"data-slot":"alert-dialog-title",className:(0,R.cn)("text-lg font-semibold",e),...t})}function q({className:e,...t}){return(0,a.jsx)(k,{"data-slot":"alert-dialog-description",className:(0,R.cn)("text-muted-foreground text-sm",e),...t})}function G({className:e,...t}){return(0,a.jsx)(D,{className:(0,R.cn)((0,P.r)(),e),...t})}function M({className:e,...t}){return(0,a.jsx)(A,{className:(0,R.cn)((0,P.r)({variant:"outline"}),e),...t})}},87557:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(94829),s=r(32253),n=r(72188),o=r(44155),i=r(40931),l=r(22393),d=r(72336);async function c({params:e}){let{dataset_id:t}=await e,r=await (0,n.KU)(),c=await r.GET("/datasets/{dataset_id}",{params:{path:{dataset_id:t}}}),u=await r.GET("/registries/preprocessors",{});if(c.error)return(0,a.jsx)(o.ErrorCard,{error:c.error.detail});if(!u.data)return(0,a.jsx)(o.ErrorCard,{error:u.error});let p=c.data;return(0,a.jsx)("div",{className:"w-full max-w-[720px] flex flex-col gap-2 items-start",children:(0,a.jsx)(i.Zp,{className:"w-full",children:(0,a.jsxs)(i.Wu,{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"grid grid-cols-[1fr_200px] gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-md",children:"Preprocess"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Generate a new shardset by preprocessing the dataset."})]}),(0,a.jsx)(d.PreprocessDatasetDialog,{datasetId:t,shardsets:p.shardsets,preprocessors:u.data.map(e=>e.name),children:(0,a.jsx)(s.$,{variant:"default",children:"Preprocess"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-[1fr_200px] gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-md",children:"Delete this dataset"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"This action is irreversible."})]}),(0,a.jsx)(l.DeleteDatasetDialog,{datasetId:t,children:(0,a.jsx)(s.$,{variant:"destructive",children:"Delete this dataset"})})]})]})})})}},88606:(e,t,r)=>{"use strict";r.d(t,{F:()=>o});var a=r(11942);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=a.$,o=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return n(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:o,defaultVariants:i}=t,l=Object.keys(o).map(e=>{let t=null==r?void 0:r[e],a=null==i?void 0:i[e];if(null===t)return null;let n=s(t)||s(a);return o[e][n]}),d=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return n(e,l,null==t?void 0:null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:r,className:a,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...d}[t]):({...i,...d})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[294,562,94,825,158,585,36,247,463,602],()=>r(334));module.exports=a})();