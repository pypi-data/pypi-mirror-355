{% extends "enap_designsystem/base.html" %}
{% load wagtailcore_tags math_tags %}

{% block content %}
	<section class="noticias-index">
		<h1>Notícias</h1>

		{% for article in articles %}
			<article>
				<h2><a href="{{ article.url }}">{{ article.title }}</a></h2>

				{% if article|classname == "ENAPNoticiaImportada" %}
					<p class="origem">(Importada do Joomla)</p>
					<div class="preview">{{ article.descricao_html|safe }}</div>
				{% else %}
					<p class="origem">(Nova notícia)</p>
					{% if article.body %}
						<div class="preview">{{ article.body|richtext }}</div>
					{% endif %}
				{% endif %}
			</article>
		{% empty %}
			<p>Nenhuma notícia encontrada.</p>
		{% endfor %}

		<nav class="pagination">
			{% if start_prev is not None %}
				<a href="?start={{ start_prev }}">← Página anterior</a>
			{% endif %}

			<span>Página {{ page.number }} de {{ page.paginator.num_pages }}</span>

			{% if start_next is not None %}
				<a href="?start={{ start_next }}">Próxima página →</a>
			{% endif %}
			
		</nav>
	</section>
{% endblock %}
