{"version":3,"file":"datagrid-filter.bundle.js","mappings":"2kCAMG,IACGA,EAAAA,WAKF,WAAYC,I,4FAAO,CAAD,QAEdC,KAAKD,KAAOA,EAGZC,KAAKC,KAAOD,KAAKE,UAGjBF,KAAKG,MAAQH,KAAKI,WAElBJ,KAAKK,a,QA4DR,O,EAvDL,G,EAAA,yBACI,WACQL,KAAKG,OACLH,KAAKG,MAAMG,iBAAiB,SAAUN,KAAKO,SAASC,KAAKR,SAOrE,qBACI,WACI,IAAMG,EAAQH,KAAKI,WACnB,GAAID,EAAO,CACP,IAAKA,EAAMF,KAAM,CACb,IAAMQ,EAASN,EAAMO,aAAa,QAClC,OAAOC,SAASC,eAAeH,GAEnC,OAAON,EAAMF,QAOzB,sBACI,WACI,IAAME,EAAQU,IAAAA,gBAAoBb,KAAKD,KAAMe,EAAAA,IACvCC,EAASF,IAAAA,gBAAoBb,KAAKD,KAAMiB,EAAAA,IAC9C,OAAOb,GAASY,IAMxB,sBACI,WAAY,IAAD,OACDN,EAAST,KAAKC,KAAKgB,GAGzB,EAFeN,SAASO,iBAAT,iBAAoCT,EAApC,QAEHU,SAAQ,SAAApB,GAChB,IAAMqB,EAAUT,SAASU,cAAc,SAEnCtB,EAAKE,OAITmB,EAAQE,KAAOvB,EAAKuB,KACpBF,EAAQG,KAAO,SACfH,EAAQI,MAAQzB,EAAKyB,MAErB,EAAKvB,KAAKwB,YAAYL,OAG1BpB,KAAKC,KAAKyB,c,oEACb,EA3EC5B,GAgFN,EAAI6B,EAAAA,IAAkBR,SAAQ,SAAApB,GAAI,OAAI,IAAID,EAAeC","sources":["webpack://django-rijkshuisstijl/./rijkshuisstijl/js/components/datagrid/datagrid-filter.js"],"sourcesContent":["import BEM from 'bem.js';\nimport {DATAGRID_FILTERS} from './constants';\nimport {BLOCK_INPUT, BLOCK_SELECT} from '../form/constants';\n\n/**\n * Polyfills form association from datagrid filter.\n */\nclass DataGridFilter {\n    /**\n     * Constructor method.\n     * @param {HTMLElement} node\n     */\n    constructor(node) {\n        /** @type {HTMLElement} */\n        this.node = node;\n\n        /** @type {(HTMLFormElement|null)} */\n        this.form = this.getForm();\n\n        /** @type {(HTMLInputElement|HTMLSelectElement|null)} */\n        this.input = this.getInput();\n\n        this.bindEvents();\n    }\n\n    /**\n     * Binds events to callbacks.\n     */\n    bindEvents() {\n        if (this.input) {\n            this.input.addEventListener('change', this.onSubmit.bind(this));\n        }\n    }\n\n    /**\n     * Finds the form associated with the filter.\n     * @return {(HTMLFormElement|null)}\n     */\n    getForm() {\n        const input = this.getInput();\n        if (input) {\n            if (!input.form) {\n                const formId = input.getAttribute('form');\n                return document.getElementById(formId);\n            }\n            return input.form;\n        }\n    }\n\n    /**\n     * Finds the first input or select as child of this.node.\n     * @return {(HTMLInputElement|HTMLSelectElement|null)}\n     */\n    getInput() {\n        const input = BEM.getChildBEMNode(this.node, BLOCK_INPUT);\n        const select = BEM.getChildBEMNode(this.node, BLOCK_SELECT);\n        return input || select;\n    }\n\n    /**\n     * Appends clone of inputs pointing to this.form before submitting it when browser does not support input form\n     * attribute.\n     */\n    onSubmit() {\n        const formId = this.form.id;\n        const inputs = document.querySelectorAll(`[form=\"${formId}\"]`);\n\n        [...inputs].forEach(node => {\n            const newNode = document.createElement('input');\n\n            if (node.form) {  // Browser supports input form attribute.\n                return;\n            }\n\n            newNode.name = node.name;\n            newNode.type = 'hidden';\n            newNode.value = node.value;\n\n            this.form.appendChild(newNode);\n        });\n\n        this.form.submit();\n    }\n}\n\n\n// Start!\n[...DATAGRID_FILTERS].forEach(node => new DataGridFilter(node));\n\n\n\n"],"names":["DataGridFilter","node","this","form","getForm","input","getInput","bindEvents","addEventListener","onSubmit","bind","formId","getAttribute","document","getElementById","BEM","BLOCK_INPUT","select","BLOCK_SELECT","id","querySelectorAll","forEach","newNode","createElement","name","type","value","appendChild","submit","DATAGRID_FILTERS"],"sourceRoot":""}