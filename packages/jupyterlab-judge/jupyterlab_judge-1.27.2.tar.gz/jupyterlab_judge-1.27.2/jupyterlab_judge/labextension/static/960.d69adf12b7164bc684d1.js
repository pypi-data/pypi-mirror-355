"use strict";(self.webpackChunkjupyterlab_judge=self.webpackChunkjupyterlab_judge||[]).push([[960],{960:(e,t,s)=>{s.r(t),s.d(t,{ControlButtonImpl:()=>ee,HardCodedProblemProvider:()=>G,IControlButtonFactory:()=>H,IJudgePanelFactory:()=>B,IJudgeSignal:()=>q,IJudgeSubmissionAreaFactory:()=>K,IJudgeTerminalFactory:()=>U,IProblemProvider:()=>R,ISubmissionListFactory:()=>z,JudgeDocument:()=>T,JudgeDocumentFactory:()=>F,JudgeError:()=>w,JudgeKernelImplementationError:()=>S,JudgeKernelNotConnectedError:()=>v,JudgeKernelReconnectingFailedError:()=>E,JudgeModel:()=>M,JudgeOutputArea:()=>Fe,JudgePanel:()=>I,JudgeProblemPanel:()=>C,JudgeSubmissionArea:()=>Ie,JudgeTerminal:()=>Pe,SubmissionArea:()=>xe,SubmissionControl:()=>X,SubmissionItem:()=>ie,SubmissionItemStatus:()=>ne,SubmissionItemWait:()=>ce,SubmissionListImpl:()=>ge,SubmissionListSignalWrapper:()=>pe,ValidationFailedError:()=>j,default:()=>Me,factoryContext:()=>je,openOrCreateFromId:()=>O,transContext:()=>Ee});var n=s(2358),o=s(6943),i=s(4414),r=s(8449),a=s(8541),d=s(5353),l=s(3680),u=s(6029),c=s.n(u);const m="jupyterlab-judge",h=".jce-judge",p="jupyterlab-judge";var g;!function(e){function t(e,t){const s=t.load(m);function n(){if(e.context.model.readOnly)return(0,o.showDialog)({title:s.__("Cannot Save"),body:s.__("Document is read-only"),buttons:[o.Dialog.okButton({label:s.__("Ok")})]});e.context.save().then((()=>{if(!e.isDisposed)return e.context.createCheckpoint()}))}return(0,o.addToolbarButtonClass)(o.ReactWidget.create(u.createElement(o.UseSignal,{signal:e.context.fileChanged},(()=>u.createElement(o.ToolbarButtonComponent,{icon:r.saveIcon,onClick:n,tooltip:s.__("Save the judge contents and create checkpoint"),enabled:!!(e&&e.context&&e.context.contentsModel&&e.context.contentsModel.writable)})))))}e.createSaveButton=t,e.getDefaultItems=function(e,s,n){return[{name:"save",widget:t(e,s)}]}}(g||(g={}));var _=s(4882),b=s(5536),y=s(5191);class C extends _.Panel{constructor(e,t){super(),this._model=e.model,this._trans=e.translator.load(m),this._markdownRenderer=t.createRenderer("text/markdown"),this._markdownRenderer.addClass("jp-JudgePanel-problem"),this.addWidget(this._markdownRenderer)}renderProblem(){var e,t;this._markdownRenderer.renderModel(new y.MimeModel({data:{"text/markdown":null!==(t=null===(e=this._model.problem)||void 0===e?void 0:e.content)&&void 0!==t?t:this._trans.__("Problem Not Available.")}}))}}function f(e){const t=Array.from(e,(e=>String.fromCodePoint(e))).join("");return btoa(t)}const x=new r.LabIcon({name:"jupyterlab-judge:problem-icon",svgstr:b.customJudgeColorSvg});class w extends Error{constructor(e){super(e),this.name=this.constructor.name}}class v extends w{constructor(e){super(e),this.name=this.constructor.name}}class S extends w{constructor(e){super(e),this.name=this.constructor.name}}class E extends w{constructor(e){super(e),this.name=this.constructor.name}}class j extends w{constructor(e){super(e),this.name=this.constructor.name}}class I extends _.BoxPanel{constructor(e){super(),this.addClass("jp-JudgePanel"),this._context=e.context,this._translator=e.translator,this._sessionContextDialogs=e.sessionContextDialogs,this._trans=this._translator.load(m),this._submitted=e.submitted,this._executed=e.executed,this._rendermime=e.rendermime,this.id="jce-judge-panel",this.title.closable=!0;const t=new _.SplitPanel({spacing:0});t.addClass("jp-JudgePanel-splitPanel"),this._editorWidget=new a.CodeEditorWrapper({model:this.model.codeModel,factory:e.editorServices.factoryService.newInlineEditor,editorOptions:{config:{...e.editorConfig,lineNumbers:!0}}}),this._editorWidget.addClass("jp-JudgePanel-editor"),this._editorWidget.node.setAttribute("data-jp-undoer","true"),this._editorWidget.node.setAttribute("data-jp-code-runner","true");const s=this.createProblemPanel();s.renderProblem(),this.model.problemChanged.connect(((e,t)=>{s.renderProblem(),(null==t?void 0:t.title)&&(this.title.label=`${null==t?void 0:t.title}.judge`)})),this._terminal=e.judgeTerminalFactory({panel:this,model:this.model.outputAreaModel,rendermime:e.rendermime,translator:this._translator}),this._terminal.addClass("jp-JudgePanel-terminal");const n=e.judgeSubmissionAreaFactory({panel:this,model:this.model,translator:this._translator,submissionListFactory:e.submissionListFactory,controlButtonFactory:e.controlButtonFactory});n.addClass("jp-JudgePanel-submissionPanel"),t.addWidget(s);const o=new _.SplitPanel({orientation:"vertical",spacing:0});o.addClass("jp-JudgePanel-rightPanel"),o.addWidget(this._editorWidget),o.addWidget(this._terminal),o.addWidget(n),t.addWidget(o),this.addWidget(t),this.session.isReady||this.session.initialize()}get model(){return this.context.model}get editor(){return this._editorWidget.editor}get session(){return this.context.sessionContext}get context(){return this._context}createProblemPanel(){return new C({model:this.model,translator:this._translator},this._rendermime)}handleEvent(e){this.model&&"mousedown"===e.type&&this._ensureFocus()}onAfterAttach(e){super.onAfterAttach(e),this.node.addEventListener("mousedown",this)}onBeforeDetach(e){this.node.removeEventListener("mousedown",this)}onActivateRequest(e){this._ensureFocus()}_ensureFocus(){this.session.pendingInput||this.editor.hasFocus()||this.editor.focus()}async execute(){if(this.session.pendingInput)return(0,o.showDialog)({title:this._trans.__("Cell not executed due to pending input"),body:this._trans.__("The cell has not been executed to avoid kernel deadlock as there is another pending input! Submit your pending input and try again."),buttons:[o.Dialog.okButton({label:this._trans.__("Ok")})]}),null;if(this.session.hasNoKernel&&await this.session.startKernel()&&await this._sessionContextDialogs.selectKernel(this.session),this.session.hasNoKernel)return(0,o.showDialog)({title:this._trans.__("Cell not executed due to missing kernel"),body:this._trans.__("The cell has not been executed because no kernel selected. Please select a kernel to execute the cell."),buttons:[o.Dialog.okButton({label:this._trans.__("Ok")})]}),null;let e;try{const t=this.model.source;e=await l.OutputArea.execute(t,this._terminal.outputArea,this.session,{});let s=!1;e&&"ok"!==e.content.status||(s=!0),this._executed.emit({widget:this,cell:this.model.codeModel,success:s})}catch(e){if(!(e instanceof Error&&"Canceled future for execute_request message before replies were done"===e.message))throw e}return await this.session.restartKernel(),e||null}async judge(){var e,t;const s=this.model.problem,n=this.model.source;if(null===s)throw new Error("Problem cannot be found.");this.model.submissionStatus={type:"progress",runCount:0,totalCount:0};const i=await this.model.getTestCases();if(0===i.length)return void(this.model.submissionStatus={type:"error",errorDetails:this._trans.__("Problem has no test cases.")});const r=null===(e=this.session.session)||void 0===e?void 0:e.kernel;if(!r)return this._sessionContextDialogs.selectKernel(this.session),void(this.model.submissionStatus={type:"idle"});const a=new o.SessionContext({sessionManager:this.session.sessionManager,specsManager:this.session.specsManager,name:"Judge"});await a.initialize(),await a.changeKernel(await r.spec);const d=null===(t=a.session)||void 0===t?void 0:t.kernel;if(!d)return this._sessionContextDialogs.selectKernel(a),void(this.model.submissionStatus={type:"idle"});this.model.submissionStatus={type:"progress",runCount:0,totalCount:i.length};for(let e=0;e<20&&"idle"!==a.kernelDisplayStatus;e++)await new Promise((e=>setTimeout(e,1e3)));if("idle"!==a.kernelDisplayStatus){if("connecting"!==a.kernelDisplayStatus)throw console.warn(`Kernel is still ${a.kernelDisplayStatus} after 20s`),new w(this._trans.__("Kernel is not responding. Please try again."));{const e=d._reconnectAttempt;if(void 0===e)throw new S(this._trans.__("Kernel is still connecting. Please check your network."));if(e>0)throw new E(this._trans.__("Kernel is still connecting. Please check your network."));if(0===e)throw new v(this._trans.__("Kernel is still connecting. Please check your network."))}}const l=[];for(const e of i){const t=await this.runWithInput(d,n,s,e);l.push(t),this.model.submissionStatus={type:"progress",runCount:l.length,totalCount:i.length}}const u=await this.model.validate(l.map((e=>e.output)));if(null===u)throw new j(this._trans.__("Validation failed. Please try again"));await d.shutdown(),d.dispose();const c=await this.model.submit({problemId:s.id,code:n,token:u.token,language:"python",details:l.map(((e,t)=>{switch(e.status){case"OK":return u.results[t]?{status:"AC",cpuTime:e.cpuTime,memory:0}:{status:"WA",answer:e.output,cpuTime:e.cpuTime,memory:0};case"TLE":return{status:"TLE",cpuTime:e.cpuTime,memory:0};case"OLE":return{status:"OLE",cpuTime:e.cpuTime,memory:0};case"RE":return{status:"RE",memory:0,cpuTime:e.cpuTime,errorName:e.errorName,errorValue:e.errorValue}}}))},this);this.model.submissionStatus={type:"idle"},this._submitted.emit({widget:this,submission:c,problem:s})}async runWithInput(e,t,s,n){const o=`\nimport io\nimport base64\n\ndef input(prompt=None):  \t\n    r = JUDGE_INPUT_STRING_IO.${"one_line"===s.inputTransferType?"readline":"read"}().rstrip('\\n')\n    if not r:  \t\t\n        return ''\n    return r\n\nJUDGE_INPUT_STRING_IO = io.StringIO()\n`;await e.requestExecute({code:o,stop_on_error:!0},!0,{}).done;const i=1e6;for(let t=0;t<n.length;t+=i){const s=n.slice(t,t+i),o=`\nJUDGE_INPUT_STRING_IO.write(base64.b64decode('${f((new TextEncoder).encode(s))}').decode("utf-8"))\n`;await e.requestExecute({code:o,stop_on_error:!0},!0,{}).done}const r={code:"\nJUDGE_INPUT_STRING_IO.seek(0)\n"+t,stop_on_error:!0,allow_stdin:!0},a=Date.now(),d=e.requestExecute(r,!0,{});let l={output:"",status:"OK",cpuTime:0};d.onIOPub=e=>{switch(e.header.msg_type){case"stream":{const t=e;"stdout"===t.content.name&&(l.output=l.output.concat(t.content.text));break}case"error":{const t=e;l={status:"RE",errorName:t.content.ename,errorValue:t.content.evalue,output:l.output,cpuTime:0};break}}};const u=1e3*s.timeout,c=new Promise((e=>{setTimeout((()=>{e(0)}),1.2*u)}));if(0===await Promise.race([d.done,c]))d.dispose(),await e.interrupt(),l={status:"TLE",output:l.output,cpuTime:null};else{const e=Date.now()-a;l.cpuTime=e,e>u&&(l={status:"TLE",output:l.output,cpuTime:e})}return l}}class T extends d.DocumentWidget{constructor(e){super(e),g.getDefaultItems(this.content,e.translator).forEach((e=>{this.toolbar.addItem(e.name,e.widget)}))}}class F extends d.ABCWidgetFactory{constructor(e){super(e.factoryOptions),this._editorServices=e.editorServices,this._rendermime=e.rendermime,this._commands=e.commands,this._editorConfig=e.editorConfig,this._sessionContextDialogs=e.sessionContextDialogs,this._judgePanelFactory=e.judgePanelFactory,this._judgeSubmissionAreaFactory=e.judgeSubmissionAreaFactory,this._judgeTerminalFactory=e.judgeTerminalFactory,this._submissionListFactory=e.submissionListFactory,this._controlButtonFactory=e.controlButtonFactory,this._submitted=e.submitted,this._executed=e.executed}createNewWidget(e){const t=this._judgePanelFactory({rendermime:this._rendermime,editorServices:this._editorServices,editorConfig:this._editorConfig,context:e,translator:this.translator,sessionContextDialogs:this._sessionContextDialogs,submitted:this._submitted,executed:this._executed,judgeSubmissionAreaFactory:this._judgeSubmissionAreaFactory,judgeTerminalFactory:this._judgeTerminalFactory,submissionListFactory:this._submissionListFactory,controlButtonFactory:this._controlButtonFactory});return t.title.icon=x,new T({content:t,context:e,commands:this._commands,translator:this.translator})}}var k,P=s(7572),N=s(3402),A=s(4901),J=s(2271);class M{constructor(e,t){this._contentChanged=new A.Signal(this),this._stateChanged=new A.Signal(this),this._isDisposed=!1,this._dirty=!1,this._problemChanged=new A.Signal(this),this._submissionsChanged=new A.Signal(this),this._submissionStatus={type:"idle"},this._submissionStatusChanged=new A.Signal(this),this.sharedModel=new M.YJudge,this.sharedModel.changed.connect((async(e,t)=>{t.problemIdChange&&(this._problem=await this._problemProvider.getProblem(t.problemIdChange),this._problemChanged.emit(this._problem)),t.stateChange&&t.stateChange.forEach((e=>{"dirty"===e.name&&(this.dirty=e.newValue)})),t.sourceChange&&(this._contentChanged.emit(),this.dirty=!0)})),this._codeModel=new J.CodeCellModel({sharedModel:this.sharedModel.yCodeCell}),this._codeModel.mimeType="text/x-python",this._problem=null,this._problemProvider=e,this._collaborationEnabled=!!(null==t?void 0:t.collaborationEnabled)}get collaborative(){return this._collaborationEnabled}get contentChanged(){return this._contentChanged}get stateChanged(){return this._stateChanged}get dirty(){return this._dirty}set dirty(e){const t=this._dirty;e!==t&&(this._dirty=e,this._stateChanged.emit({name:"dirty",oldValue:t,newValue:e}))}get readOnly(){return!1}set readOnly(e){}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,A.Signal.clearData(this))}initialize(){}get defaultKernelName(){return`Judge: Problem ${this.sharedModel.problemId}`}get defaultKernelLanguage(){return"python"}get codeModel(){return this._codeModel}get source(){return this.sharedModel.source}set source(e){this.sharedModel.source=e}get outputAreaModel(){return this._codeModel.outputs}getMetadata(){return this.sharedModel.getMetadata()}setMetadata(e,t){this.sharedModel.setMetadata(e,t)}get problem(){return this._problem}get problemChanged(){return this._problemChanged}async submissions(){return await this._problemProvider.getSubmissions(this.sharedModel.problemId)}get submissionsChanged(){return this._submissionsChanged}get submissionStatus(){return this._submissionStatus}set submissionStatus(e){this._submissionStatus=e,this._submissionStatusChanged.emit(this._submissionStatus)}get submissionStatusChanged(){return this._submissionStatusChanged}toString(){return JSON.stringify(this.toJSON())}fromString(e){try{this.fromJSON(JSON.parse(e))}catch(e){if(!(e instanceof SyntaxError))throw e;this.fromJSON({problem_id:"",code:"",judge_format:1})}}toJSON(){return{problem_id:this.sharedModel.problemId,code:this.sharedModel.source,judge_format:1}}fromJSON(e){var t,s;this.sharedModel.source=null!==(t=e.code)&&void 0!==t?t:"# 파일이 손상되었습니다. 파일을 삭제하고 새로 생성해주세요.",this.sharedModel.problemId=null!==(s=e.problem_id)&&void 0!==s?s:"",this.dirty=!0}async getTestCases(){return await this._problemProvider.getTestCases(this.sharedModel.problemId)}async validate(e){return await this._problemProvider.validate(this.sharedModel.problemId,e)}async submit(e,t){const s=await this._problemProvider.submit(e,t);return this._submissionsChanged.emit(await this._problemProvider.getSubmissions(this.sharedModel.problemId)),s}}async function O(e,t,s){const n=await e.getProblem(s);if(n){const o=n.title,i=`${h}/${s}/${o}.judge`,r=`${h}`;await t.services.contents.save(r,{name:r,type:"directory"});const a=`${h}/${s}`;return await t.services.contents.save(a,{name:a,type:"directory"}),await async function(e,t,s,n){try{await t.services.contents.get(s)}catch(o){throw o instanceof P.ServerConnection.ResponseError&&404===o.response.status&&await t.services.contents.save(s,{name:s,type:"file",format:"text",content:await M.newFileContent(e,n)}),o}finally{return t.openOrReveal(s)}}(e,t,i,s)}}!function(e){e.JudgeModelFactory=class{constructor(e){this.collaborative=!0,this.name="judge-model",this.fileFormat="text",this._disposed=!1,this._problemProviderFactory=e.problemProviderFactory}get contentType(){return"judge"}get isDisposed(){return this._disposed}dispose(){this._disposed=!0}preferredLanguage(e){return"python"}createNew(t){return new e(this._problemProviderFactory(),t)}};class t extends N.YDocument{constructor(){super(),this._version="1.0.0",this._problemId=this.ydoc.getText("problem_id"),this._source=this.ydoc.getText("source"),this._outputs=this.ydoc.getArray("outputs"),this._metadata=this.ydoc.getMap("metadata"),this._ycodeCell=new s(this,this._source,this._outputs),this._problemId.observe((e=>{this._changed.emit({problemIdChange:this.problemId})})),this._ycodeCell.changed.connect(((e,t)=>{this._changed.emit(t)})),this.undoManager.addToScope(this._source),this.undoManager.addTrackedOrigin(this._ycodeCell)}dispose(){}get yCodeCell(){return this._ycodeCell}get problemId(){return this._problemId.toString()}set problemId(e){this.transact((()=>{const t=this._problemId;t.delete(0,t.length),t.insert(0,e)}))}get source(){var e;return null!==(e=this._ycodeCell.getSource())&&void 0!==e?e:""}set source(e){this._ycodeCell.setSource(e)}getMetadata(){return this._metadata.toJSON()}setMetadata(e,t){this._metadata.set(e,t)}get version(){return this._version}}e.YJudge=t;class s{constructor(e,t,s){this.id="",this.cell_type="code",this.execution_count=0,this.isStandalone=!0,this.notebook=null,this.metadata={},this.metadataChanged=new A.Signal(this),this._sourceObserver=e=>{this._changed.emit({sourceChange:e.changes.delta})},this._outputsObserver=e=>{this._changed.emit({outputsChange:e.changes.delta})},this._changed=new A.Signal(this),this._isDisposed=!1,this._disposed=new A.Signal(this),this._yjudge=e,this._source=t,this._outputs=s,this._source.observe(this._sourceObserver),this._outputs.observe(this._outputsObserver)}get changed(){return this._changed}get outputs(){return this.getOutputs()}getOutputs(){return this._outputs.toArray()}setOutputs(e){this.transact((()=>{this._outputs.delete(0,this._outputs.length),this._outputs.insert(0,e)}),!1)}updateOutputs(e,t,s){const n=t<this._outputs.length?t-e:this._outputs.length-e;this.transact((()=>{this._outputs.delete(e,n),this._outputs.insert(e,s)}),!1)}toJSON(){throw new Error("Method not implemented.")}getId(){return""}deleteMetadata(e){}getMetadata(e){return{}}setMetadata(e,t){}get source(){return this.getSource()}getSource(){return this._source.toString()}setSource(e){this.transact((()=>{const t=this._source;t.delete(0,t.length),t.insert(0,e)}))}updateSource(e,t,s=""){this.transact((()=>{const n=this._source;n.insert(e,s),n.delete(e+s.length,t-e)}))}undo(){this._yjudge.undo()}redo(){this._yjudge.redo()}canUndo(){return this._yjudge.canUndo()}canRedo(){return this._yjudge.canRedo()}clearUndoHistory(){this._yjudge.clearUndoHistory()}transact(e,t=!0){this._yjudge.ydoc.transact(e,t?this:null)}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,this._source.unobserve(this._sourceObserver),this._outputs.unobserve(this._outputsObserver),this._disposed.emit(),A.Signal.clearData(this))}get ysource(){return this._source}get awareness(){return this._yjudge.awareness}get undoManager(){return this._yjudge.undoManager}}e.newFileContent=async function(e,t){var s,n;const o={problem_id:t,code:null!==(n=null===(s=await e.getProblem(t))||void 0===s?void 0:s.skeletonCode)&&void 0!==n?n:"# 여기에 입력하세요",judge_format:1};return JSON.stringify(o)}}(M||(M={})),function(e){e.open=`${p}:plugin:open`,e.openOrCreateFromId=`${p}:plugin:open-or-create-from-id`,e.execute=`${p}:plugin:execute`,e.undo=`${p}:plugin:undo`,e.redo=`${p}:plugin:redo`,e.run=`${p}:plugin:run`,e.runAll=`${p}:plugin:run-all`}(k||(k={}));var D=s(6383),L=s(1497),W=s(7609),$=s(7930);const R=new $.Token(`${p}:IProblemProvider`),B=new $.Token(`${p}:IJudgePanelFactory`),K=new $.Token(`${p}:IJudgeSubmissionAreaFactory`),U=new $.Token(`${p}:IJudgeTerminalFactory`),z=new $.Token(`${p}:ISubmissionListFactory`),H=new $.Token(`${p}:IControlButtonFactory`),q=new $.Token(`${p}:IJudgeSignal`);class G{constructor(){this.problems={1:{id:"1",title:"덧셈",timeout:1,inputTransferType:"one_line",skeletonCode:"N = int(input())",content:"\n  # 덧셈\n  ## 문제\n  두 정수 A와 B를 입력받은 다음, A+B를 출력하는 프로그램을 작성하시오.\n  ## 입력\n  첫째 줄에 A와 B가 주어진다. (0 < A, B < 10)\n  ## 출력\n  첫째 줄에 A+B를 출력한다.\n          ",userId:null,testCases:["2 4","6 12","10000 21111","-1234 30"],outputs:["6","18","31111","-1204"]},2:{id:"2",title:"작은 별",timeout:1,inputTransferType:"one_line",skeletonCode:null,content:"\n  # 작은 별\n  ## 문제\n  정수 N을 입력받은 다음 다음과 같이 N줄의 별을 출력하는 프로그램을 작성하시오.\n  ## 입력\n  첫째 줄에 N이 주어진다. (0 < N < 10)\n  ## 출력\n  첫째 줄에는 별 1개, 둘째 줄에는 별 2개, ... N번째 줄에는 별 N개를 출력한다.\n          ",userId:null,testCases:["1","2","4","9"],outputs:["*","*\n**","*\n**\n***\n****","*\n**\n***\n****\n*****\n******\n*******\n********\n*********"]}},this._idToSubmissions={}}async getTestCases(e){return this.problems[e].testCases}async validate(e,t){const s=this.problems[e].outputs;return s.length!==t.length?null:{token:null,results:s.map(((e,s)=>e.trim()===t[s].trim()))}}async getProblem(e){return this.problems[e]}async getSubmissions(e){var t;return null!==(t=this._idToSubmissions[e])&&void 0!==t?t:[]}async submit(e){let t;void 0===this._idToSubmissions[e.problemId]&&(this._idToSubmissions[e.problemId]=[]),t=e.details.every((e=>"AC"===e.status))?"AC":e.details.some((e=>"RE"===e.status))?"RE":e.details.some((e=>"OLE"===e.status))?"OLE":e.details.some((e=>"TLE"===e.status))?"TLE":"WA";const s={...e,status:t,id:this._idToSubmissions[e.problemId].length.toString(),image:"",userId:"",createdAt:(new Date).toISOString(),acceptedCount:e.details.filter((e=>"AC"===e.status)).length,totalCount:e.details.length};return this._idToSubmissions[e.problemId].push(s),s}}var V=s(3848),Q=s(8149),Y=s.n(Q);function X(e){const t=(0,u.useContext)(Ee),{controlButtonFactory:s}=(0,u.useContext)(je),[n,o]=(0,u.useState)(!1);return c().createElement(Z,{className:e.className},c().createElement(s,{onClick:async()=>{o(!0);try{await e.panel.judge()}catch(s){let n="";if(n=s instanceof w?s.message:t.__("An error occurred during submission."),e.panel.model.submissionStatus={type:"error",errorDetails:n},o(!1),!(s instanceof v))throw s}o(!1)},disabled:n},t.__("Submit")))}const Z=Y().div`
  background: var(--jp-layout-color2);
`;function ee(e){const{children:t,onClick:s,disabled:n}=e;return c().createElement(te,{onClick:s,disabled:n},t)}const te=Y().button`
  display: block;
  margin-top: 12px;
  margin-left: 20px;
  margin-right: 20px;
  padding: 11px 17px;

  cursor: pointer;

  border: none;

  background: var(--jp-brand-color1);

  /* Shadow-2 */
  box-shadow:
    0px 0.15px 0.45px rgba(0, 0, 0, 0.11),
    0px 0.8px 1.8px rgba(0, 0, 0, 0.13);
  border-radius: 8px;

  font-family: var(--jp-ui-font-family);
  font-style: normal;
  font-weight: 700;
  font-size: 16px;
  line-height: 22px;
  /* identical to box height, or 138% */

  color: var(--jp-ui-inverse-font-color0);

  :disabled {
    background: var(--jp-layout-color3);
    cursor: not-allowed;
  }

  :not(:disabled):hover {
    background: var(--jp-brand-color0);
  }
`;var se=s(9281);function ne(e){const t=(0,u.useContext)(Ee);let s="",n="";switch(e.status){case"AC":s=`👍 ${t.__("Accepted")}`;break;case"WA":s=`❌ ${t.__("Wrong")}`,n=`(${e.acceptedCount}/${e.totalCount})`;break;case"RE":s=`🚫 ${t.__("Coding Error")}`;break;case"TLE":s=`🕓 ${t.__("Time Limit")}`;break;case"OLE":s=`👀 ${t.__("Output Limit")}`;break;case"IE":s=`☠ ${t.__("Please Try Again")}`}return c().createElement(oe,{className:e.className,title:n},s)}const oe=Y().span``;function ie(e){const t=(0,u.useContext)(Ee),s=new Date(e.submission.createdAt),n=new Date,o=s.getTime()>n.getTime()?se.Time.formatHuman(n):se.Time.formatHuman(s),i=se.Time.format(new Date(e.submission.createdAt));return c().createElement(re,{className:e.className},c().createElement(ae,{status:e.submission.status,acceptedCount:e.submission.acceptedCount,totalCount:e.submission.totalCount}),c().createElement(de,{onClick:()=>{e.setCode(e.submission.code)},title:e.submission.code.substring(0,1e3)},t.__("Load this submission")),c().createElement(le,{title:i},o))}const re=Y().li`
  display: flex;
  padding: 5px 12px;
  height: 16px;

  font-family: var(--jp-ui-font-family);
  font-style: normal;
  font-size: 12px;
  line-height: 16px;
`,ae=Y()(ne)`
  height: 16px;
  flex-grow: 0;
  flex-shrink: 0;

  width: 101px;
  margin-right: 8px;
`,de=Y().button`
  height: 16px;
  flex-grow: 0;
  flex-shrink: 0;

  all: unset;
  cursor: pointer;

  font-family: var(--jp-ui-font-family);
  font-style: normal;
  font-weight: 700;
  font-size: 12px;
  line-height: 16px;
  color: var(--jp-brand-color1);
`,le=Y().span`
  height: 16px;
  flex-grow: 1;
  flex-shrink: 1;

  text-align: right;

  font-family: var(--jp-ui-font-family);
  font-style: normal;
  font-weight: 400;
  font-size: 12px;
  line-height: 16px;

  color: var(--jp-ui-font-color3);
`,ue=Y().span``;function ce(e){return c().createElement(me,{className:e.className},c().createElement(he,{status:e.status}))}const me=Y().li`
  display: flex;
  padding: 5px 12px;
  height: 16px;

  font-family: var(--jp-ui-font-family);
  font-style: normal;
  font-size: 12px;
  line-height: 16px;
`,he=Y()((function(e){const{status:t}=e,s=(0,u.useContext)(Ee);return"idle"===t.type?c().createElement(c().Fragment,null):"error"===t.type?c().createElement(ue,{className:e.className},`🚫 ${t.errorDetails}`):c().createElement(ue,{className:e.className},0===t.totalCount?`⌛ ${s.__("In Progress")}`:`⌛ ${s.__("In Progress")} (${t.runCount}/${t.totalCount})`)}))`
  height: 16px;
  flex-grow: 0;
  flex-shrink: 0;

  margin-right: 8px;
`;function pe(e){const t=(0,V.useQueryClient)(),{submissionListFactory:s}=(0,u.useContext)(je);return c().createElement(o.UseSignal,{signal:e.model.problemChanged,initialSender:e.model,initialArgs:e.model.problem},((n,i)=>c().createElement(o.UseSignal,{signal:e.model.submissionsChanged,initialSender:e.model},((n,r)=>{var a;const d=null!==(a=null==i?void 0:i.id)&&void 0!==a?a:null;return d&&t.invalidateQueries(["submissions",d]),c().createElement(o.UseSignal,{signal:e.model.submissionStatusChanged,initialSender:e.model,initialArgs:e.model.submissionStatus},((t,n)=>c().createElement(s,{className:e.className,problemId:d,getSubmissions:async()=>{const t=await e.model.submissions();return null!=t?t:[]},setCode:t=>{e.model.source=t},submissionStatus:null!=n?n:null})))}))))}function ge(e){const t=(0,u.useContext)(Ee);if(null===e.problemId)return c().createElement(Ce,{className:e.className},"⌛ ",t.__("Loading History"));const{data:s,isLoading:n}=(0,V.useQuery)(["submissions",e.problemId],e.getSubmissions);if(n)return c().createElement(Ce,{className:e.className},"⌛ ",t.__("Loading History"));if(void 0===s)return c().createElement(Ce,{className:e.className},"🚫 ",t.__("History Not Available"));const o=e.submissionStatus&&"idle"===e.submissionStatus.type;return 0===s.length&&o?c().createElement(fe,{className:e.className},t.__("Submit your code to get results here.")):c().createElement(_e,{className:e.className},e.submissionStatus&&"idle"!==e.submissionStatus.type&&c().createElement(ye,{status:e.submissionStatus}),s.map((t=>c().createElement(be,{submission:t,key:t.id,setCode:e.setCode}))))}const _e=Y().ul`
  padding: 7px 0px 0px 0px;
  margin: 0px;

  overflow-y: auto;

  /* width */
  ::-webkit-scrollbar {
    width: 2px;
  }

  /* Handle */
  ::-webkit-scrollbar-thumb {
    background: var(--jp-border-color0);
    border-radius: 12px;
  }
`,be=Y()(ie)``,ye=Y()(ce)``,Ce=Y().div`
  text-align: center;
  padding: 5px;
  font-size: var(--jp-ui-font-size2);
`,fe=Y().div`
  padding: 12px;
  font-weight: 700;
  font-size: 12px;
  line-height: 16px;
  color: var(--jp-ui-font-color3);
`;function xe(e){const t=(0,u.useContext)(Ee);return null===e.model?c().createElement("div",null,t.__("No Submission History Found.")):c().createElement(we,null,c().createElement(ve,{model:e.model}),c().createElement(Se,{panel:e.panel}))}const we=Y().div`
  display: flex;
  border-top: 4px solid var(--jp-border-color0);
  font-size: var(--jp-ui-font-size1);

  height: 100%;
`,ve=Y()(pe)`
  flex-grow: 1;
  flex-shrink: 1;

  margin-right: 2px;
`,Se=Y()(X)`
  flex-grow: 0;
  flex-shrink: 0;
`,Ee=c().createContext(i.nullTranslator.load(m)),je=c().createContext({submissionListFactory:ge,controlButtonFactory:ee});class Ie extends o.ReactWidget{constructor(e){super(),this.queryClient=new V.QueryClient,this._panel=e.panel,this._model=e.model,this._trans=e.translator.load(m),this._submissionListFactory=e.submissionListFactory,this._controlButtonFactory=e.controlButtonFactory}render(){var e,t;return c().createElement(je.Provider,{value:{submissionListFactory:this._submissionListFactory,controlButtonFactory:this._controlButtonFactory}},c().createElement(Ee.Provider,{value:this._trans},c().createElement(V.QueryClientProvider,{client:this.queryClient},c().createElement(xe,{key:null!==(t=null===(e=this._model.problem)||void 0===e?void 0:e.id)&&void 0!==t?t:"",panel:this._panel,model:this._model}))))}}const Te="jp-OutputArea-output";class Fe extends l.OutputArea{constructor(e){super(e),this.addClass("jp-JudgeOutputArea");const t=e.translator.load(m),s=document.createElement("div");s.className="jp-JudgeOutputArea-placeholder",s.textContent=t.__("Execution result will be shown here"),this.node.appendChild(s)}createOutputItem(e){const t=this.createRenderedMimetype(e);return t&&t.addClass(Te),t}onInputRequest(e,t){const s=this.contentFactory,n=e.content.prompt,o=e.content.password,i=new _.Panel;i.addClass("jp-OutputArea-child"),i.addClass("jp-OutputArea-stdin-item");const r=s.createStdin({parent_header:e.header,prompt:n,password:o,future:t});r.addClass(Te),i.addWidget(r),this.layout.addWidget(i),r.value.then((e=>{this.model.add({output_type:"stream",name:"stdin",text:e+"\n"}),i.dispose()}))}}const ke=new r.LabIcon({name:"judge-icon:reset",svgstr:b.cornerUpLeftDoubleFillSvg});class Pe extends _.Panel{constructor(e){super(),this.addClass("jp-JudgeTerminal");const t=e.translator.load(m),s=new _.Widget,n=document.createElement("button");n.className="jp-JudgeTerminal-resetButton",ke.element({container:n});const o=n.children.item(0);o&&(o.classList.add("jp-icon3"),o.setAttribute("fill","FFFFFF"));const i=document.createElement("span");i.className="jp-JudgeTerminal-resetButtonLabel",i.textContent=t.__("Reset to skeleton code"),n.addEventListener("click",(()=>{var t;e.panel.model.problem&&e.panel.model.codeModel.sharedModel.setSource(null!==(t=e.panel.model.problem.skeletonCode)&&void 0!==t?t:"# 여기에 입력하세요.")})),n.appendChild(i);const a=document.createElement("div");a.className="jp-JudgeTerminal-seperator",s.addClass("jp-JudgeTerminal-toolbar");const d=document.createElement("button");d.className="jp-JudgeTerminal-executeButton",d.title=`${t.__("Execute")} (Shift+Enter)`,r.runIcon.element({container:d});const l=document.createElement("span");l.className="jp-JudgeTerminal-executeButtonLabel",l.textContent=t.__("Execute"),d.addEventListener("click",(async()=>{d.disabled=!0;try{await e.panel.execute()}catch(e){throw d.disabled=!1,e}d.disabled=!1})),d.appendChild(l);const u=document.createElement("div");u.className="jp-JudgeTerminal-seperator";const c=document.createElement("button");c.className="jp-JudgeTerminal-stopButton",r.stopIcon.element({container:c});const h=document.createElement("span");h.className="jp-JudgeTerminal-stopButtonLabel",h.textContent=t.__("Stop"),c.addEventListener("click",(async()=>{await e.panel.session.shutdown()})),c.appendChild(h),s.node.appendChild(n),s.node.appendChild(a),s.node.appendChild(d),s.node.appendChild(u),s.node.appendChild(c),this.addWidget(s),this._outputArea=new Fe(e),this.addWidget(this._outputArea)}get outputArea(){return this._outputArea}}const Ne=new A.Signal({}),Ae=new A.Signal({}),Je={id:`${p}:IJudgeSignal`,provides:q,activate:e=>({get submitted(){return Ne},get executed(){return Ae}}),autoStart:!0},Me=[{id:`${p}:plugin`,autoStart:!0,requires:[i.ITranslator,a.IEditorServices,y.IRenderMimeRegistry,D.IDocumentManager,L.IMainMenu,o.ICommandPalette,o.ISessionContextDialogs],optional:[B,K,U,z,H,R,W.ISettingRegistry,n.ILayoutRestorer],activate:async(e,t,s,n,i,r,a,d,l,u,c,h,p,g,_,b)=>{const y=t.load(m),C=new o.WidgetTracker({namespace:"judge"}),f=y.__("Judge");let x;x=_?(await _.load("@jupyterlab/notebook-extension:tracker")).get("codeCellConfig").composite:{};const w=new F({editorServices:s,rendermime:n,commands:e.commands,editorConfig:x,sessionContextDialogs:d,judgePanelFactory:null!=l?l:e=>new I(e),judgeSubmissionAreaFactory:null!=u?u:e=>new Ie(e),judgeTerminalFactory:null!=c?c:e=>new Pe(e),submissionListFactory:null!=h?h:ge,controlButtonFactory:null!=p?p:ee,submitted:Ne,executed:Ae,factoryOptions:{name:f,modelName:"judge-model",fileTypes:["judge"],defaultFor:["judge"],preferKernel:!0,canStartKernel:!0,shutdownOnClose:!0,translator:t}});w.widgetCreated.connect(((e,t)=>{t.context.pathChanged.connect((()=>{C.save(t)})),C.add(t)})),e.docRegistry.addWidgetFactory(w);const v=null!=g?g:new G;e.docRegistry.addModelFactory(new M.JudgeModelFactory({problemProviderFactory:()=>v})),e.docRegistry.addFileType({name:"judge",contentType:"file",fileFormat:"text",displayName:y.__("Judge File"),extensions:[".judge"],mimeTypes:["text/json","application/json"]}),function(e,t,s,n,o){e.addCommand(k.open,{execute:async e=>{s.openOrReveal(e.path)},label:t.__("Open Judge")}),e.addCommand(k.openOrCreateFromId,{execute:async e=>{e.problemId&&await O(o,s,e.problemId)},label:t.__("Open or Create Judge From Id")}),e.addCommand(k.execute,{execute:async e=>{n.currentWidget&&n.currentWidget.content.execute()},label:t.__("Execute")}),e.addCommand(k.redo,{execute:async()=>{n.currentWidget&&n.currentWidget.content.editor.redo()},label:t.__("Redo")}),e.addCommand(k.undo,{execute:async()=>{n.currentWidget&&n.currentWidget.content.editor.undo()},label:t.__("Undo")}),e.addCommand(k.run,{execute:async()=>{n.currentWidget&&n.currentWidget.content.execute()},label:t.__("Run")}),e.addCommand(k.runAll,{execute:async()=>{n.currentWidget&&n.currentWidget.content.execute()},label:t.__("Run All")})}(e.commands,y,i,C,v),function(e,t,s){!function(e){e.editMenu.undoers.undo.add({id:k.undo,isEnabled:e=>e instanceof T}),e.editMenu.undoers.redo.add({id:k.redo,isEnabled:e=>e instanceof T})}(e),function(e){e.runMenu.codeRunners.run.add({id:k.run,isEnabled:e=>e instanceof T}),e.runMenu.codeRunners.runAll.add({id:k.runAll,isEnabled:e=>e instanceof T})}(e)}(r),a.addItem({command:k.openOrCreateFromId,category:"Judge",args:{problemId:"1"}}),b&&b.restore(C,{command:k.open,args:e=>({path:e.context.path}),name:e=>e.context.path})}},Je]}}]);