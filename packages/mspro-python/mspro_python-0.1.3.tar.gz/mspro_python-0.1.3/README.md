# MsPro - FastAPI å¼‚æ­¥é¡¹ç›®é€šç”¨è„šæ‰‹æ¶

MsPro æ˜¯ä¸€ä¸ªåŸºäº **FastAPI å¼‚æ­¥æ¡†æ¶**
çš„é€šç”¨é¡¹ç›®è„šæ‰‹æ¶ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºå…·å¤‡å¥å£®æ¶æ„å’Œå¯æ‰©å±•æ€§çš„åç«¯æœåŠ¡ã€‚å®ƒå†…ç½®æ ‡å‡†å¼€å‘æ¨¡å—ï¼ˆCRUDã€æ•°æ®æ¨¡å‹ã€è·¯ç”±ã€æ•°æ®ç»“æ„ï¼‰ä¸ä¼ä¸šçº§æœ€ä½³å®è·µï¼Œè®©ä½ ä»ç¹æ‚çš„åŸºç¡€æ„å»ºä¸­è§£æ”¾å‡ºæ¥ï¼Œä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ã€‚

---

## âœ¨ é¡¹ç›®äº®ç‚¹

- ğŸš€ **å¼‚æ­¥æ¶æ„**ï¼šåŸºäº FastAPI å¼‚æ­¥æ¡†æ¶ï¼Œæ”¯æŒé«˜å¹¶å‘å¤„ç†ã€‚
- ğŸ§± **æ¨¡å—åŒ–ç»“æ„**ï¼šæ ‡å‡†åŒ–ç›®å½•ï¼ŒåŒ…å« `crud/`ã€`models/`ã€`routes/`ã€`schemas/` ç­‰æ ¸å¿ƒæ¨¡å—ã€‚
- ğŸ”’ **JWT é‰´æƒä½“ç³»**ï¼šå†…ç½®å®‰å…¨çš„ Token æˆæƒä¸ç”¨æˆ·è®¤è¯æœºåˆ¶ã€‚
- ğŸ§¬ **SQLModel æ•°æ®å»ºæ¨¡**ï¼šé‡‡ç”¨ SQLModel ç»Ÿä¸€ ORM æ¨¡å‹ä¸ Pydantic Schemaã€‚
- ğŸ“¦ **Pydantic V2.0 æ”¯æŒ**ï¼šæ–°ä¸€ä»£æ•°æ®æ ¡éªŒä½“ç³»ï¼Œæ›´å¿«æ›´å¼ºã€‚
- ğŸ”„ **å…¨é¢å¼ºå¤§çš„ CRUD å‡½æ•°**ï¼šæ”¯æŒåˆ—è¡¨/åˆ†é¡µ/æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆlike/in/betweenç­‰ï¼‰åŠèšåˆï¼ˆcount/max/avgç­‰ï¼‰æ“ä½œã€‚
- ğŸ“Š **æ—¥å¿—è·Ÿè¸ªç³»ç»Ÿ**ï¼šåŸºäº Python `logging` ä¼˜åŒ–é…ç½®ï¼Œä¾¿äºè°ƒè¯•å’Œç”Ÿäº§ç¯å¢ƒæ—¥å¿—åˆ†æã€‚
- âš™ï¸ **ä»£ç ç”Ÿæˆå™¨**ï¼šåŸºäºæ¨¡å‹å®šä¹‰ï¼Œå¯ä¸€é”®ç”Ÿæˆæ•´å¥— CRUD + Routes + Schemasã€‚
- ğŸ§° **ä¸°å¯Œçš„å·¥å…·å‡½æ•°**ï¼šåŒ…å«éšæœºæ•°ã€UUIDã€æ—¶é—´æˆ³è½¬æ¢ã€ç»Ÿä¸€æ ¼å¼å“åº”ç­‰å®ç”¨å·¥å…·ã€‚
- â±ï¸ **Celery å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—**ï¼šå†…å»ºå»¶è¿Ÿä»»åŠ¡å¤„ç†æœºåˆ¶ï¼Œé€‚ç”¨äºé‚®ä»¶ã€é€šçŸ¥ç­‰åœºæ™¯ã€‚
- ğŸ“§ **æ”¯æŒé‚®ä»¶å‘é€**ï¼šé›†æˆé‚®ä»¶æœåŠ¡ï¼Œå¯ç»“åˆå»¶è¿Ÿé˜Ÿåˆ—å®ç°å®šæ—¶/å¼‚æ­¥å‘é€ã€‚
- ğŸ› ï¸ **ä¸€é”®ç®¡ç†è„šæœ¬**ï¼šé›†æˆæœ¬åœ°æµ‹è¯•ã€å¼€å‘éƒ¨ç½²ã€æ•°æ®åº“åˆå§‹åŒ–ç­‰ä¸€é”®ç®¡ç†å‘½ä»¤ã€‚

---

## ğŸ“‚ é¡¹ç›®ç»“æ„æ€»è§ˆ

```
MsPro/
â”œâ”€â”€ alembic/                # æ•°æ®åº“å‡çº§/è¿ç§»
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ crud/               # CURD æ“ä½œ
â”‚   â”œâ”€â”€ models/             # SQLModel æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ routes/             # è·¯ç”±å…¥å£
â”‚   â”œâ”€â”€ schemas/            # Pydantic æ•°æ®ç»“æ„
â”‚   â”œâ”€â”€ tasks/              # å¼‚æ­¥ä»»åŠ¡è°ƒåº¦
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ main.py             # FastAPI åº”ç”¨å…¥å£
â”œâ”€â”€ logs/                   # æ—¥å¿—ç›®å½•
â”œâ”€â”€ module_generator.py     # æ¨¡å‹ç”Ÿæˆè„šæœ¬
â”œâ”€â”€ manage.sh               # æœ¬åœ°/éƒ¨ç½²ç¯å¢ƒä¸€é”®æ§åˆ¶è„šæœ¬
â”œâ”€â”€ .env                    # ç¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ requirements.txt        # ä¾èµ–åˆ—è¡¨
â””â”€â”€ README.md
```

---

## ğŸ“¦ å®‰è£…æ–¹å¼

### æ–¹å¼ä¸€ï¼šé€šè¿‡ pip å®‰è£…å¹¶åˆå§‹åŒ–é¡¹ç›®

```bash
pip install mspro-python
mspro-init my_project
```

è¿™å°†ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆåä¸º `my_project/` çš„å®Œæ•´é¡¹ç›®è„šæ‰‹æ¶ã€‚

---

## ğŸ”§ ä½¿ç”¨æŒ‡å—

1. é…ç½®.envåŠä¸€é”®ç®¡ç†è„šæœ¬manage.shï¼Œå¹¶æ·»åŠ å¯æ‰§è¡Œæƒé™:
   1. è°ƒæ•´é…ç½®
   ```bash
    # ==================== é…ç½®åŒºåŸŸ ====================
    SERVICE_NAME="ssl_manager"  # systemd æœåŠ¡åç§°
    APP_MODULE="app.main:app"   # FastAPI åº”ç”¨æ¨¡å—:å¯¹è±¡ï¼Œæ¯”å¦‚ app/main.py -> app
    HOST="0.0.0.0"
    PORT="8030"
    WORKERS=4
    VENV_DIR="venv"             # è™šæ‹Ÿç¯å¢ƒç›®å½•ï¼Œç›¸å¯¹è·¯å¾„
    RELOAD_DIR="app"            # çƒ­é‡è½½ç›‘å¬çš„ç›®å½•
    REQUIREMENTS_FILE="requirements.txt"  # é¡¹ç›®ä¾èµ–ç»„ç»‡æ–‡ä»¶åï¼Œç›¸å¯¹è·¯å¾„
    CELERY_MODULE="app.tasks.celery_task"  # Celery åº”ç”¨æ¨¡å—è·¯å¾„ï¼Œæœªè®¾ç½®åˆ™è·³è¿‡ Celery æ§åˆ¶
    # ==================================================
    ```
    2. æ·»åŠ æƒé™
    ```bash
    chmod +x manage.sh
    ```
    3. æŸ¥çœ‹è„šæœ¬å¸®åŠ©
    ```bash
    ./manage.sh
    ```

2. å®‰è£…ä¾èµ–ï¼š

```bash
cd my_project
python -m venv venv
./manage.sh setup
```

3. å¯åŠ¨å¼€å‘ç¯å¢ƒï¼š

```bash
./manage.sh test
```

4. ä½¿ç”¨ `module_generator.py` è‡ªåŠ¨ç”Ÿæˆæ¨¡å—ï¼š
    1. åˆ›å»ºå¯¹åº”æ•°æ®æ¨¡å‹app/models/Demo.py
    2. æ‰§è¡Œå‘½ä»¤ç”Ÿæˆæ¨¡å—æ–‡ä»¶
    ```bash
    # 2.æ‰§è¡Œå‘½ä»¤ç”Ÿæˆæ¨¡å—æ–‡ä»¶
    python module_generator.py Demo
    ```

5. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²/è¿ç»´ï¼š
    1. é€šè¿‡SFTPæˆ–CI/CDä¸Šä¼ é¡¹ç›®æ–‡ä»¶
    2. æ‰§è¡Œå‘½ä»¤
    ```bash
    # éƒ¨ç½²
    ./manage.sh build
    # è¿ç»´
    ./manage.sh start/stop/restart/upgrade
    ```

---

## ğŸ“š æœªæ¥è§„åˆ’ï¼ˆTODOï¼‰

- å¢åŠ éƒ¨ç½² Dockerfile å’Œ CI/CD æ”¯æŒ
- æä¾› PostgreSQLã€SQLite åˆ‡æ¢é…ç½®

---

## ğŸ§‘â€ğŸ’» ä½œè€…

ç”± [JENA] è®¾è®¡ä¸ç»´æŠ¤ã€‚æ¬¢è¿æäº¤ issue ä¸ PR ä¸€èµ·å…±å»ºå¼€æºç”Ÿæ€ã€‚

---

## ğŸ“„ License

æœ¬é¡¹ç›®éµå¾ª MIT Licenseï¼Œè¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚
