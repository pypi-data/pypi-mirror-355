(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4037:(e,s,t)=>{Promise.resolve().then(t.bind(t,8500))},8500:(e,s,t)=>{"use strict";t.d(s,{default:()=>eS});var a=t(5155),r=t(2115),n=t(2596),i=t(9688);function o(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,i.QP)((0,n.$)(s))}let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});l.displayName="Card";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:o("flex flex-col space-y-1.5 p-6",t),...r})});c.displayName="CardHeader";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:o("text-2xl font-semibold leading-none tracking-tight",t),...r})});d.displayName="CardTitle",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:o("text-sm text-muted-foreground",t),...r})}).displayName="CardDescription";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:o("p-6 pt-0",t),...r})});m.displayName="CardContent";let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:o("flex items-center p-6 pt-0",t),...r})});u.displayName="CardFooter";var h=t(2085);let x=(0,h.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),p=r.forwardRef((e,s)=>{let{className:t,variant:r,size:n,...i}=e;return(0,a.jsx)("button",{className:o(x({variant:r,size:n,className:t})),ref:s,...i})});p.displayName="Button";var v=t(5657),g=t(1007),f=t(9397),y=t(4355),j=t(9588),N=t(381);let b=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:o("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r})});b.displayName="Textarea";var w=t(7550),S=t(2432),C=t(4357),A=t(3904),k=t(4020),_=t(1951),T=t(2486);let P=t(9509).env.NEXT_PUBLIC_API_URL||"http://localhost:8000";class q{async request(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let t="".concat(this.baseUrl).concat(e),a=await fetch(t,{headers:{"Content-Type":"application/json",...s.headers},...s});return{data:await a.json(),status:a.status}}catch(e){return{error:e instanceof Error?e.message:"Unknown error",status:500}}}async sendChatMessage(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this.request("/api/v1/ai/chat",{method:"POST",body:JSON.stringify({message:e,model:s,stream:!1})})}async getModels(){return this.request("/api/v1/ai/models")}async loadModel(e){return this.request("/api/v1/ai/models/".concat(e,"/load"),{method:"POST"})}async unloadModel(e){return this.request("/api/v1/ai/models/".concat(e),{method:"DELETE"})}async startRecording(){return this.request("/api/v1/audio/record/start",{method:"POST"})}async stopRecording(){return this.request("/api/v1/audio/record/stop",{method:"POST"})}async transcribeAudio(e){let s=new FormData;return s.append("audio_file",e),this.request("/api/v1/audio/transcribe",{method:"POST",body:s,headers:{}})}async synthesizeSpeech(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this.request("/api/v1/audio/synthesize",{method:"POST",body:JSON.stringify({text:e,voice:s,speed:1,language:"en"})})}async getVoices(){return this.request("/api/v1/audio/voices")}async getAvatarStatus(){return this.request("/api/v1/avatar/status")}async setAvatarExpression(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.request("/api/v1/avatar/expression",{method:"POST",body:JSON.stringify({expression:e,intensity:s,duration:2})})}async triggerAvatarGesture(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.request("/api/v1/avatar/gesture",{method:"POST",body:JSON.stringify({gesture:e,speed:s,repeat:1})})}async makeAvatarSpeak(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"neutral";return this.request("/api/v1/avatar/speak",{method:"POST",body:JSON.stringify({text:e,lip_sync:!0,expression:s})})}async getCameraStatus(){return this.request("/api/v1/camera/status")}async captureImage(){return this.request("/api/v1/camera/capture",{method:"POST"})}async analyzeImage(e){let s=new FormData;return s.append("image_file",e),this.request("/api/v1/camera/analyze",{method:"POST",body:s,headers:{}})}async getRobots(){return this.request("/api/v1/robots")}async sendRobotCommand(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("/api/v1/robots/".concat(e,"/command"),{method:"POST",body:JSON.stringify({action:s,parameters:t,priority:"normal"})})}async getRobotStatus(e){return this.request("/api/v1/robots/".concat(e,"/status"))}async emergencyStop(e){return this.request("/api/v1/robots/".concat(e,"/emergency"),{method:"POST"})}async getConversations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.request("/api/v1/conversations?limit=".concat(e,"&offset=").concat(s))}async createConversation(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"phi-3-mini";return this.request("/api/v1/conversations",{method:"POST",body:JSON.stringify({title:e,model_name:s})})}async getConversation(e){return this.request("/api/v1/conversations/".concat(e))}async addMessageToConversation(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text";return this.request("/api/v1/conversations/".concat(e,"/messages"),{method:"POST",body:JSON.stringify({content:s,role:t,message_type:a})})}async getConversationMessages(e,s){let t=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=new URLSearchParams;return s&&a.set("limit",s.toString()),a.set("include_system",t.toString()),this.request("/api/v1/conversations/".concat(e,"/messages?").concat(a))}async updateConversationTitle(e,s){return this.request("/api/v1/conversations/".concat(e,"/title"),{method:"PUT",body:JSON.stringify({title:s})})}async deleteConversation(e){return this.request("/api/v1/conversations/".concat(e),{method:"DELETE"})}async searchConversations(e){return this.request("/api/v1/conversations/search",{method:"POST",body:JSON.stringify(e)})}async searchMessages(e){return this.request("/api/v1/conversations/messages/search",{method:"POST",body:JSON.stringify(e)})}async updateConversationMetadata(e,s){return this.request("/api/v1/conversations/".concat(e,"/metadata"),{method:"PUT",body:JSON.stringify(s)})}async updateMessageMetadata(e,s){return this.request("/api/v1/conversations/messages/".concat(e,"/metadata"),{method:"PUT",body:JSON.stringify(s)})}async bulkArchiveConversations(e){return this.request("/api/v1/conversations/bulk/archive",{method:"POST",body:JSON.stringify(e)})}async bulkDeleteConversations(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.request("/api/v1/conversations/bulk/delete",{method:"POST",body:JSON.stringify({conversation_ids:e,permanent:s})})}async exportConversations(e){return this.request("/api/v1/conversations/export",{method:"POST",body:JSON.stringify(e)})}async getConversationAnalytics(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,t=new URLSearchParams;return e&&t.set("conversation_id",e.toString()),t.set("days",s.toString()),this.request("/api/v1/conversations/analytics?".concat(t))}async getTags(){return this.request("/api/v1/conversations/tags")}async createTag(e){return this.request("/api/v1/conversations/tags",{method:"POST",body:JSON.stringify(e)})}async assignTagsToConversation(e,s){return this.request("/api/v1/conversations/tags/assign",{method:"POST",body:JSON.stringify({conversation_id:e,tag_names:s})})}async deleteTag(e){return this.request("/api/v1/conversations/tags/".concat(e),{method:"DELETE"})}async getUserPreferences(e){return this.request("/api/v1/users/".concat(e,"/preferences"))}async updateUserPreferences(e,s){return this.request("/api/v1/users/".concat(e,"/preferences"),{method:"PUT",body:JSON.stringify(s)})}async resetUserPreferences(e){return this.request("/api/v1/users/".concat(e,"/preferences/reset"),{method:"POST"})}async getModelSettings(e,s){return this.request("/api/v1/users/".concat(e,"/model-settings").concat(s?"?model_name=".concat(s):""))}async updateModelSettings(e,s,t){return this.request("/api/v1/users/".concat(e,"/model-settings/").concat(s),{method:"PUT",body:JSON.stringify(t)})}async deleteModelSettings(e,s){return this.request("/api/v1/users/".concat(e,"/model-settings/").concat(s),{method:"DELETE"})}async getConversationTemplates(e,s){let t=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=new URLSearchParams;return s&&a.set("category",s),a.set("include_public",t.toString()),this.request("/api/v1/users/".concat(e,"/templates?").concat(a))}async createConversationTemplate(e,s){return this.request("/api/v1/users/".concat(e,"/templates"),{method:"POST",body:JSON.stringify(s)})}async updateConversationTemplate(e,s,t){return this.request("/api/v1/users/".concat(e,"/templates/").concat(s),{method:"PUT",body:JSON.stringify(t)})}async deleteConversationTemplate(e,s){return this.request("/api/v1/users/".concat(e,"/templates/").concat(s),{method:"DELETE"})}async useConversationTemplate(e,s){return this.request("/api/v1/users/".concat(e,"/templates/").concat(s,"/use"),{method:"POST"})}async getAPIKeys(e){return this.request("/api/v1/users/".concat(e,"/api-keys"))}async storeAPIKey(e,s){return this.request("/api/v1/users/".concat(e,"/api-keys"),{method:"POST",body:JSON.stringify(s)})}async deleteAPIKey(e,s){return this.request("/api/v1/users/".concat(e,"/api-keys/").concat(s),{method:"DELETE"})}async getAvailableModels(){return this.request("/api/v1/models/available")}async getModelInfo(e){return this.request("/api/v1/models/".concat(e,"/info"))}async downloadModel(e){return this.request("/api/v1/models/".concat(e,"/download"),{method:"POST"})}async getDownloadProgress(e){return this.request("/api/v1/models/".concat(e,"/download/progress"))}async deleteModel(e){return this.request("/api/v1/models/".concat(e),{method:"DELETE"})}async getCacheInfo(){return this.request("/api/v1/models/cache/info")}async clearModelCache(){return this.request("/api/v1/models/cache/clear",{method:"POST"})}async healthCheck(){return this.request("/health")}createWebSocket(e){let s=this.baseUrl.replace("http://","ws://").replace("https://","wss://");return new WebSocket("".concat(s).concat(e))}async createStreamingChat(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"phi-3-mini",a=this.createWebSocket("/ws/chat/".concat(e));return a.onopen=()=>{a.send(JSON.stringify({type:"message",content:s,model:t}))},a}constructor(e=P){this.baseUrl=e}}let O=new q;var E=t(9509);class R{connect(){return new Promise((e,s)=>{try{this.ws=new WebSocket(this.url),this.ws.onopen=()=>{console.log("WebSocket connected to:",this.url),this.reconnectAttempts=0,e()},this.ws.onmessage=e=>{try{let s=JSON.parse(e.data);this.handleMessage(s)}catch(e){console.error("Failed to parse WebSocket message:",e)}},this.ws.onclose=()=>{console.log("WebSocket disconnected"),this.handleReconnect()},this.ws.onerror=e=>{console.error("WebSocket error:",e),s(e)}}catch(e){s(e)}})}disconnect(){this.ws&&(this.ws.close(),this.ws=null)}send(e){this.ws&&this.ws.readyState===WebSocket.OPEN?this.ws.send(JSON.stringify(e)):console.warn("WebSocket not connected, cannot send message:",e)}on(e,s){this.eventHandlers.has(e)||this.eventHandlers.set(e,[]),this.eventHandlers.get(e).push(s)}off(e,s){let t=this.eventHandlers.get(e);if(t){let e=t.indexOf(s);e>-1&&t.splice(e,1)}}handleMessage(e){let s=this.eventHandlers.get(e.type);s&&s.forEach(s=>s(e));let t=this.eventHandlers.get("message");t&&t.forEach(s=>s(e))}handleReconnect(){this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,console.log("Attempting to reconnect... (".concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts,")")),setTimeout(()=>{this.connect().catch(e=>{console.error("Reconnection failed:",e)})},this.reconnectInterval*this.reconnectAttempts)):console.error("Max reconnection attempts reached")}get isConnected(){var e;return(null==(e=this.ws)?void 0:e.readyState)===WebSocket.OPEN}constructor(e){this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectInterval=1e3,this.eventHandlers=new Map,this.url=e}}let M=E.env.NEXT_PUBLIC_WS_URL||"ws://localhost:8000",z=new R("".concat(M,"/ws/chat/user123"));new R("".concat(M,"/ws/audio/user123")),new R("".concat(M,"/ws/camera"));let F=new R("".concat(M,"/ws/robot/robot_001")),U=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:o("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n})});U.displayName="Input";let J=(0,h.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function D(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:o(J({variant:t}),s),...r})}var I=t(8018),L=t(6474),W=t(7863),B=t(5196);let H=I.bL;I.YJ;let K=I.WT,V=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(I.l9,{ref:s,className:o("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[r,(0,a.jsx)(I.In,{asChild:!0,children:(0,a.jsx)(L.A,{className:"h-4 w-4 opacity-50"})})]})});V.displayName=I.l9.displayName;let G=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(I.PP,{ref:s,className:o("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(W.A,{className:"h-4 w-4"})})});G.displayName=I.PP.displayName;let Y=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(I.wn,{ref:s,className:o("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(L.A,{className:"h-4 w-4"})})});Y.displayName=I.wn.displayName;let X=r.forwardRef((e,s)=>{let{className:t,children:r,position:n="popper",...i}=e;return(0,a.jsx)(I.ZL,{children:(0,a.jsxs)(I.UC,{ref:s,className:o("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,a.jsx)(G,{}),(0,a.jsx)(I.LM,{className:o("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(Y,{})]})})});X.displayName=I.UC.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(I.JU,{ref:s,className:o("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=I.JU.displayName;let Z=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(I.q7,{ref:s,className:o("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(I.VF,{children:(0,a.jsx)(B.A,{className:"h-4 w-4"})})}),(0,a.jsx)(I.p4,{children:r})]})});Z.displayName=I.q7.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(I.wv,{ref:s,className:o("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=I.wv.displayName;var Q=t(8235);let $=Q.bL;Q.R6;let ee=Q.Ke;var es=t(1497),et=t(6932),ea=t(4616),er=t(7924),en=t(9022),ei=t(9963),eo=t(4416),el=t(4186),ec=t(9074),ed=t(5448),em=t(5213),eu=t(5488),eh=t(3332),ex=t(8564),ep=t(4940),ev=t(2525);function eg(e){let{currentConversation:s,onConversationSelect:t,onNewConversation:n}=e,[i,o]=(0,r.useState)([]),[u,h]=(0,r.useState)(""),[x,f]=(0,r.useState)(!1),[y,j]=(0,r.useState)(null),[N,b]=(0,r.useState)(""),[w,S]=(0,r.useState)([]),[C,A]=(0,r.useState)([]),[k,_]=(0,r.useState)(!1),[T,P]=(0,r.useState)(!1),[q,E]=(0,r.useState)({tags:[],isArchived:!1}),[R,M]=(0,r.useState)({field:"updated_at",order:"desc"});(0,r.useEffect)(()=>{z(),F()},[]),(0,r.useEffect)(()=>{J()},[u,q,R]);let z=async()=>{f(!0);try{let e=await O.getConversations(50,0);e.data&&o(e.data)}catch(e){console.error("Failed to load conversations:",e)}finally{f(!1)}},F=async()=>{try{let e=await O.getTags();e.data&&S(e.data)}catch(e){console.error("Failed to load tags:",e)}},J=async()=>{f(!0);try{let e={query:u||void 0,tags:q.tags.length>0?q.tags:void 0,category:q.category,model_name:q.modelName,date_from:q.dateFrom,date_to:q.dateTo,is_pinned:q.isPinned,is_archived:q.isArchived,min_messages:q.minMessages,max_messages:q.maxMessages,sort_by:R.field,sort_order:R.order,limit:50,offset:0},s=await O.searchConversations(e);s.data&&o(s.data)}catch(e){console.error("Failed to search conversations:",e)}finally{f(!1)}},I=async e=>{try{let s=await O.getConversation(e.id);s.data&&t(s.data)}catch(e){console.error("Failed to load conversation:",e)}},L=async(e,t)=>{if(t.stopPropagation(),confirm("Are you sure you want to delete this conversation?"))try{await O.deleteConversation(e),o(s=>s.filter(s=>s.id!==e)),s===e&&n()}catch(e){console.error("Failed to delete conversation:",e)}},W=async(e,s)=>{if(s.trim())try{await O.updateConversationTitle(e,s),o(t=>t.map(t=>t.id===e?{...t,title:s}:t)),j(null),b("")}catch(e){console.error("Failed to update conversation title:",e)}},B=async(e,s)=>{s.stopPropagation();try{let s=i.find(s=>s.id===e);if(!s)return;await O.updateConversationMetadata(e,{is_pinned:!s.is_pinned}),o(s=>s.map(s=>s.id===e?{...s,is_pinned:!s.is_pinned}:s))}catch(e){console.error("Failed to pin conversation:",e)}},G=async(e,s)=>{s.stopPropagation();try{let s=i.find(s=>s.id===e);if(!s)return;await O.updateConversationMetadata(e,{is_archived:!s.is_archived}),T?o(s=>s.map(s=>s.id===e?{...s,is_archived:!s.is_archived}:s)):o(s=>s.filter(s=>s.id!==e))}catch(e){console.error("Failed to archive conversation:",e)}},Y=()=>{E({tags:[],isArchived:!1}),A([]),h("")},Q=e=>{let s=C.includes(e)?C.filter(s=>s!==e):[...C,e];A(s),E(e=>({...e,tags:s}))},eg=e=>{M(s=>({field:e,order:s.field===e&&"desc"===s.order?"asc":"desc"}))},ef=(e,s)=>{s.stopPropagation(),j(e.id),b(e.title)},ey=e=>{let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/864e5);return 0===t?s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):1===t?"Yesterday":t<7?"".concat(t," days ago"):s.toLocaleDateString()},ej=e=>e?1===e?"1 message":"".concat(e," messages"):"";return(0,a.jsxs)(l,{className:"h-full flex flex-col",children:[(0,a.jsxs)(c,{className:"pb-3",children:[(0,a.jsxs)(d,{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(es.A,{className:"h-5 w-5"}),"Conversations"]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(p,{size:"sm",variant:"ghost",onClick:()=>_(!k),className:"h-8 w-8 p-0",children:(0,a.jsx)(et.A,{className:"h-4 w-4"})}),(0,a.jsx)(p,{size:"sm",onClick:n,className:"h-8 w-8 p-0",children:(0,a.jsx)(ea.A,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(er.A,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(U,{placeholder:"Search conversations...",value:u,onChange:e=>h(e.target.value),className:"pl-9"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,a.jsxs)(p,{size:"sm",variant:T?"default":"outline",onClick:()=>{P(!T),E(e=>({...e,isArchived:!T}))},className:"h-6 px-2",children:[(0,a.jsx)(en.A,{className:"h-3 w-3 mr-1"}),"Archived"]}),(0,a.jsxs)(p,{size:"sm",variant:q.isPinned?"default":"outline",onClick:()=>E(e=>({...e,isPinned:!e.isPinned})),className:"h-6 px-2",children:[(0,a.jsx)(ei.A,{className:"h-3 w-3 mr-1"}),"Pinned"]})]}),C.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[C.map(e=>(0,a.jsxs)(D,{variant:"secondary",className:"text-xs h-5 px-2 cursor-pointer",onClick:()=>Q(e),children:[e,(0,a.jsx)(eo.A,{className:"h-3 w-3 ml-1"})]},e)),(0,a.jsx)(p,{size:"sm",variant:"ghost",onClick:Y,className:"h-5 px-2 text-xs",children:"Clear all"})]}),(0,a.jsx)($,{open:k,onOpenChange:_,children:(0,a.jsxs)(ee,{className:"space-y-3 pt-2 border-t",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-muted-foreground mb-2 block",children:"Sort by"}),(0,a.jsx)("div",{className:"flex gap-1",children:[{field:"updated_at",label:"Recent",icon:el.A},{field:"created_at",label:"Created",icon:ec.A},{field:"message_count",label:"Messages",icon:ed.A},{field:"title",label:"Title",icon:em.A}].map(e=>{let{field:s,label:t,icon:r}=e;return(0,a.jsxs)(p,{size:"sm",variant:R.field===s?"default":"outline",onClick:()=>eg(s),className:"h-6 px-2 text-xs flex-1",children:[(0,a.jsx)(r,{className:"h-3 w-3 mr-1"}),t,R.field===s&&("desc"===R.order?(0,a.jsx)(eu.A,{className:"h-3 w-3 ml-1"}):(0,a.jsx)(em.A,{className:"h-3 w-3 ml-1"}))]},s)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-muted-foreground mb-2 block",children:"Category"}),(0,a.jsxs)(H,{value:q.category||"",onValueChange:e=>E(s=>({...s,category:e||void 0})),children:[(0,a.jsx)(V,{className:"h-8 text-xs",children:(0,a.jsx)(K,{placeholder:"All categories"})}),(0,a.jsxs)(X,{children:[(0,a.jsx)(Z,{value:"",children:"All categories"}),(0,a.jsx)(Z,{value:"work",children:"Work"}),(0,a.jsx)(Z,{value:"personal",children:"Personal"}),(0,a.jsx)(Z,{value:"research",children:"Research"}),(0,a.jsx)(Z,{value:"coding",children:"Coding"}),(0,a.jsx)(Z,{value:"creative",children:"Creative"})]})]})]}),w.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-muted-foreground mb-2 block",children:"Tags"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 max-h-20 overflow-y-auto",children:w.map(e=>(0,a.jsxs)(D,{variant:C.includes(e.name)?"default":"outline",className:"text-xs h-5 px-2 cursor-pointer",onClick:()=>Q(e.name),style:{backgroundColor:C.includes(e.name)?e.color:void 0},children:[(0,a.jsx)(eh.A,{className:"h-3 w-3 mr-1"}),e.name]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-muted-foreground mb-2 block",children:"Model"}),(0,a.jsxs)(H,{value:q.modelName||"",onValueChange:e=>E(s=>({...s,modelName:e||void 0})),children:[(0,a.jsx)(V,{className:"h-8 text-xs",children:(0,a.jsx)(K,{placeholder:"All models"})}),(0,a.jsxs)(X,{children:[(0,a.jsx)(Z,{value:"",children:"All models"}),(0,a.jsx)(Z,{value:"phi-3-mini",children:"Phi-3 Mini"}),(0,a.jsx)(Z,{value:"llama-3-8b",children:"Llama 3 8B"}),(0,a.jsx)(Z,{value:"mistral-7b",children:"Mistral 7B"}),(0,a.jsx)(Z,{value:"gemma-2b",children:"Gemma 2B"})]})]})]}),(0,a.jsx)(p,{size:"sm",variant:"outline",onClick:Y,className:"w-full h-6 text-xs",children:"Clear All Filters"})]})})]})]}),(0,a.jsx)(m,{className:"flex-1 overflow-y-auto space-y-2 px-3",children:x?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading conversations..."})}):0===i.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,a.jsx)(es.A,{className:"h-12 w-12 text-muted-foreground/50 mb-3"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:u?"No conversations found":"No conversations yet"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:u?"Try a different search term":"Start a new conversation to get started"})]}):i.map(e=>(0,a.jsx)("div",{className:"group cursor-pointer rounded-lg border p-3 hover:bg-accent transition-colors ".concat(s===e.id?"bg-accent border-primary":""," ").concat(e.is_pinned?"border-yellow-300 bg-yellow-50/50":""," ").concat(e.is_archived?"opacity-60":""),onClick:()=>I(e),children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[e.is_pinned&&(0,a.jsx)(ei.A,{className:"h-3 w-3 text-yellow-600"}),e.is_archived&&(0,a.jsx)(en.A,{className:"h-3 w-3 text-gray-500"}),e.priority>0&&(0,a.jsx)(ex.A,{className:"h-3 w-3 text-orange-500"}),e.category&&(0,a.jsx)(D,{variant:"outline",className:"text-xs h-4 px-1",children:e.category})]}),y===e.id?(0,a.jsx)(U,{value:N,onChange:e=>b(e.target.value),onBlur:()=>W(e.id,N),onKeyPress:s=>{"Enter"===s.key?W(e.id,N):"Escape"===s.key&&(j(null),b(""))},className:"h-6 text-sm",autoFocus:!0,onClick:e=>e.stopPropagation()}):(0,a.jsx)("h4",{className:"font-medium text-sm truncate",children:e.title}),e.description&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(el.A,{className:"h-3 w-3"}),ey(e.updated_at)]}),void 0!==e.message_count&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(g.A,{className:"h-3 w-3"}),(0,a.jsx)(v.A,{className:"h-3 w-3 -ml-1"})]}),ej(e.message_count)]}),e.avg_response_time>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(el.A,{className:"h-3 w-3"}),e.avg_response_time.toFixed(1),"s"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Model: ",e.model_name]}),e.color&&(0,a.jsx)("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:e.color}})]}),e.tags&&e.tags.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map(e=>(0,a.jsx)(D,{variant:"secondary",className:"text-xs h-4 px-1",style:{backgroundColor:e.color},children:e.name},e.id)),e.tags.length>3&&(0,a.jsxs)(D,{variant:"outline",className:"text-xs h-4 px-1",children:["+",e.tags.length-3]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)(p,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:s=>B(e.id,s),title:e.is_pinned?"Unpin":"Pin",children:(0,a.jsx)(ei.A,{className:"h-3 w-3 ".concat(e.is_pinned?"text-yellow-600":"")})}),(0,a.jsx)(p,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:s=>G(e.id,s),title:e.is_archived?"Unarchive":"Archive",children:(0,a.jsx)(en.A,{className:"h-3 w-3 ".concat(e.is_archived?"text-gray-500":"")})}),(0,a.jsx)(p,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:s=>ef(e,s),title:"Edit title",children:(0,a.jsx)(ep.A,{className:"h-3 w-3"})}),(0,a.jsx)(p,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-destructive hover:text-destructive",onClick:s=>L(e.id,s),title:"Delete",children:(0,a.jsx)(ev.A,{className:"h-3 w-3"})})]})]})},e.id))})]})}function ef(e){let{onNavigate:s}=e,[t,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(""),[h,x]=(0,r.useState)(!1),[P,q]=(0,r.useState)(!1),[E,R]=(0,r.useState)("phi-3-mini"),[M,F]=(0,r.useState)(!1),[U,J]=(0,r.useState)(null),[D,I]=(0,r.useState)(null),[L,W]=(0,r.useState)(!0),[B]=(0,r.useState)("1"),H=(0,r.useRef)(null);(0,r.useEffect)(()=>((async()=>{try{await z.connect(),F(!0)}catch(e){console.error("WebSocket connection failed:",e),F(!1)}})(),z.on("conversation_created",e=>{let s=e.data;s.conversation_id&&(J(s.conversation_id),console.log("New conversation created: ".concat(s.conversation_id)))}),z.on("ai_response_start",e=>{let s=e.data;n(e=>[...e,{id:Date.now().toString(),role:"assistant",content:"",timestamp:new Date,conversationId:s.conversation_id}])}),z.on("ai_response_token",e=>{let s=e.data;n(e=>{let t=[...e],a=t[t.length-1];return a&&"assistant"===a.role&&(a.content+=s.token||""),t})}),z.on("ai_response_complete",e=>{x(!1);let s=e.data;console.log("AI response completed. Tokens used: ".concat(s.tokens_used,", Model: ").concat(s.model))}),z.on("ai_response_error",e=>{x(!1);let s=e.data;n(e=>[...e,{id:Date.now().toString(),role:"assistant",content:"Error: ".concat(s.error||"Unknown error occurred"),timestamp:new Date}])}),()=>{z.disconnect()}),[B]),(0,r.useEffect)(()=>{var e;null==(e=H.current)||e.scrollIntoView({behavior:"smooth"})},[t]);let K=async e=>{if(!e.trim())return;let s={id:Date.now().toString(),role:"user",content:e,timestamp:new Date,conversationId:U||void 0};n(e=>[...e,s]),o(""),x(!0);try{if(M)z.send({type:"chat",data:{message:e,model:E,conversation_id:U}});else{let s=U;if(!s){let e=await O.createConversation(void 0,E);e.data&&(s=e.data.id,J(s))}s&&await O.addMessageToConversation(s,e,"user");let a=await O.sendChatMessage(e,E);if(a.data&&(n(e=>{var t;return[...e,{id:(Date.now()+1).toString(),role:"assistant",content:(null==(t=a.data)?void 0:t.response)||"No response",timestamp:new Date,conversationId:null!=s?s:void 0}]}),s)){var t;await O.addMessageToConversation(s,(null==(t=a.data)?void 0:t.response)||"No response","assistant")}x(!1)}}catch(e){console.error("Failed to send message:",e),x(!1)}},V=async()=>{if(P){q(!1);try{await O.stopRecording()}catch(e){console.error("Failed to stop recording:",e)}}else{q(!0);try{await O.startRecording()}catch(e){console.error("Failed to start recording:",e),q(!1)}}},G=e=>{navigator.clipboard.writeText(e)},Y=async e=>{if(e<1)return;let s=t[e-1];"user"===s.role&&(n(s=>s.slice(0,e)),await K(s.content))},X=e=>e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[L&&(0,a.jsx)("div",{className:"w-80 border-r",children:(0,a.jsx)(eg,{currentConversation:U,onConversationSelect:e=>{I(e),J(e.id),n(e.messages.map(s=>({id:s.id.toString(),role:s.role,content:s.content,timestamp:new Date(s.created_at),conversationId:e.id,metadata:s.metadata}))),R(e.model_name)},onNewConversation:()=>{n([]),J(null),I(null)}})}),(0,a.jsx)("div",{className:"flex-1 flex flex-col",children:(0,a.jsxs)(l,{className:"h-full flex flex-col border-0 rounded-none",children:[(0,a.jsxs)(c,{className:"border-b",children:[(0,a.jsxs)(d,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[s&&(0,a.jsx)(p,{variant:"ghost",size:"sm",onClick:()=>s("dashboard"),children:(0,a.jsx)(w.A,{className:"h-4 w-4"})}),(0,a.jsx)(p,{variant:"ghost",size:"sm",onClick:()=>W(!L),children:(0,a.jsx)(S.A,{className:"h-4 w-4"})}),(0,a.jsx)("span",{children:D?D.title:"AI Chat Assistant"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p,{variant:"ghost",size:"sm",onClick:()=>s("avatar"),title:"Avatar Control",children:(0,a.jsx)(g.A,{className:"h-4 w-4"})}),(0,a.jsx)(p,{variant:"ghost",size:"sm",onClick:()=>s("robot"),title:"Robot Control",children:(0,a.jsx)(f.A,{className:"h-4 w-4"})}),(0,a.jsx)(p,{variant:"ghost",size:"sm",onClick:()=>s("camera"),title:"Camera Control",children:(0,a.jsx)(y.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(M?"bg-green-500":"bg-red-500")}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:M?"Connected":"Disconnected"}),(0,a.jsx)(p,{variant:"ghost",size:"sm",children:(0,a.jsx)(N.A,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("select",{value:E,onChange:e=>R(e.target.value),className:"text-sm border rounded px-2 py-1",children:[(0,a.jsx)("option",{value:"phi-3-mini",children:"Phi-3 Mini"}),(0,a.jsx)("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"}),(0,a.jsx)("option",{value:"llama-2-7b-chat",children:"Llama 2 7B Chat"})]}),D&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[D.messages.length," messages"]})]})]}),(0,a.jsxs)(m,{className:"flex-1 overflow-y-auto space-y-4 p-4",children:[0===t.length&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[(0,a.jsx)(v.A,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Start a conversation"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Ask me anything! I'm here to help with your questions and tasks."})]}),t.map((e,s)=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"group max-w-[80%] rounded-lg px-4 py-3 ".concat("user"===e.role?"bg-primary text-primary-foreground":"bg-muted"),children:[(0,a.jsxs)("div",{className:"flex items-start gap-2 mb-2",children:["user"===e.role?(0,a.jsx)(g.A,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}):(0,a.jsx)(v.A,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:e.content})}),(0,a.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[(0,a.jsx)(p,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>G(e.content),children:(0,a.jsx)(C.A,{className:"h-3 w-3"})}),"assistant"===e.role&&(0,a.jsx)(p,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>Y(s),children:(0,a.jsx)(A.A,{className:"h-3 w-3"})}),(0,a.jsx)(p,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",children:(0,a.jsx)(k.A,{className:"h-3 w-3"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-xs opacity-70",children:X(e.timestamp)}),e.conversationId&&(0,a.jsxs)("p",{className:"text-xs opacity-50",children:["Conv #",e.conversationId]})]})]})},e.id)),h&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)("div",{className:"bg-muted rounded-lg px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(v.A,{className:"h-4 w-4"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),(0,a.jsx)("span",{className:"text-sm",children:"AI is thinking..."})]})]})})}),(0,a.jsx)("div",{ref:H})]}),(0,a.jsx)(u,{className:"border-t p-4",children:(0,a.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,a.jsx)(p,{variant:P?"destructive":"outline",size:"icon",onClick:V,children:P?(0,a.jsx)(_.A,{className:"h-4 w-4"}):(0,a.jsx)(j.A,{className:"h-4 w-4"})}),(0,a.jsx)(b,{value:i,onChange:e=>o(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),K(i))},placeholder:"Type your message...",className:"flex-1 min-h-0 resize-none",rows:1}),(0,a.jsx)(p,{onClick:()=>K(i),disabled:!i.trim()||h,children:(0,a.jsx)(T.A,{className:"h-4 w-4"})})]})})]})})]})}var ey=t(5690),ej=t(133);function eN(){let[e,s]=(0,r.useState)(null),[t,n]=(0,r.useState)("neutral"),[i,o]=(0,r.useState)("wave"),[u,h]=(0,r.useState)(""),[x,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{g()},[]);let g=async()=>{try{let e=await O.getAvatarStatus();e.data&&s(e.data)}catch(e){console.error("Failed to load avatar status:",e)}},f=async()=>{if(t){v(!0);try{var e;(null==(e=(await O.setAvatarExpression(t,1)).data)?void 0:e.status)==="success"&&g()}catch(e){console.error("Failed to set expression:",e)}finally{v(!1)}}},y=async()=>{if(i){v(!0);try{var e;(null==(e=(await O.triggerAvatarGesture(i,1)).data)?void 0:e.status)==="success"&&g()}catch(e){console.error("Failed to trigger gesture:",e)}finally{v(!1)}}},j=async()=>{if(u.trim()){v(!0);try{var e;(null==(e=(await O.makeAvatarSpeak(u,t)).data)?void 0:e.status)==="success"&&(g(),h(""))}catch(e){console.error("Failed to make avatar speak:",e)}finally{v(!1)}}},N=async()=>{v(!0);try{await O.setAvatarExpression("neutral",1),await g()}catch(e){console.error("Failed to reset avatar:",e)}finally{v(!1)}};return(0,a.jsxs)(l,{children:[(0,a.jsx)(c,{children:(0,a.jsxs)(d,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Avatar Control"}),(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat((null==e?void 0:e.active)?"bg-green-500":"bg-gray-400")})]})}),(0,a.jsxs)(m,{className:"space-y-6",children:[e&&(0,a.jsx)("div",{className:"bg-muted p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Expression:"})," ",e.current_expression]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Gesture:"})," ",e.current_gesture]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Speaking:"})," ",e.speaking?"Yes":"No"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Position:"})," X:".concat(e.position.x," Y:").concat(e.position.y," Z:").concat(e.position.z)]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"Expression"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("select",{value:t,onChange:e=>n(e.target.value),className:"flex-1 border rounded px-3 py-2",children:["neutral","happy","sad","angry","surprised","confused","thinking","excited","calm"].map(e=>(0,a.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,a.jsx)(p,{onClick:f,disabled:x,children:(0,a.jsx)(ey.A,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"Gesture"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("select",{value:i,onChange:e=>o(e.target.value),className:"flex-1 border rounded px-3 py-2",children:["wave","nod","shake_head","point","thumbs_up","shrug","clap","peace_sign","thinking_pose"].map(e=>(0,a.jsx)("option",{value:e,children:e.replace("_"," ").charAt(0).toUpperCase()+e.replace("_"," ").slice(1)},e))}),(0,a.jsx)(p,{onClick:y,disabled:x,children:(0,a.jsx)(ey.A,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"Speech"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(U,{value:u,onChange:e=>h(e.target.value),placeholder:"Enter text for avatar to speak...",className:"flex-1"}),(0,a.jsx)(p,{onClick:j,disabled:x||!u.trim(),children:(0,a.jsx)(ey.A,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(p,{onClick:N,variant:"outline",disabled:x,children:[(0,a.jsx)(ej.A,{className:"h-4 w-4 mr-2"}),"Reset Avatar"]})})]})]})}var eb=t(1243);function ew(){let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)(""),[i,o]=(0,r.useState)("move_to"),[u,h]=(0,r.useState)(""),[x,v]=(0,r.useState)(!1),[g,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>(y(),F.connect().then(()=>{f(!0)}).catch(console.error),F.on("robot_status",e=>{let t=e.data;s(e=>e.map(e=>e.id===t.robot_id?{...e,status:t.status||e.status,position:t.position||e.position}:e))}),()=>{F.disconnect()}),[]);let y=async()=>{try{let e=await O.getRobots();e.data&&Array.isArray(e.data)&&(s(e.data),e.data.length>0&&n(e.data[0].id))}catch(e){console.error("Failed to load robots:",e)}},j=async()=>{if(t&&i){v(!0);try{let s={};if(u.trim())try{s=JSON.parse(u)}catch(e){s={value:u}}if(g)F.send({type:"command",data:{command:i,parameters:s}});else{var e;(null==(e=(await O.sendRobotCommand(t,i,s)).data)?void 0:e.status)==="success"&&y()}}catch(e){console.error("Failed to send command:",e)}finally{v(!1)}}},N=async e=>{try{await O.emergencyStop(e),y()}catch(e){console.error("Failed to emergency stop:",e)}},b=e=>{let s=Math.floor(e/3600),t=Math.floor(e%3600/60);return"".concat(s,"h ").concat(t,"m")},w=e=>{switch(e){case"connected":case"idle":return"bg-green-500";case"moving":case"executing":return"bg-blue-500";case"error":return"bg-red-500";case"disconnected":return"bg-gray-400";default:return"bg-yellow-500"}};return(0,a.jsxs)(l,{children:[(0,a.jsx)(c,{children:(0,a.jsxs)(d,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Robot Control"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(g?"bg-green-500":"bg-red-500")}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:g?"Connected":"Disconnected"})]})]})}),(0,a.jsxs)(m,{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"Select Robot"}),(0,a.jsx)("select",{value:t,onChange:e=>n(e.target.value),className:"w-full border rounded px-3 py-2",children:e.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.id,")"]},e.id))})]}),t&&e.find(e=>e.id===t)&&(0,a.jsx)("div",{className:"bg-muted p-4 rounded-lg",children:(()=>{let s=e.find(e=>e.id===t);return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:s.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(w(s.status))}),(0,a.jsx)("span",{className:"text-sm",children:s.status})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Battery:"})," ",s.battery,"%"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Uptime:"})," ",b(s.uptime)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Last Command:"})," ",s.last_command]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Position:"}),Object.entries(s.position).map(e=>{let[s,t]=e;return" ".concat(s.toUpperCase(),":").concat(t)}).join(",")]})]})]})})()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"Send Command"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("select",{value:i,onChange:e=>o(e.target.value),className:"w-full border rounded px-3 py-2",children:["move_to","pick_up","place","rotate","stop","home","navigate","turn","open_gripper","close_gripper"].map(e=>(0,a.jsx)("option",{value:e,children:e.replace("_"," ").charAt(0).toUpperCase()+e.replace("_"," ").slice(1)},e))}),(0,a.jsx)(U,{value:u,onChange:e=>h(e.target.value),placeholder:"Parameters (JSON or simple value)"}),(0,a.jsxs)(p,{onClick:j,disabled:x||!t,className:"w-full",children:[(0,a.jsx)(ey.A,{className:"h-4 w-4 mr-2"}),"Send Command"]})]})]}),t&&(0,a.jsx)("div",{className:"border-t pt-4",children:(0,a.jsxs)(p,{onClick:()=>N(t),variant:"destructive",className:"w-full",children:[(0,a.jsx)(eb.A,{className:"h-4 w-4 mr-2"}),"Emergency Stop"]})}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(p,{onClick:y,variant:"outline",children:[(0,a.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Refresh Status"]})})]})]})}function eS(){let[e,s]=(0,r.useState)("chat"),[t,n]=(0,r.useState)({backend:!1,models:0,robots:0,avatar:!1,camera:!1,audio:!1});(0,r.useEffect)(()=>{i();let e=setInterval(i,3e4);return()=>clearInterval(e)},[]);let i=async()=>{try{var e,s;let t=await O.healthCheck(),a=200===t.status,r=await O.getModels(),i=Array.isArray(r.data)?r.data.length:0,o=await O.getRobots(),l=Array.isArray(o.data)?o.data.length:0,c=(null==(e=(await O.getAvatarStatus()).data)?void 0:e.active)||!1,d=(null==(s=(await O.getCameraStatus()).data)?void 0:s.connected)||!1;n({backend:a,models:i,robots:l,avatar:c,camera:d,audio:!0})}catch(e){console.error("Failed to check system status:",e),n(e=>({...e,backend:!1}))}},o=[{id:"chat",label:"Chat",icon:v.A},{id:"avatar",label:"Avatar",icon:g.A},{id:"robot",label:"Robot",icon:f.A},{id:"camera",label:"Camera",icon:y.A},{id:"audio",label:"Audio",icon:j.A}];return"chat"===e?(0,a.jsx)(ef,{onNavigate:s}):(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("header",{className:"border-b",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Tektra AI Assistant"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(t.backend?"bg-green-500":"bg-red-500")}),(0,a.jsx)("span",{children:"Backend"})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[t.models," Models | ",t.robots," Robots"]}),(0,a.jsx)(p,{variant:"outline",size:"sm",children:(0,a.jsx)(N.A,{className:"h-4 w-4"})})]})]})})}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-1",children:[(0,a.jsxs)(l,{children:[(0,a.jsx)(c,{children:(0,a.jsx)(d,{children:"Navigation"})}),(0,a.jsx)(m,{className:"space-y-2",children:o.map(t=>{let r=t.icon;return(0,a.jsxs)(p,{variant:e===t.id?"default":"ghost",className:"w-full justify-start",onClick:()=>s(t.id),children:[(0,a.jsx)(r,{className:"h-4 w-4 mr-2"}),t.label]},t.id)})})]}),(0,a.jsxs)(l,{className:"mt-4",children:[(0,a.jsx)(c,{children:(0,a.jsx)(d,{children:"System Status"})}),(0,a.jsxs)(m,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Backend"}),(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(t.backend?"bg-green-500":"bg-red-500")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Avatar"}),(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(t.avatar?"bg-green-500":"bg-gray-400")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Camera"}),(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(t.camera?"bg-green-500":"bg-gray-400")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Audio"}),(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(t.audio?"bg-green-500":"bg-gray-400")})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[t.models," AI Models Available",(0,a.jsx)("br",{}),t.robots," Robots Connected"]})]})]})]}),(0,a.jsx)("div",{className:"lg:col-span-3",children:(()=>{switch(e){case"avatar":return(0,a.jsx)(eN,{});case"robot":return(0,a.jsx)(ew,{});case"camera":return(0,a.jsxs)(l,{children:[(0,a.jsx)(c,{children:(0,a.jsx)(d,{children:"Camera Control"})}),(0,a.jsx)(m,{children:(0,a.jsx)("div",{className:"text-center text-muted-foreground",children:"Camera interface coming in Week 2..."})})]});case"audio":return(0,a.jsxs)(l,{children:[(0,a.jsx)(c,{children:(0,a.jsx)(d,{children:"Audio Control"})}),(0,a.jsx)(m,{children:(0,a.jsx)("div",{className:"text-center text-muted-foreground",children:"Audio interface coming in Week 2..."})})]});default:return null}})()})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[118,441,684,358],()=>s(4037)),_N_E=e.O()}]);