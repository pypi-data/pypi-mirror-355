{% extends "auth/base.html" %}

{% block title %}Login - {{ super() }}{% endblock %}

{% block header %}Welcome Back{% endblock %}
{% block subtitle %}Sign in to your account{% endblock %}

{% block content %}
<form method="post" id="loginForm">
    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
    
    <div class="form-group">
        <label for="username">Username</label>
        <input 
            type="text" 
            id="username" 
            name="username" 
            value="{{ username|default('') }}" 
            required 
            autocomplete="username"
            placeholder="Enter your username"
        >
    </div>
    
    <div class="form-group">
        <label for="password">Password</label>
        <input 
            type="password" 
            id="password" 
            name="password" 
            required 
            autocomplete="current-password"
            placeholder="Enter your password"
        >
    </div>
    
    <div class="checkbox-group">
        <input type="checkbox" id="remember" name="remember">
        <label for="remember">Remember me for 30 days</label>
    </div>
    
    <button type="submit" class="btn">Sign In</button>
</form>
{% endblock %}

{% block auth_links %}
<div class="auth-links">
    <p>Don't have an account? <a href="/register">Create one here</a></p>
    <p><a href="/forgot-password">Forgot your password?</a></p>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
document.getElementById('loginForm').addEventListener('submit', function(e) {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value;
    
    if (!username) {
        alert('Please enter your username');
        e.preventDefault();
        return;
    }
    
    if (!password) {
        alert('Please enter your password');
        e.preventDefault();
        return;
    }
    
    // Show loading state
    const submitBtn = this.querySelector('button[type="submit"]');
    const originalText = submitBtn.textContent;
    submitBtn.textContent = 'Signing in...';
    submitBtn.disabled = true;
    
    // Re-enable button after 5 seconds in case of network issues
    setTimeout(() => {
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
    }, 5000);
});

// Auto-focus username field
document.getElementById('username').focus();
</script>
{% endblock %}
