<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <!-- List View: Use search same as budget monitoring report -->
    <record id="view_budget_monitor_revision_report_list" model="ir.ui.view">
        <field name="name">budget.monitor.revision.report.list</field>
        <field name="model">budget.monitor.revision.report</field>
        <field name="inherit_id" ref="budget_control.view_budget_monitor_report_list" />
        <field name="mode">primary</field>
        <field name="priority" eval="500" />
        <field name="arch" type="xml">
            <xpath expr="//list" position="attributes">
                <attribute name="name">budget_revision</attribute>
            </xpath>
        </field>
    </record>
    <!-- Pivot View -->
    <record id="view_budget_monitor_revision_report_pivot" model="ir.ui.view">
        <field name="name">budget.monitor.revision.report.pivot</field>
        <field name="model">budget.monitor.revision.report</field>
        <field name="arch" type="xml">
            <pivot string="Budget Revision Monitoring">
                <field name="analytic_account_id" type="row" />
                <field name="revision_number" type="col" />
                <field name="amount" type="measure" />
            </pivot>
        </field>
    </record>
    <!-- Graph View -->
    <record id="view_budget_monitor_revision_report_graph" model="ir.ui.view">
        <field name="name">budget.monitor.revision.report.graph</field>
        <field name="model">budget.monitor.revision.report</field>
        <field name="arch" type="xml">
            <graph string="Budget Revision Monitoring" type="bar" sample="1">
                <field name="analytic_account_id" />
                <field name="revision_number" />
                <field name="amount" type="measure" />
            </graph>
        </field>
    </record>
    <!-- Search View: Use search same as budget monitoring report -->
    <record id="view_budget_monitor_revision_report_search" model="ir.ui.view">
        <field name="name">budget.monitor.revision.report.search</field>
        <field name="model">budget.monitor.revision.report</field>
        <field
            name="inherit_id"
            ref="budget_control.view_budget_monitor_report_search"
        />
        <field name="mode">primary</field>
        <field name="priority" eval="500" />
        <field name="arch" type="xml">
            <xpath expr="//search" position="attributes">
                <attribute name="string">Budget Revision Monitoring</attribute>
            </xpath>
        </field>
    </record>
    <record
        id="action_budget_monitor_revision_report_all"
        model="ir.actions.act_window"
    >
        <field name="name">Budget Revision Monitoring</field>
        <field name="res_model">budget.monitor.revision.report</field>
        <field name="view_mode">pivot,list,graph</field>
        <field name="search_view_id" ref="view_budget_monitor_revision_report_search" />
        <field
            name="context"
        >{'pivot_column_groupby': ['revision_number', 'date:quarter'], 'search_default_active': 1, 'search_default_inactive': 1}</field>
    </record>
    <menuitem
        name="Budget Revision Monitoring"
        action="action_budget_monitor_revision_report_all"
        id="menu_action_budget_monitor_revision_report_all"
        parent="budget_control.budget_menu_monitoring"
        sequence="20"
    />
</odoo>
