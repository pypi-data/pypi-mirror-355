#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
@summary: Module for for a Spinner class.

          A Spinner object is displaying on console a rotating or somehow
          other animated character during its existence.

          This class was taken from https://github.com/Tagar/stuff

          Example usage:

                from fb_tools.spinner import Spinner

                with Spinner("just waiting a bit.. "):
                    time.sleep(3)

@author: Frank Brehm
@contact: frank@brehm-online.com
@copyright: Â© 2025 by Frank Brehm, Berlin
"""

import itertools
import logging
import sys
import threading
import time
# from collections import namedtuple

# Own modules
# from .common import to_bytes
from .xlate import XLATOR

__version__ = '2.1.0'

_ = XLATOR.gettext

LOG = logging.getLogger(__name__)

CycleList = {
    'dots': {'delay': 80, 'frames': 'â ‹â ™â ¹â ¸â ¼â ´â ¦â §â ‡â '},
    'dots2': {'delay': 80, 'frames': 'â£¾â£½â£»â¢¿â¡¿â£Ÿâ£¯â£·'},
    'dots3': {'delay': 80, 'frames': 'â ‹â ™â šâ â –â ¦â ´â ²â ³â “'},
    'dots4': {'delay': 80, 'frames': 'â „â †â ‡â ‹â ™â ¸â °â  â °â ¸â ™â ‹â ‡â †'},
    'dots5': {'delay': 80, 'frames': 'â ‹â ™â šâ ’â ‚â ‚â ’â ²â ´â ¦â –â ’â â â ’â “â ‹'},
    'dots6': {'delay': 80, 'frames': 'â â ‰â ™â šâ ’â ‚â ‚â ’â ²â ´â ¤â „â „â ¤â ´â ²â ’â ‚â ‚â ’â šâ ™â ‰â '},
    'dots7': {'delay': 80, 'frames': 'â ˆâ ‰â ‹â “â ’â â â ’â –â ¦â ¤â  â  â ¤â ¦â –â ’â â â ’â “â ‹â ‰â ˆ'},
    'dots8': {'delay': 80, 'frames': 'â â â ‰â ™â šâ ’â ‚â ‚â ’â ²â ´â ¤â „â „â ¤â  â  â ¤â ¦â –â ’â â â ’â “â ‹â ‰â ˆâ ˆ'},
    'dots9': {'delay': 80, 'frames': 'â¢¹â¢ºâ¢¼â£¸â£‡â¡§â¡—â¡'},
    'dots10': {'delay': 80, 'frames': 'â¢„â¢‚â¢â¡â¡ˆâ¡â¡ '},
    'dots11': {'delay': 100, 'frames': 'â â ‚â „â¡€â¢€â  â â ˆ'},
    'dots12': {
        'delay': 80,
        'frames': [
            'â¢€â €',
            'â¡€â €',
            'â „â €',
            'â¢‚â €',
            'â¡‚â €',
            'â …â €',
            'â¢ƒâ €',
            'â¡ƒâ €',
            'â â €',
            'â¢‹â €',
            'â¡‹â €',
            'â â ',
            'â¢‹â ',
            'â¡‹â ',
            'â â ‰',
            'â ‹â ‰',
            'â ‹â ‰',
            'â ‰â ™',
            'â ‰â ™',
            'â ‰â ©',
            'â ˆâ¢™',
            'â ˆâ¡™',
            'â¢ˆâ ©',
            'â¡€â¢™',
            'â „â¡™',
            'â¢‚â ©',
            'â¡‚â¢˜',
            'â …â¡˜',
            'â¢ƒâ ¨',
            'â¡ƒâ¢',
            'â â¡',
            'â¢‹â  ',
            'â¡‹â¢€',
            'â â¡',
            'â¢‹â ',
            'â¡‹â ',
            'â â ‰',
            'â ‹â ‰',
            'â ‹â ‰',
            'â ‰â ™',
            'â ‰â ™',
            'â ‰â ©',
            'â ˆâ¢™',
            'â ˆâ¡™',
            'â ˆâ ©',
            'â €â¢™',
            'â €â¡™',
            'â €â ©',
            'â €â¢˜',
            'â €â¡˜',
            'â €â ¨',
            'â €â¢',
            'â €â¡',
            'â €â  ',
            'â €â¢€',
            'â €â¡€',
        ],
    },
    'dots8Bit': {
        'delay': 80,
        'frames': 'â €â â ‚â ƒâ „â …â †â ‡â¡€â¡â¡‚â¡ƒâ¡„â¡…â¡†â¡‡â ˆâ ‰â Šâ ‹â Œâ â â â¡ˆâ¡‰â¡Šâ¡‹â¡Œâ¡â¡â¡â â ‘â ’â “â ”â •â –â —â¡â¡‘â¡’â¡“â¡”â¡•â¡–â¡—â ˜â ™â šâ ›â œâ â â Ÿâ¡˜â¡™'
        'â¡šâ¡›â¡œâ¡â¡â¡Ÿâ  â ¡â ¢â £â ¤â ¥â ¦â §â¡ â¡¡â¡¢â¡£â¡¤â¡¥â¡¦â¡§â ¨â ©â ªâ «â ¬â ­â ®â ¯â¡¨â¡©â¡ªâ¡«â¡¬â¡­â¡®â¡¯â °â ±â ²â ³â ´â µâ ¶â ·â¡°â¡±â¡²â¡³â¡´â¡µâ¡¶â¡·â ¸â ¹â ºâ »'
        'â ¼â ½â ¾â ¿â¡¸â¡¹â¡ºâ¡»â¡¼â¡½â¡¾â¡¿â¢€â¢â¢‚â¢ƒâ¢„â¢…â¢†â¢‡â£€â£â£‚â£ƒâ£„â£…â£†â£‡â¢ˆâ¢‰â¢Šâ¢‹â¢Œâ¢â¢â¢â£ˆâ£‰â£Šâ£‹â£Œâ£â£â£â¢â¢‘â¢’â¢“â¢”â¢•â¢–â¢—â£â£‘â£’â£“â£”â£•'
        'â£–â£—â¢˜â¢™â¢šâ¢›â¢œâ¢â¢â¢Ÿâ£˜â£™â£šâ£›â£œâ£â£â£Ÿâ¢ â¢¡â¢¢â¢£â¢¤â¢¥â¢¦â¢§â£ â£¡â£¢â££â£¤â£¥â£¦â£§â¢¨â¢©â¢ªâ¢«â¢¬â¢­â¢®â¢¯â£¨â£©â£ªâ£«â£¬â£­â£®â£¯â¢°â¢±â¢²â¢³â¢´â¢µâ¢¶â¢·'
        'â£°â£±â£²â£³â£´â£µâ£¶â£·â¢¸â¢¹â¢ºâ¢»â¢¼â¢½â¢¾â¢¿â£¸â£¹â£ºâ£»â£¼â£½â£¾â£¿',
    },
    'line': {'delay': 130, 'frames': ['-', '\\', '|', '/']},
    'line1': {'delay': 100, 'frames': ['-', '/', '|', '\\']},
    'line2': {'delay': 100, 'frames': 'â ‚-â€“â€”â€“-'},
    'pipe': {'delay': 100, 'frames': 'â”¤â”˜â”´â””â”œâ”Œâ”¬â”'},
    'simpleDots': {'delay': 400, 'frames': ['.  ', '.. ', '...', '   ']},
    'simpleDotsScrolling': {'delay': 200, 'frames': ['.  ', '.. ', '...', ' ..', '  .', '   ']},
    'star': {'delay': 70, 'frames': 'âœ¶âœ¸âœ¹âœºâœ¹âœ·'},
    'star2': {'delay': 80, 'frames': '+x*'},
    'flip': {'delay': 70, 'frames': "___-``'Â´-___"},
    'hamburger': {'delay': 100, 'frames': 'â˜±â˜²â˜´'},
    'growVertical': {'delay': 120, 'frames': 'â–â–ƒâ–„â–…â–†â–‡â–†â–…â–„â–ƒ'},
    'growHorizontal': {'delay': 120, 'frames': 'â–â–â–â–Œâ–‹â–Šâ–‰â–Šâ–‹â–Œâ–â–'},
    'balloon': {'delay': 140, 'frames': ' .oO@* '},
    'balloon2': {'delay': 120, 'frames': '.oOÂ°Oo.'},
    'noise': {'delay': 100, 'frames': 'â–“â–’â–‘'},
    'bounce': {'delay': 120, 'frames': 'â â ‚â „â ‚'},
    'boxBounce': {'delay': 120, 'frames': 'â––â–˜â–â–—'},
    'boxBounce2': {'delay': 100, 'frames': 'â–Œâ–€â–â–„'},
    'triangle': {'delay': 50, 'frames': 'â—¢â—£â—¤â—¥'},
    'arc': {'delay': 100, 'frames': 'â—œâ— â—â—â—¡â—Ÿ'},
    'circle': {'delay': 120, 'frames': 'â—¡âŠ™â— '},
    'squareCorners': {'delay': 180, 'frames': 'â—°â—³â—²â—±'},
    'circleQuarters': {'delay': 120, 'frames': 'â—´â—·â—¶â—µ'},
    'circleHalves': {'delay': 50, 'frames': 'â—â—“â—‘â—’'},
    'squish': {'delay': 100, 'frames': 'â•«â•ª'},
    'toggle': {'delay': 250, 'frames': 'âŠ¶âŠ·'},
    'toggle2': {'delay': 80, 'frames': 'â–«â–ª'},
    'toggle3': {'delay': 120, 'frames': 'â–¡â– '},
    'toggle4': {'delay': 100, 'frames': 'â– â–¡â–ªâ–«'},
    'toggle5': {'delay': 100, 'frames': 'â–®â–¯'},
    'toggle7': {'delay': 80, 'frames': 'â¦¾â¦¿'},
    'toggle8': {'delay': 100, 'frames': 'â—â—Œ'},
    'toggle9': {'delay': 100, 'frames': 'â—‰â—'},
    'toggle10': {'delay': 100, 'length': 2, 'frames': 'ãŠ‚ãŠ€ãŠ'},
    'toggle12': {'delay': 120, 'frames': 'â˜—â˜–'},
    'toggle13': {'delay': 80, 'frames': '=*-'},
    'arrow': {'delay': 100, 'frames': 'â†â†–â†‘â†—â†’â†˜â†“â†™'},
    'arrow2': {
        'delay': 80,
        'length': 2,
        'frames': ['â¬†ï¸ ', 'â†—ï¸ ', 'â¡ï¸ ', 'â†˜ï¸ ', 'â¬‡ï¸ ', 'â†™ï¸ ', 'â¬…ï¸ ', 'â†–ï¸ '],
    },
    'arrow3': {
        'delay': 120,
        'frames': ['â–¹â–¹â–¹â–¹â–¹', 'â–¸â–¹â–¹â–¹â–¹', 'â–¹â–¸â–¹â–¹â–¹', 'â–¹â–¹â–¸â–¹â–¹', 'â–¹â–¹â–¹â–¸â–¹', 'â–¹â–¹â–¹â–¹â–¸'],
    },
    'bouncingBar': {
        'delay': 80,
        'frames': [
            '[    ]',
            '[=   ]',
            '[==  ]',
            '[=== ]',
            '[ ===]',
            '[  ==]',
            '[   =]',
            '[    ]',
            '[   =]',
            '[  ==]',
            '[ ===]',
            '[====]',
            '[=== ]',
            '[==  ]',
            '[=   ]',
        ],
    },
    'bouncingBall': {
        'delay': 80,
        'frames': [
            '( â—    )',
            '(  â—   )',
            '(   â—  )',
            '(    â— )',
            '(     â—)',
            '(    â— )',
            '(   â—  )',
            '(  â—   )',
            '( â—    )',
            '(â—     )',
        ],
    },
    'smiley': {'delay': 200, 'length': 2, 'frames': ['ğŸ˜„', 'ğŸ˜']},
    'monkey': {'delay': 300, 'length': 2, 'frames': ['ğŸ™ˆ', 'ğŸ™ˆ', 'ğŸ™‰', 'ğŸ™Š']},
    'hearts': {'delay': 100, 'length': 2, 'frames': ['ğŸ’›', 'ğŸ’™', 'ğŸ’œ', 'ğŸ’š', 'â¤ï¸ ']},
    'clock': {
        'delay': 100,
        'length': 2,
        'frames': [
            'ğŸ•›',
            'ğŸ•',
            'ğŸ•‘',
            'ğŸ•’',
            'ğŸ•“',
            'ğŸ•”',
            'ğŸ••',
            'ğŸ•–',
            'ğŸ•—',
            'ğŸ•˜',
            'ğŸ•™',
            'ğŸ•š',
        ],
    },
    'earth': {'delay': 180, 'length': 2, 'frames': ['ğŸŒ', 'ğŸŒ', 'ğŸŒ']},
    'material': {
        'delay': 17,
        'frames': [
            'â–ˆâ–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–',
            'â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–',
            'â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–',
            'â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–',
            'â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–',
            'â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–',
            'â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–',
            'â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–',
            'â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–',
            'â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–',
            'â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–',
            'â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–',
            'â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–ˆâ–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆ',
            'â–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆ',
            'â–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆ',
            'â–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆ',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆ',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆ',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆ',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆ',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–',
            'â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–â–',
            'â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–',
            'â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–â–',
            'â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–â–',
            'â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–',
            'â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–',
            'â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–',
            'â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–',
            'â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–â–',
            'â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–',
            'â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–â–',
            'â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–',
            'â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–',
            'â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆâ–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–ˆ',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–',
            'â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–',
        ],
    },
    'moon': {
        'delay': 80,
        'length': 2,
        'frames': ['ğŸŒ‘', 'ğŸŒ’', 'ğŸŒ“', 'ğŸŒ”', 'ğŸŒ•', 'ğŸŒ–', 'ğŸŒ—', 'ğŸŒ˜'],
    },
    'runner': {'delay': 140, 'length': 2, 'frames': ['ğŸš¶', 'ğŸƒ']},
    'pong': {
        'delay': 80,
        'frames': [
            'â–â ‚       â–Œ',
            'â–â ˆ       â–Œ',
            'â– â ‚      â–Œ',
            'â– â        â–Œ',
            'â–  â¡€     â–Œ',
            'â–  â       â–Œ',
            'â–   â ‚    â–Œ',
            'â–   â ˆ    â–Œ',
            'â–    â ‚   â–Œ',
            'â–    â     â–Œ',
            'â–     â¡€  â–Œ',
            'â–     â    â–Œ',
            'â–      â ‚ â–Œ',
            'â–      â ˆ â–Œ',
            'â–       â ‚â–Œ',
            'â–       â  â–Œ',
            'â–       â¡€â–Œ',
            'â–      â   â–Œ',
            'â–      â ‚ â–Œ',
            'â–     â ˆ  â–Œ',
            'â–     â ‚  â–Œ',
            'â–    â     â–Œ',
            'â–    â¡€   â–Œ',
            'â–   â      â–Œ',
            'â–   â ‚    â–Œ',
            'â–  â ˆ     â–Œ',
            'â–  â ‚     â–Œ',
            'â– â        â–Œ',
            'â– â¡€      â–Œ',
            'â–â         â–Œ',
        ],
    },
    'shark': {
        'delay': 120,
        'frames': [
            'â–|\\____________â–Œ',
            'â–_|\\___________â–Œ',
            'â–__|\\__________â–Œ',
            'â–___|\\_________â–Œ',
            'â–____|\\________â–Œ',
            'â–_____|\\_______â–Œ',
            'â–______|\\______â–Œ',
            'â–_______|\\_____â–Œ',
            'â–________|\\____â–Œ',
            'â–_________|\\___â–Œ',
            'â–__________|\\__â–Œ',
            'â–___________|\\_â–Œ',
            'â–____________|\\â–Œ',
            'â–____________/|â–Œ',
            'â–___________/|_â–Œ',
            'â–__________/|__â–Œ',
            'â–_________/|___â–Œ',
            'â–________/|____â–Œ',
            'â–_______/|_____â–Œ',
            'â–______/|______â–Œ',
            'â–_____/|_______â–Œ',
            'â–____/|________â–Œ',
            'â–___/|_________â–Œ',
            'â–__/|__________â–Œ',
            'â–_/|___________â–Œ',
            'â–/|____________â–Œ',
        ],
    },
    'dqpb': {'delay': 100, 'frames': 'dqpb'},
    'weather': {
        'delay': 100,
        'length': 2,
        'frames': [
            'â˜€ï¸ ',
            'â˜€ï¸ ',
            'â˜€ï¸ ',
            'ğŸŒ¤ ',
            'â›…ï¸',
            'ğŸŒ¥ ',
            'â˜ï¸ ',
            'ğŸŒ§ ',
            'ğŸŒ¨ ',
            'ğŸŒ§ ',
            'ğŸŒ¨ ',
            'ğŸŒ§ ',
            'ğŸŒ¨ ',
            'â›ˆ ',
            'ğŸŒ¨ ',
            'ğŸŒ§ ',
            'ğŸŒ¨ ',
            'â˜ï¸ ',
            'ğŸŒ¥ ',
            'â›…ï¸',
            'ğŸŒ¤ ',
            'â˜€ï¸ ',
            'â˜€ï¸ ',
        ],
    },
    'christmas': {'delay': 400, 'length': 2, 'frames': 'ğŸŒ²ğŸ„'},
    'grenade': {
        'delay': 80,
        'length': 3,
        'frames': [
            'ØŒ  ',
            'â€²  ',
            ' Â´ ',
            ' â€¾ ',
            '  â¸Œ',
            '  â¸Š',
            '  |',
            '  â',
            '  â•',
            ' à·´ ',
            '  â“',
            '   ',
            '   ',
            '   ',
        ],
    },
    'point': {'delay': 125, 'frames': ['âˆ™âˆ™âˆ™', 'â—âˆ™âˆ™', 'âˆ™â—âˆ™', 'âˆ™âˆ™â—', 'âˆ™âˆ™âˆ™']},
    'layer': {'delay': 150, 'frames': '-=â‰¡'},
    'betaWave': {
        'delay': 80,
        'frames': [
            'ÏÎ²Î²Î²Î²Î²Î²',
            'Î²ÏÎ²Î²Î²Î²Î²',
            'Î²Î²ÏÎ²Î²Î²Î²',
            'Î²Î²Î²ÏÎ²Î²Î²',
            'Î²Î²Î²Î²ÏÎ²Î²',
            'Î²Î²Î²Î²Î²ÏÎ²',
            'Î²Î²Î²Î²Î²Î²Ï',
        ],
    },
    'aesthetic': {
        'delay': 80,
        'frames': [
            'â–°â–±â–±â–±â–±â–±â–±',
            'â–°â–°â–±â–±â–±â–±â–±',
            'â–°â–°â–°â–±â–±â–±â–±',
            'â–°â–°â–°â–°â–±â–±â–±',
            'â–°â–°â–°â–°â–°â–±â–±',
            'â–°â–°â–°â–°â–°â–°â–±',
            'â–°â–°â–°â–°â–°â–°â–°',
            'â–°â–±â–±â–±â–±â–±â–±',
        ],
    },
}

# =============================================================================
class Spinner(object):
    """Displaying on console a rotating or somehow other animated character."""

    default_cycle_name = 'line1'
    default_delay = 100

    # -------------------------------------------------------------------------
    def __init__(self, message, cycle_name=None, frames=None, delay=None):
        """Initialize a Spinner object."""
        self.cycle_name = cycle_name
        if not self.cycle_name:
            self.cycle_name = self.default_cycle_name

        self.frames = None
        self.delay = self.default_delay
        self.characters = 1
        length = None

        if frames:
            self.frames = frames
        else:
            if self.cycle_name not in CycleList:
                msg = _('Spinner {!r} not found.').format(self.cycle_name)
                raise KeyError(msg)

            self.frames = CycleList[self.cycle_name]['frames']
            self.delay = CycleList[self.cycle_name]['delay']
            if 'length' in CycleList[self.cycle_name]:
                length = CycleList[self.cycle_name]['length']

        self.spinner = itertools.cycle(self.frames)

        if length:
            self.characters = length
        else:
            self.characters = len(self.frames[0])
        if delay:
            self.delay = delay

        # LOG.debug('First frame is of type {!r}.'.format(self.frames[0].__class__.__name__))
        # LOG.debug('Frames has {c} characters, delay is {d} milliseconds.'.format(
        #     c=self.characters, d=self.delay))
        # len_in_codeunits = len(self.frames[0].encode('utf-16-le')) // 2
        # LOG.debug('len_in_codeunits: {}'.format(len_in_codeunits))
        # LOG.debug('len: {}'.format(len(self.frames[0].encode('utf-8'))))
        # LOG.debug('str: {}'.format(self.frames[0]))
        # LOG.debug('bytes: {}'.format(to_bytes(self.frames[0])))

        self.busy = False
        self.spinner_visible = False
        sys.stdout.write(message)

    # -------------------------------------------------------------------------
    def write_next(self):
        """Write the next character from the cycle array on the current screen position."""
        with self._screen_lock:
            if not self.spinner_visible:
                sys.stdout.write(next(self.spinner) + ' ')
                self.spinner_visible = True
                sys.stdout.flush()

    # -------------------------------------------------------------------------
    def remove_spinner(self, cleanup=False):
        """
        Remove the last visible cycle character from screen.

        If the parameter cleanup is true, then the screen cursor will be mnoved to the next line.
        """
        with self._screen_lock:
            if self.spinner_visible:
                sys.stdout.write('\b' * (self.characters + 1))
                self.spinner_visible = False
                if cleanup:
                    sys.stdout.write(' ' * self.characters)       # overwrite spinner with blank
                    sys.stdout.write('\r')                        # move to next line
                sys.stdout.flush()

    # -------------------------------------------------------------------------
    def spinner_task(self):
        """Entry point of the Thread. It is an infinite loop."""
        delay = float(self.delay) / 1000.0

        while self.busy:
            self.write_next()
            time.sleep(delay)
            self.remove_spinner()

    # -------------------------------------------------------------------------
    def __enter__(self):
        """Execute this ction, when this object will be created for the with-block."""
        if sys.stdout.isatty():
            self._screen_lock = threading.Lock()
            self.busy = True
            self.thread = threading.Thread(target=self.spinner_task)
            self.thread.start()

    # -------------------------------------------------------------------------
    def __exit__(self, exc_type, exc_val, exc_traceback):
        """Exit action at the end of the with-block."""
        if sys.stdout.isatty():
            self.busy = False
            self.remove_spinner(cleanup=True)
        else:
            sys.stdout.write('\r')


# =============================================================================
if __name__ == '__main__':

    pass

# =============================================================================

# vim: tabstop=4 expandtab shiftwidth=4 softtabstop=4 list
