"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1904],{11904:function(e,s,a){a.d(s,{Z:function(){return Z}});var i,t,l=a(24246),r=a(59003),n=a(92222),o=a(4454),d=a(86677),c=a(27378),u=a(14481),g=a(45896),x=a(70675),j=a(72625),m=a(79947),h=a(50169),I=a(28278),C=a(74241),f=a(61317),p=a(91761),L=a(61099),v=a(87667),y=e=>{let{resourceType:s}=e,a=(0,n.Cl)();return s===f.D$.SCHEMA?{columns:[a.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(v.Z,{result:e.row.original,changeTypeOverride:I.E.CLASSIFICATION}),header:e=>(0,l.jsx)(u.Rr,{value:"Name",...e}),size:300}),a.accessor(e=>e.urn,{id:"project",cell:e=>(0,l.jsx)(u.G3,{value:(0,C.Z)(e.getValue())}),header:e=>(0,l.jsx)(u.Rr,{value:"Project",...e})}),a.display({id:"status",cell:e=>(0,l.jsx)(h.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Status",...e})}),a.accessor(e=>e.system,{id:"system",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"System",...e})}),a.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"Detected by",...e})}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(j.Cy,{time:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"When",...e})}),a.display({id:"action",cell:e=>e.row.original.diff_status!==f.LL.MUTED?(0,l.jsx)(p.Z,{resource:e.row.original}):(0,l.jsx)(u.G3,{value:"--"}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:s===f.D$.TABLE?{columns:[a.display({id:"select",cell:e=>{var s;let{row:a}=e;return(0,l.jsx)(j.k,{isChecked:a.getIsSelected(),onChange:a.getToggleSelectedHandler(),dataTestId:"select-".concat(null!==(s=a.original.name)&&void 0!==s?s:a.id)})},header:e=>{let{table:s}=e;return(0,l.jsx)(j.k,{isChecked:s.getIsAllPageRowsSelected(),isIndeterminate:s.getIsSomeRowsSelected(),onChange:s.getToggleAllRowsSelectedHandler(),dataTestId:"select-all-rows"})},maxSize:40}),a.accessor(e=>e.name,{id:"tables",cell:e=>(0,l.jsx)(v.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Table name",...e}),size:300}),a.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(u.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),a.display({id:"status",cell:e=>(0,l.jsx)(h.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Status",...e})}),a.display({id:"type",cell:()=>(0,l.jsx)(u.G3,{value:"Table"}),header:"Type"}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(j.Cy,{time:e.getValue()}),header:"Time"}),a.display({id:"actions",cell:e=>(0,l.jsx)(p.Z,{resource:e.row.original}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:s===f.D$.FIELD?{columns:[a.accessor(e=>e.name,{id:"name",cell:e=>(0,l.jsx)(v.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Field name",...e}),size:300}),a.accessor(e=>e.source_data_type,{id:"data-type",cell:e=>(0,l.jsx)(m.Z,{type:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"Data type",...e})}),a.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(u.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(u.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),a.display({id:"status",cell:e=>(0,l.jsx)(h.Z,{result:e.row.original}),header:e=>(0,l.jsx)(u.Rr,{value:"Status",...e})}),a.display({id:"type",cell:()=>(0,l.jsx)(u.G3,{value:"Field"}),header:"Type"}),a.display({id:"classifications",cell:e=>{let{row:s}=e;return(0,l.jsx)(L.Z,{resource:s.original})},meta:{overflow:"visible",disableRowClick:!0},header:"Data category",minSize:280}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,l.jsx)(j.Cy,{time:e.getValue()}),header:e=>(0,l.jsx)(u.Rr,{value:"When",...e})}),a.display({id:"actions",cell:e=>(0,l.jsx)(p.Z,{resource:e.row.original}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:{columns:[]}};(i=t||(t={}))[i.ACTION_REQUIRED=0]="ACTION_REQUIRED",i[i.UNMONITORED=1]="UNMONITORED";var _=e=>{let{initialFilterTabIndex:s=0}=e,[a,i]=(0,c.useState)(s),t=(0,c.useMemo)(()=>[{label:"Action Required",filters:[f.LL.CLASSIFICATION_ADDITION,f.LL.CLASSIFICATION_UPDATE],childFilters:[f.LL.CLASSIFICATION_ADDITION,f.LL.CLASSIFICATION_UPDATE]},{label:"In progress",filters:[f.LL.CLASSIFYING,f.LL.CLASSIFICATION_QUEUED],childFilters:[f.LL.CLASSIFYING,f.LL.CLASSIFICATION_QUEUED]},{label:"Unmonitored",filters:[f.LL.MUTED],childFilters:[]}],[]);return{filterTabs:t,filterTabIndex:a,setFilterTabIndex:i,activeDiffFilters:t[a].filters,activeChildDiffFilters:t[a].childFilters}},T=a(47182),S=a(38347),R=a(79494),b=e=>{let{resourceUrn:s}=e,[a,{isLoading:i}]=(0,x.Hf)(),[t,{isLoading:r}]=(0,x.zV)(),n=i||r,d=async e=>{await t({staged_resource_urns:e})},c=async e=>{await a({staged_resource_urns:e})};return(0,l.jsx)(o.jqI,{"data-testid":"bulk-actions-menu",children:(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(R.Z,{title:"Confirm all",icon:(0,l.jsx)(o.nQG,{}),onClick:()=>c([s]),disabled:n,loading:i,type:"primary",size:"middle"}),(0,l.jsx)(R.Z,{title:"Ignore all",icon:(0,l.jsx)(o.tpL,{}),onClick:()=>d([s]),disabled:n,loading:r,size:"middle"})]})})},w=e=>{let{selectedUrns:s}=e,[a,{isLoading:i}]=(0,x.Hf)(),[t,{isLoading:r}]=(0,x.zV)(),n=i||r,d=async e=>{await a({staged_resource_urns:e})},c=async e=>{await t({staged_resource_urns:e})};return s.length?(0,l.jsxs)(o.jqI,{className:"items-center","data-testid":"bulk-actions-menu",children:[(0,l.jsx)(o.xvT,{fontSize:"xs",fontWeight:"semibold",minW:16,mr:4,children:"".concat(s.length," selected")}),(0,l.jsxs)(o.jqI,{className:"gap-2",children:[(0,l.jsx)(R.Z,{title:"Confirm",icon:(0,l.jsx)(o.nQG,{}),onClick:()=>d(s),disabled:n,loading:i,type:"primary",size:"middle"}),(0,l.jsx)(R.Z,{title:"Ignore",icon:(0,l.jsx)(o.tpL,{}),disabled:n,loading:r,onClick:()=>c(s),size:"middle"})]})]}):null},D=a(7940),A=a(80285),N=a(36168),F=a(30952);let k={items:[],total:0,page:1,size:50,pages:1},E=()=>(0,l.jsx)(o.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"empty-state",alignSelf:"center",margin:"auto",children:(0,l.jsxs)(o.gCW,{children:[(0,l.jsx)(o.xvT,{fontSize:"md",fontWeight:"600",children:"No activity found"}),(0,l.jsx)(o.xvT,{fontSize:"sm",children:"You're up to date!"})]})});var Z=e=>{var s,a;let{resourceUrn:i}=e,j=(0,d.useRouter)(),[m,h]=(0,c.useState)(""),{filterTabs:I,setFilterTabIndex:C,filterTabIndex:p,activeDiffFilters:L,activeChildDiffFilters:v}=_({initialFilterTabIndex:(null===(s=j.query)||void 0===s?void 0:s.filterTabIndex)?Number(null===(a=j.query)||void 0===a?void 0:a.filterTabIndex):void 0}),[R,Z]=(0,c.useState)({}),{PAGE_SIZES:O,pageSize:z,setPageSize:U,onPreviousPageClick:M,isPreviousPageDisabled:P,onNextPageClick:G,isNextPageDisabled:V,startRange:$,endRange:q,pageIndex:H,setTotalPages:Q,resetPageIndexToDefault:W}=(0,u.oi)();(0,c.useEffect)(()=>{W()},[i,m,W,L,v]);let{isFetching:Y,isLoading:B,data:K}=(0,x.z8)({staged_resource_urn:i,page:H,size:z,child_diff_status:v,diff_status:L,search:m}),X=(0,D.G)(null==K?void 0:K.items[0]),{items:J,total:ee,pages:es}=(0,c.useMemo)(()=>null!=K?K:k,[K]);(0,c.useEffect)(()=>{Q(es)},[es,Q]);let{columns:ea}=y({resourceType:X}),ei=(0,c.useMemo)(()=>ea,[ea]),{navigateToDiscoveryResults:et}=(0,T.Z)(),el=(0,r.b7)({getCoreRowModel:(0,n.sC)(),getGroupedRowModel:(0,n.qe)(),getExpandedRowModel:(0,n.rV)(),columns:ei,manualPagination:!0,onRowSelectionChange:Z,state:{rowSelection:R},getRowId:A.Z,data:J,columnResizeMode:"onChange"}),er=Object.keys(R).filter(e=>R[e]);return B?(0,l.jsx)(u.I4,{rowHeight:36,numRows:36}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.Z,{filterTabs:I,filterTabIndex:p,onChange:C}),(0,l.jsxs)(u.Q$,{children:[(0,l.jsxs)(o.kCb,{gap:6,align:"center",children:[(0,l.jsx)(o.xuv,{flexShrink:0,children:(0,l.jsx)(F.f,{value:m,onChange:h})}),(0,l.jsx)(S.Z,{})]}),X===f.D$.TABLE&&!!er.length&&(0,l.jsx)(w,{selectedUrns:er}),X===f.D$.FIELD&&p!==t.UNMONITORED&&(0,l.jsx)(b,{resourceUrn:i})]}),(0,l.jsx)(u.ZK,{tableInstance:el,onRowClick:e=>et({resourceUrn:e.urn,filterTabIndex:p}),getRowIsClickable:e=>X!==f.D$.FIELD||(0,N.Z)(e),emptyTableNotice:(0,l.jsx)(E,{})}),(0,l.jsx)(u.s8,{totalRows:ee||0,pageSizes:O,setPageSize:U,onPreviousPageClick:M,isPreviousPageDisabled:P||Y,onNextPageClick:G,isNextPageDisabled:V||Y,startRange:$,endRange:q})]})}},91761:function(e,s,a){var i=a(24246),t=a(4454),l=a(812),r=a(14047),n=a(7940),o=a(98559),d=a(61317),c=a(79494),u=a(70675);s.Z=e=>{let{resource:s}=e,[a,{isLoading:g}]=(0,u.v8)(),[x,{isLoading:j}]=(0,u.cM)(),[m,{isLoading:h}]=(0,u.vi)(),I=j||h||g,{diff_status:C,child_diff_statuses:f,top_level_field_name:p}=s,{successAlert:L,errorAlert:v}=(0,r.V)(),y=C===d.LL.CLASSIFICATION_ADDITION||C===d.LL.CLASSIFICATION_UPDATE,_=f&&(f[d.LL.CLASSIFICATION_ADDITION]||f[d.LL.CLASSIFICATION_UPDATE]),T=(y||_)&&!p,S=y||_,R=(0,n.G)(s)!==d.D$.FIELD,b=T&&S&&R,w=async()=>{let e=await x({staged_resource_urn:s.urn});(0,l.D4)(e)?v((0,l.e$)(e.error),"Failed to promote resource"):L('These changes have been added to a Fides dataset. To view, navigate to "Manage datasets".',"Table changes confirmed")},D=async()=>{let e=await m({staged_resource_urn:s.urn});(0,l.D4)(e)?v((0,l.e$)(e.error),"Failed to mute resource"):L("Ignored changes will not be added to a Fides dataset.","".concat(s.name||"Changes"," ignored"))},A=async()=>{let e=await a({staged_resource_urn:s.urn,monitor_config_id:s.monitor_config_id,start_classification:!0,classify_monitored_resources:!0});(0,l.D4)(e)?v((0,l.e$)(e.error),"Failed to reclassify resource"):L("Reclassification of ".concat((0,o.Z)(s)||"the resource"," has begun.  The results may take some time to appear in the “Data discovery“ tab."),"Reclassification started")};return(0,i.jsxs)(t.Ugi,{gap:2,children:[T&&(0,i.jsx)(c.Z,{title:"Confirm",icon:(0,i.jsx)(t.nQG,{}),onClick:w,disabled:I,loading:j}),S&&(0,i.jsx)(c.Z,{title:"Ignore",icon:(0,i.jsx)(t.tpL,{}),onClick:D,disabled:I,loading:h}),R&&!b&&(0,i.jsx)(c.Z,{title:"Reclassify",icon:(0,i.jsx)(t.nyI,{}),onClick:A,disabled:I,loading:g}),b&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.LZC,{}),(0,i.jsxs)(t.v2r,{children:[(0,i.jsx)(t.j2t,{as:t.wpx,size:"small",type:"text",icon:(0,i.jsx)(t.nXP,{transform:"rotate(90deg)"}),className:"w-6 gap-0","data-testid":"actions-overflow-btn"}),(0,i.jsx)(t.qyq,{children:(0,i.jsx)(t.sNh,{onClick:A,icon:(0,i.jsx)(t.nyI,{}),"data-testid":"action-reclassify",children:"Reclassify"})})]})]})]})}}}]);