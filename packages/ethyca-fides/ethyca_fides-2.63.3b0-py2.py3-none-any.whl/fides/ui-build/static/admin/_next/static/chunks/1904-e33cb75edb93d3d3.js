"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1904],{11904:function(e,s,a){a.d(s,{Z:function(){return E}});var i,l,t=a(24246),r=a(59003),o=a(92222),n=a(62051),d=a(86677),c=a(27378),u=a(14481),g=a(45896),x=a(70675),j=a(72625),m=a(79947),h=a(50169),I=a(28278),p=a(74241),C=a(46420),f=a(91761),v=a(61099),y=a(87667),L=e=>{let{resourceType:s}=e,a=(0,o.Cl)();return s===C.D$.SCHEMA?{columns:[a.accessor(e=>e.name,{id:"name",cell:e=>(0,t.jsx)(y.Z,{result:e.row.original,changeTypeOverride:I.E.CLASSIFICATION}),header:e=>(0,t.jsx)(u.Rr,{value:"Name",...e}),size:300}),a.accessor(e=>e.urn,{id:"project",cell:e=>(0,t.jsx)(u.G3,{value:(0,p.Z)(e.getValue())}),header:e=>(0,t.jsx)(u.Rr,{value:"Project",...e})}),a.display({id:"status",cell:e=>(0,t.jsx)(h.Z,{result:e.row.original}),header:e=>(0,t.jsx)(u.Rr,{value:"Status",...e})}),a.accessor(e=>e.system,{id:"system",cell:e=>(0,t.jsx)(u.G3,{value:e.getValue()}),header:e=>(0,t.jsx)(u.Rr,{value:"System",...e})}),a.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,t.jsx)(u.G3,{value:e.getValue()}),header:e=>(0,t.jsx)(u.Rr,{value:"Detected by",...e})}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,t.jsx)(j.Cy,{time:e.getValue()}),header:e=>(0,t.jsx)(u.Rr,{value:"When",...e})}),a.display({id:"action",cell:e=>e.row.original.diff_status!==C.LL.MUTED?(0,t.jsx)(f.Z,{resource:e.row.original}):(0,t.jsx)(u.G3,{value:"--"}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:s===C.D$.TABLE?{columns:[a.display({id:"select",cell:e=>{var s;let{row:a}=e;return(0,t.jsx)(j.k,{isChecked:a.getIsSelected(),onChange:a.getToggleSelectedHandler(),dataTestId:"select-".concat(null!==(s=a.original.name)&&void 0!==s?s:a.id)})},header:e=>{let{table:s}=e;return(0,t.jsx)(j.k,{isChecked:s.getIsAllPageRowsSelected(),isIndeterminate:s.getIsSomeRowsSelected(),onChange:s.getToggleAllRowsSelectedHandler(),dataTestId:"select-all-rows"})},maxSize:40}),a.accessor(e=>e.name,{id:"tables",cell:e=>(0,t.jsx)(y.Z,{result:e.row.original}),header:e=>(0,t.jsx)(u.Rr,{value:"Table name",...e}),size:300}),a.accessor(e=>e.description,{id:"description",cell:e=>(0,t.jsx)(u.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,t.jsx)(u.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),a.display({id:"status",cell:e=>(0,t.jsx)(h.Z,{result:e.row.original}),header:e=>(0,t.jsx)(u.Rr,{value:"Status",...e})}),a.display({id:"type",cell:()=>(0,t.jsx)(u.G3,{value:"Table"}),header:"Type"}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,t.jsx)(j.Cy,{time:e.getValue()}),header:"Time"}),a.display({id:"actions",cell:e=>(0,t.jsx)(f.Z,{resource:e.row.original}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:s===C.D$.FIELD?{columns:[a.accessor(e=>e.name,{id:"name",cell:e=>(0,t.jsx)(y.Z,{result:e.row.original}),header:e=>(0,t.jsx)(u.Rr,{value:"Field name",...e}),size:300}),a.accessor(e=>e.source_data_type,{id:"data-type",cell:e=>(0,t.jsx)(m.Z,{type:e.getValue()}),header:e=>(0,t.jsx)(u.Rr,{value:"Data type",...e})}),a.accessor(e=>e.description,{id:"description",cell:e=>(0,t.jsx)(u.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,t.jsx)(u.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),a.display({id:"status",cell:e=>(0,t.jsx)(h.Z,{result:e.row.original}),header:e=>(0,t.jsx)(u.Rr,{value:"Status",...e})}),a.display({id:"type",cell:()=>(0,t.jsx)(u.G3,{value:"Field"}),header:"Type"}),a.display({id:"classifications",cell:e=>{let{row:s}=e;return(0,t.jsx)(v.Z,{resource:s.original})},meta:{overflow:"visible",disableRowClick:!0},header:"Data category",minSize:280}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,t.jsx)(j.Cy,{time:e.getValue()}),header:e=>(0,t.jsx)(u.Rr,{value:"When",...e})}),a.display({id:"actions",cell:e=>(0,t.jsx)(f.Z,{resource:e.row.original}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:s===C.D$.ENDPOINT?{columns:[a.accessor(e=>e.name,{id:"name",cell:e=>(0,t.jsx)(y.Z,{result:e.row.original}),header:e=>(0,t.jsx)(u.Rr,{value:"Object",...e}),size:300}),a.accessor(e=>e.description,{id:"description",cell:e=>(0,t.jsx)(u.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,t.jsx)(u.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),a.display({id:"status",cell:e=>(0,t.jsx)(h.Z,{result:e.row.original}),header:e=>(0,t.jsx)(u.Rr,{value:"Status",...e})}),a.display({id:"type",cell:()=>(0,t.jsx)(u.G3,{value:"Endpoint"}),header:"Type"}),a.display({id:"classifications",cell:e=>{let{row:s}=e;return(0,t.jsx)(v.Z,{resource:s.original})},meta:{overflow:"visible",disableRowClick:!0},header:"Data category",minSize:280}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,t.jsx)(j.Cy,{time:e.getValue()}),header:e=>(0,t.jsx)(u.Rr,{value:"When",...e})}),a.display({id:"actions",cell:e=>(0,t.jsx)(f.Z,{resource:e.row.original}),header:"Actions",size:235,meta:{disableRowClick:!0}})]}:{columns:[]}};(i=l||(l={}))[i.ACTION_REQUIRED=0]="ACTION_REQUIRED",i[i.UNMONITORED=1]="UNMONITORED";var _=e=>{let{initialFilterTabIndex:s=0}=e,[a,i]=(0,c.useState)(s),l=(0,c.useMemo)(()=>[{label:"Action Required",filters:[C.LL.CLASSIFICATION_ADDITION,C.LL.CLASSIFICATION_UPDATE],childFilters:[C.LL.CLASSIFICATION_ADDITION,C.LL.CLASSIFICATION_UPDATE]},{label:"In progress",filters:[C.LL.CLASSIFYING,C.LL.CLASSIFICATION_QUEUED],childFilters:[C.LL.CLASSIFYING,C.LL.CLASSIFICATION_QUEUED]},{label:"Unmonitored",filters:[C.LL.MUTED],childFilters:[]}],[]);return{filterTabs:l,filterTabIndex:a,setFilterTabIndex:i,activeDiffFilters:l[a].filters,activeChildDiffFilters:l[a].childFilters}},R=a(47182),T=a(38347),w=a(79494),S=e=>{let{resourceUrn:s}=e,[a,{isLoading:i}]=(0,x.Hf)(),[l,{isLoading:r}]=(0,x.zV)(),o=i||r,d=async e=>{await l({staged_resource_urns:e})},c=async e=>{await a({staged_resource_urns:e})};return(0,t.jsx)(n.jqI,{"data-testid":"bulk-actions-menu",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(w.Z,{title:"Confirm all",icon:(0,t.jsx)(n.nQG,{}),onClick:()=>c([s]),disabled:o,loading:i,type:"primary",size:"middle"}),(0,t.jsx)(w.Z,{title:"Ignore all",icon:(0,t.jsx)(n.tpL,{}),onClick:()=>d([s]),disabled:o,loading:r,size:"middle"})]})})},b=e=>{let{selectedUrns:s}=e,[a,{isLoading:i}]=(0,x.Hf)(),[l,{isLoading:r}]=(0,x.zV)(),o=i||r,d=async e=>{await a({staged_resource_urns:e})},c=async e=>{await l({staged_resource_urns:e})};return s.length?(0,t.jsxs)(n.jqI,{className:"items-center","data-testid":"bulk-actions-menu",children:[(0,t.jsx)(n.xvT,{fontSize:"xs",fontWeight:"semibold",minW:16,mr:4,children:"".concat(s.length," selected")}),(0,t.jsxs)(n.jqI,{className:"gap-2",children:[(0,t.jsx)(w.Z,{title:"Confirm",icon:(0,t.jsx)(n.nQG,{}),onClick:()=>d(s),disabled:o,loading:i,type:"primary",size:"middle"}),(0,t.jsx)(w.Z,{title:"Ignore",icon:(0,t.jsx)(n.tpL,{}),disabled:o,loading:r,onClick:()=>c(s),size:"middle"})]})]}):null},D=a(7940),A=a(80285),N=a(36168),F=a(30952);let Z={items:[],total:0,page:1,size:50,pages:1},k=()=>(0,t.jsx)(n.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"empty-state",alignSelf:"center",margin:"auto",children:(0,t.jsxs)(n.gCW,{children:[(0,t.jsx)(n.xvT,{fontSize:"md",fontWeight:"600",children:"No activity found"}),(0,t.jsx)(n.xvT,{fontSize:"sm",children:"You're up to date!"})]})});var E=e=>{var s,a;let{resourceUrn:i}=e,j=(0,d.useRouter)(),[m,h]=(0,c.useState)(""),{filterTabs:I,setFilterTabIndex:p,filterTabIndex:f,activeDiffFilters:v,activeChildDiffFilters:y}=_({initialFilterTabIndex:(null===(s=j.query)||void 0===s?void 0:s.filterTabIndex)?Number(null===(a=j.query)||void 0===a?void 0:a.filterTabIndex):void 0}),[w,E]=(0,c.useState)({}),{PAGE_SIZES:z,pageSize:O,setPageSize:U,onPreviousPageClick:P,isPreviousPageDisabled:G,onNextPageClick:M,isNextPageDisabled:V,startRange:$,endRange:q,pageIndex:H,setTotalPages:W,resetPageIndexToDefault:Q}=(0,u.oi)();(0,c.useEffect)(()=>{Q()},[i,m,Q,v,y]);let{isFetching:Y,isLoading:B,data:K}=(0,x.z8)({staged_resource_urn:i,page:H,size:O,child_diff_status:y,diff_status:v,search:m}),X=(0,D.G)(null==K?void 0:K.items[0]),{items:J,total:ee,pages:es}=(0,c.useMemo)(()=>null!=K?K:Z,[K]);(0,c.useEffect)(()=>{W(es)},[es,W]);let{columns:ea}=L({resourceType:X}),ei=(0,c.useMemo)(()=>ea,[ea]),{navigateToDiscoveryResults:el}=(0,R.Z)(),et=(0,r.b7)({getCoreRowModel:(0,o.sC)(),getGroupedRowModel:(0,o.qe)(),getExpandedRowModel:(0,o.rV)(),columns:ei,manualPagination:!0,onRowSelectionChange:E,state:{rowSelection:w},getRowId:A.Z,data:J,columnResizeMode:"onChange"}),er=Object.keys(w).filter(e=>w[e]);return B?(0,t.jsx)(u.I4,{rowHeight:36,numRows:36}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Z,{filterTabs:I,filterTabIndex:f,onChange:p}),(0,t.jsxs)(u.Q$,{children:[(0,t.jsxs)(n.kCb,{gap:6,align:"center",children:[(0,t.jsx)(n.xuv,{flexShrink:0,children:(0,t.jsx)(F.f,{value:m,onChange:h})}),(0,t.jsx)(T.Z,{})]}),X===C.D$.TABLE&&!!er.length&&(0,t.jsx)(b,{selectedUrns:er}),X===C.D$.FIELD&&f!==l.UNMONITORED&&(0,t.jsx)(S,{resourceUrn:i})]}),(0,t.jsx)(u.ZK,{tableInstance:et,onRowClick:e=>el({resourceUrn:e.urn,filterTabIndex:f}),getRowIsClickable:e=>X!==C.D$.FIELD||(0,N.Z)(e),emptyTableNotice:(0,t.jsx)(k,{})}),(0,t.jsx)(u.s8,{totalRows:ee||0,pageSizes:z,setPageSize:U,onPreviousPageClick:P,isPreviousPageDisabled:G||Y,onNextPageClick:M,isNextPageDisabled:V||Y,startRange:$,endRange:q})]})}},91761:function(e,s,a){var i=a(24246),l=a(62051),t=a(812),r=a(14047),o=a(7940),n=a(98559),d=a(46420),c=a(79494),u=a(70675);s.Z=e=>{let{resource:s}=e,[a,{isLoading:g}]=(0,u.v8)(),[x,{isLoading:j}]=(0,u.cM)(),[m,{isLoading:h}]=(0,u.vi)(),I=j||h||g,{diff_status:p,child_diff_statuses:C,top_level_field_name:f}=s,{successAlert:v,errorAlert:y}=(0,r.V)(),L=p===d.LL.CLASSIFICATION_ADDITION||p===d.LL.CLASSIFICATION_UPDATE,_=C&&(C[d.LL.CLASSIFICATION_ADDITION]||C[d.LL.CLASSIFICATION_UPDATE]),R=(L||_)&&!f,T=L||_,w=(0,o.G)(s)!==d.D$.FIELD,S=R&&T&&w,b=async()=>{let e=await x({staged_resource_urn:s.urn});(0,t.D4)(e)?y((0,t.e$)(e.error),"Failed to promote resource"):v('These changes have been added to a Fides dataset. To view, navigate to "Manage datasets".',"Table changes confirmed")},D=async()=>{let e=await m({staged_resource_urn:s.urn});(0,t.D4)(e)?y((0,t.e$)(e.error),"Failed to mute resource"):v("Ignored changes will not be added to a Fides dataset.","".concat(s.name||"Changes"," ignored"))},A=async()=>{let e=await a({staged_resource_urn:s.urn,monitor_config_id:s.monitor_config_id,start_classification:!0,classify_monitored_resources:!0});(0,t.D4)(e)?y((0,t.e$)(e.error),"Failed to reclassify resource"):v("Reclassification of ".concat((0,n.Z)(s)||"the resource"," has begun.  The results may take some time to appear in the “Data discovery“ tab."),"Reclassification started")};return(0,i.jsxs)(l.Ugi,{gap:2,children:[R&&(0,i.jsx)(c.Z,{title:"Confirm",icon:(0,i.jsx)(l.nQG,{}),onClick:b,disabled:I,loading:j}),T&&(0,i.jsx)(c.Z,{title:"Ignore",icon:(0,i.jsx)(l.tpL,{}),onClick:D,disabled:I,loading:h}),w&&!S&&(0,i.jsx)(c.Z,{title:"Reclassify",icon:(0,i.jsx)(l.nyI,{}),onClick:A,disabled:I,loading:g}),S&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.LZC,{}),(0,i.jsxs)(l.v2r,{children:[(0,i.jsx)(l.j2t,{as:l.wpx,size:"small",type:"text",icon:(0,i.jsx)(l.nXP,{transform:"rotate(90deg)"}),className:"w-6 gap-0","data-testid":"actions-overflow-btn"}),(0,i.jsx)(l.qyq,{children:(0,i.jsx)(l.sNh,{onClick:A,icon:(0,i.jsx)(l.nyI,{}),"data-testid":"action-reclassify",children:"Reclassify"})})]})]})]})}}}]);