(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[710],{9387:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/integrations",function(){return t(22406)}])},22406:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return M}});var i,o,l,a,r=t(24246),s=t(62051),c=t(27378),d=t(7617),u=t(62165),x=t(18225),h=t(77213),p=t(58754),g=t(14207),j=t(8133),v=t(52352),C=t(15987),m=t(75595),f=e=>{let{integrationType:n,onConfigure:t,onCancel:i}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{integration:null==n?void 0:n.placeholder,onConfigureClick:t}),null==n?void 0:n.overview,(0,r.jsxs)(s.kCb,{children:[(0,r.jsx)(s.LZC,{}),(0,r.jsx)(s.wpx,{onClick:i,children:"Cancel"})]})]})},_=t(25980);(i=l||(l={})).ALL="All",i.CRM="CRM",i.DATA_CATALOG="Data Catalog",i.DATABASE="Database",i.DATA_WAREHOUSE="Data Warehouse",i.IDENTITY_PROVIDER="Identity Provider",i.WEBSITE="Website",i.MANUAL="Manual";var y=e=>{var n;let{flags:t}=(0,u.Vb)(),i=Object.values(l).filter(e=>("Identity Provider"!==e||t.oktaMonitor)&&("Manual"!==e||t.alphaNewManualIntegration)),[o,a]=(0,c.useState)(0),r=i[o],[s,d]=(0,c.useState)(!1),x="All"!==r,h=null!==(n=null==e?void 0:e.filter(e=>!x||e.category===r))&&void 0!==n?n:[];return{tabs:i,tabIndex:o,anyFiltersApplied:x,isFiltering:s,onChangeFilter:e=>{d(!0),a(e),setTimeout(()=>d(!1),100)},filteredTypes:h}},b=e=>{let{onCancel:n,onDetailClick:t,onConfigureClick:i}=e,{tabIndex:o,onChangeFilter:l,isFiltering:a,filteredTypes:c,tabs:u}=y(v.FO),{flags:{oktaMonitor:h,alphaNewManualIntegration:p}}=(0,_.Vb)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.mQc,{index:o,onChange:l,mb:4,children:(0,r.jsx)(s.tdY,{children:u.map(e=>(0,r.jsx)(d.q,{label:e},e))})}),a?(0,r.jsx)(x.Z,{}):(0,r.jsx)(s.kCb,{direction:"column",children:c.map(e=>(h||"okta"!==e.placeholder.connection_type)&&(p||"manual_webhook"!==e.placeholder.connection_type)?(0,r.jsx)(m.Z,{integration:e.placeholder,onConfigureClick:()=>i(e),otherButtons:(0,r.jsx)(s.wpx,{onClick:()=>t(e),children:"Details"})},e.placeholder.key):null)}),(0,r.jsxs)(s.kCb,{children:[(0,r.jsx)(s.LZC,{}),(0,r.jsx)(s.wpx,{onClick:n,children:"Cancel"})]})]})},A=t(64176);(o=a||(a={})).LIST_VIEW="list-view",o.DETAIL="detail",o.FORM="form";var k=e=>{var n,t;let{isOpen:i,onClose:o}=e,[l,a]=(0,c.useState)("list-view"),[s,d]=(0,c.useState)(),u=(0,A.Z)(null==s?void 0:s.placeholder.connection_type,null==s?void 0:null===(t=s.placeholder)||void 0===t?void 0:null===(n=t.saas_config)||void 0===n?void 0:n.type),{description:x}=(0,v.ZP)(null==s?void 0:s.placeholder.connection_type),h=()=>{a("list-view"),d(void 0),o()},p=s?"".concat(s.placeholder.name," Integration"):"Add integration";return(0,r.jsxs)(j.Z,{size:"2xl",isOpen:i,onClose:h,title:p,children:["list-view"===l&&(0,r.jsx)(b,{onCancel:h,onDetailClick:e=>{a("detail"),d(e)},onConfigureClick:e=>{a("form"),d(e)}}),"detail"===l&&(0,r.jsx)(f,{integrationType:s,onConfigure:()=>a("form"),onCancel:h}),"form"===l&&(0,r.jsx)(C.Z,{connectionOption:u,onCancel:h,description:x})]})},w=t(86677),T=t(77830),I=t(29379),N=e=>{let{isFiltered:n,onOpenAddModal:t}=e;return(0,r.jsxs)(s.kCb,{direction:"column",alignItems:"center","data-testid":"empty-state",children:[(0,r.jsx)(s.xvT,{color:"gray.700",fontWeight:"semibold",fontSize:"md",children:"No integrations"}),(0,r.jsx)(s.xvT,{color:"gray.700",fontSize:"sm",marginTop:"8px",children:n?"No integrations match your filters":"You have not configured any integrations"}),(0,r.jsx)(s.xvT,{color:"gray.700",fontSize:"sm",children:'Click "Add integration" to connect and configure systems now.'}),(0,r.jsx)(s.wpx,{type:"primary",onClick:t,className:"mt-4",children:"Add integration"})]})},O=e=>{let{integrations:n,isFiltered:t,onOpenAddModal:i}=e,o=(0,w.useRouter)(),l=n.filter(e=>{var n;return!(!e.name&&(null===(n=e.saas_config)||void 0===n?void 0:n.type)==="salesforce")});return(0,r.jsx)(s.xuv,{marginTop:"24px",children:l.length?l.map(e=>{var n;let t=!(null===(n=(0,v.ZP)(e.connection_type).enabledFeatures)||void 0===n?void 0:n.includes(I.j.WITHOUT_CONNECTION));return(0,r.jsx)(m.Z,{integration:e,showTestNotice:t,configureButtonLabel:"Manage",onConfigureClick:()=>o.push("".concat(T.KH,"/").concat(e.key))},e.key)}):(0,r.jsx)(N,{onOpenAddModal:i,isFiltered:t||l.length>0})})},Z=t(40774),E=t(46420),M=()=>{let[e,n]=(0,c.useState)(1),[t,i]=(0,c.useState)(50),{flags:o}=(0,u.Vb)(),l=(0,c.useMemo)(()=>v.jq.filter(e=>e!==E.Rj.MANUAL_WEBHOOK||o.alphaNewManualIntegration),[o.alphaNewManualIntegration]),{data:a,isLoading:j}=(0,g.AZ)({connection_type:l,size:t,page:e}),{items:C,total:m}=null!=a?a:{},{onOpen:f,isOpen:_,onClose:b}=(0,s.qY0)(),{tabIndex:A,onChangeFilter:w,anyFiltersApplied:T,isFiltering:I,filteredTypes:N,tabs:M}=y(null==C?void 0:C.map(e=>(0,v.ZP)(e.connection_type))),S=(0,c.useMemo)(()=>{var e;return null!==(e=null==C?void 0:C.filter(e=>N.some(n=>n.placeholder.connection_type===e.connection_type)))&&void 0!==e?e:[]},[C,N]);return(0,r.jsxs)(h.Z,{title:"Integrations",children:[(0,r.jsx)(p.Z,{heading:"Integrations",breadcrumbItems:[{title:"All integrations"}],children:(0,r.jsx)(Z.Z,{})}),(0,r.jsxs)(s.xuv,{"data-testid":"integration-tabs",display:"flex",children:[(0,r.jsx)(s.mQc,{index:A,onChange:e=>{n(1),w(e)},w:"full",children:(0,r.jsx)(s.tdY,{children:M.map(e=>(0,r.jsx)(d.q,{label:e},e))})}),(0,r.jsx)(s.xuv,{borderBottom:"2px solid",borderColor:"gray.200",height:"fit-content",pr:"2",pb:"2",children:(0,r.jsx)(s.wpx,{onClick:f,"data-testid":"add-integration-btn",icon:(0,r.jsx)(s.xPt,{}),iconPosition:"end",children:"Add Integration"})})]}),j||I?(0,r.jsx)(x.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O,{integrations:S,onOpenAddModal:f,isFiltered:T}),!!m&&m>10&&(0,r.jsx)(s.B7X,{"data-testid":"pagination-controls",size:"small",total:m,pageSize:t,current:e,onChange:(e,t)=>{n(e),i(t)},showSizeChanger:!0})]}),(0,r.jsx)(k,{isOpen:_,onClose:b})]})}}},function(e){e.O(0,[8033,6060,2858,2866,9278,3662,641,7553,4481,6202,155,2888,9774,179],function(){return e(e.s=9387)}),_N_E=e.O()}]);